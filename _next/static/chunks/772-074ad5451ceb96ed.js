"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{36575:function(e,n,t){var r,a=t(71383),c=t(71893).ZP.span(r||(r=(0,a.Z)(["\n  color: #dc3545;\n  margin: 0;\n  padding: 0;\n"])));n.Z=c},39772:function(e,n,t){var r,a=t(16835),c=t(50029),u=t(71383),s=t(87794),i=t.n(s),o=t(67294),l=t(11915),p=t(71893),d=t(85330),f=t(3016),m=t(42894),h=t(15812),v=t(36575),b=t(91679),x=t(36089),w=t(85893),j=p.ZP.div(r||(r=(0,u.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"]))),g={idirEmail:"",role:"member",id:new Date().getTime()};n.Z=(0,h.hU)(function(e){var n,t=e.onSubmit,r=e.alert,u=((0,o.useContext)(x.SessionContext)||{}).session,s=(0,o.useState)([g]),p=s[0],h=s[1],y=(0,o.useState)(""),Z=y[0],k=y[1],P=(0,o.useState)(!1),O=P[0],z=P[1],C=(0,o.useState)(),E=C[0],S=C[1],A=(n=(0,c.Z)(i().mark(function e(){var n,c,u,s,o,l,d,m,v;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:Z,members:p},c=(0,b.p)(n),s=(u=(0,a.Z)(c,2))[0],o=u[1],!s){e.next=4;break}return e.abrupt("return",S(o));case 4:return z(!0),e.next=7,(0,f.Cm)(n);case 7:if(l=e.sent,m=(d=(0,a.Z)(l,2))[0],(v=d[1])?r.show({variant:"danger",fadeOut:1e4,closable:!0,content:v}):r.show({variant:"success",fadeOut:1e4,closable:!0,content:"Team ".concat(Z," successfully created")}),!m){e.next=15;break}return e.next=15,t(m.id);case 15:h([g]),k(""),z(!1),window.location.hash="#";case 19:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,w.jsxs)("div",{children:[(0,w.jsx)(l.default,{label:"Team Name",onChange:function(e){k(e.target.value)},maxLength:"255","data-testid":"team-name",value:Z}),E&&E.name&&(0,w.jsx)(v.Z,{children:null==E?void 0:E.name}),(0,w.jsx)("br",{}),(0,w.jsx)("strong",{children:"Team Members"}),(0,w.jsx)(b.Z,{errors:E,members:p,setMembers:h,currentUser:u}),(0,w.jsxs)(j,{children:[(0,w.jsx)(d.zx,{variant:"secondary",onClick:function(){window.location.hash="#"},children:"Cancel"}),(0,w.jsx)(d.zx,{type:"button",onClick:A,"data-testid":"send-invitation",children:O?(0,w.jsx)(m.rj,{color:"#FFF",height:18,width:50,visible:O}):"Send Invitation"})]})]})})},91679:function(e,n,t){t.d(n,{p:function(){return F}});var r,a,c,u,s,i,o,l,p,d,f=t(59499),m=t(27812),h=t(71383);t(67294);var v=t(11915),b=t(35611),x=t(71893),w=t(48966),j=t.n(w),g=t(99603),y=t(59417),Z=t(36575),k=t(74150),P=t(85893);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var C=x.ZP.div(r||(r=(0,h.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  align-items: end;\n  margin-bottom: 10px;\n  grid-gap: 0 1em;\n"]))),E=(0,x.ZP)(b.default)(a||(a=(0,h.Z)(["\n  & .pg-select-wrapper {\n    height: 44px;\n    ","\n  }\n"])),function(e){return e.readOnlyRole?"padding-left:6px;":""}),S=x.ZP.div(c||(c=(0,h.Z)(["\n  border-bottom: 1px solid black;\n  grid-column: 1 / 3;\n"]))),A=x.ZP.span(u||(u=(0,h.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),D=x.ZP.section(s||(s=(0,h.Z)(["\n  max-height: 50vh;\n  overflow-y: scroll;\n"]))),M=(0,x.ZP)(C)(i||(i=(0,h.Z)(["\n  grid-template-columns: 2.2fr 0.9fr 1.2fr;\n  align-items: start;\n  margin-bottom: 20px;\n"]))),T=(0,x.ZP)(g.G)(o||(o=(0,h.Z)(["\n  align-self: center;\n  color: red;\n  cursor: pointer;\n"]))),N=(0,x.ZP)(g.G)(l||(l=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n"]))),R=(0,x.ZP)(g.G)(p||(p=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n  color: white;\n  background-color: black;\n"]))),G=x.ZP.p(d||(d=(0,h.Z)(["\n  font-style: italic;\n  font-size: 0.95em;\n"]))),F=function(e){var n={name:null,members:[]};return e.name||(n.name="Please enter a name"),e.members.forEach(function(t,r){t.idirEmail?j().isEmail(t.idirEmail)?e.members.filter(function(e){return e.idirEmail===t.idirEmail}).length>1&&(n.members[r]="Please use unique email"):n.members[r]="Please enter a valid email":n.members[r]="Please enter an email"}),[n.name||n.members.length>0,n]};n.Z=function(e){var n=e.errors,t=e.members,r=e.setMembers,a=e.allowDelete,c=void 0===a||a,u=e.currentUser,s=void 0===u?null:u,i=function(e,n){var a=z({},t[e]);a.idirEmail=n.target.value;var c=(0,m.Z)(t);c[e]=a,r(c)},o=function(e,n){var a=z({},t[e]);a.role=n.target.value;var c=(0,m.Z)(t);c[e]=a,r(c)},l=function(e){r(t.filter(function(n,t){return t!==e}))};return(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:["Enter your team memberâ€™s government email address and they will be sent an invitation to join the project. Once they accept the invitation, they will have access to your project. Their invitation will expire in"," ",(0,P.jsx)("strong",{children:"2 business days"}),"."]}),(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{className:"strong",children:"Roles:"}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(R,{icon:y.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Admins"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"managing"})," powers"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(N,{icon:y.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Members"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"viewing"})," powers"]})]}),(0,P.jsx)("br",{}),(0,P.jsx)("div",{children:(0,P.jsx)("span",{className:"underline",children:(0,P.jsx)(k.default,{external:!0,href:"https://github.com/bcgov/sso-keycloak/wiki/CSS-App-My-Teams",children:"View a detailed breakdown of roles on our wiki page"})})})]}),(0,P.jsxs)(D,{children:[(0,P.jsxs)(C,{children:[(0,P.jsx)("strong",{children:"Member"}),(0,P.jsx)("strong",{children:"Role"}),(0,P.jsx)(S,{})]}),(0,P.jsx)(G,{children:"*Please enter email address tied to and IDIR to allow your user to login"}),s&&(0,P.jsxs)(M,{children:[(0,P.jsx)(v.default,{value:(null==s?void 0:s.email)||"",readOnly:!0}),(0,P.jsx)(E,{label:"Role",disabled:!0,value:"admin",readOnlyRole:!0,children:(0,P.jsx)("option",{value:"admin",children:"Admin"})})]}),t.map(function(e,t){return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(M,{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(v.default,{placeholder:"Enter email address",onChange:function(e){return i(t,e)},value:e.idirEmail,"data-testid":"user-email"}),n&&n.members&&n.members[t]&&(0,P.jsx)(Z.Z,{children:n.members[t]})]}),(0,P.jsxs)(E,{label:"Role",onChange:function(e){return o(t,e)},value:e.role,"data-testid":"user-role",children:[(0,P.jsx)("option",{value:"member",children:"Member"}),(0,P.jsx)("option",{value:"admin",children:"Admin"})]}),t>=0&&c&&(0,P.jsx)(T,{icon:y.uMC,onClick:function(){return l(t)},title:"Delete","data-testid":"delete-user-role"})]},e.id)})}),(0,P.jsxs)(A,{onClick:function(){r([].concat((0,m.Z)(t),[{idirEmail:"",role:"member",id:new Date().getTime(),pending:!0}]))},children:[(0,P.jsx)(g.G,{style:{color:"#006fc4"},icon:y.KtF,title:"Add Item","data-testid":"add-user-role"}),(0,P.jsx)("span",{children:"Add another team member"})]})]})]})}},3016:function(e,n,t){t.d(n,{Cm:function(){return P},Dc:function(){return Z},Gc:function(){return G},MH:function(){return S},Sx:function(){return T},YY:function(){return C},ZT:function(){return N},fC:function(){return D},l8:function(){return k},rU:function(){return A},rl:function(){return M},vM:function(){return R},w2:function(){return O},yG:function(){return z},yN:function(){return F},zZ:function(){return E}});var r,a,c,u,s,i,o,l,p,d,f,m,h,v,b,x,w=t(50029),j=t(87794),g=t.n(j),y=t(21963),Z=(r=(0,w.Z)(g().mark(function e(){var n;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams").then(function(e){return e.data});case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return r.apply(this,arguments)}),k=(a=(0,w.Z)(g().mark(function e(){var n;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("allowed-teams").then(function(e){return e.data});case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return a.apply(this,arguments)}),P=(c=(0,w.Z)(g().mark(function e(n){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.post("teams",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return c.apply(this,arguments)}),O=(u=(0,w.Z)(g().mark(function e(n){var t,r,a,c;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.name,r=n.id,a={name:t},e.next=5,y.e.put("teams/".concat(r),a).then(function(e){return e.data});case 5:return c=e.sent,e.abrupt("return",[c,null]);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return u.apply(this,arguments)}),z=(s=(0,w.Z)(g().mark(function e(n){var t,r,a;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.id,r=n.members,e.next=4,y.e.post("teams/".concat(t,"/members"),r).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return s.apply(this,arguments)}),C=(i=(0,w.Z)(g().mark(function e(n){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams/".concat(n,"/members")).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return i.apply(this,arguments)}),E=(o=(0,w.Z)(g().mark(function e(n,t,r){var a;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.put("teams/".concat(n,"/members/").concat(t),r).then(function(e){return e.data});case 3:return a=e.sent,e.abrupt("return",[a,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t){return o.apply(this,arguments)}),S=(l=(0,w.Z)(g().mark(function e(n,t){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.delete("teams/".concat(t,"/members/").concat(n)).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return l.apply(this,arguments)}),A=(p=(0,w.Z)(g().mark(function e(n,t){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.post("teams/".concat(t,"/invite"),n).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return p.apply(this,arguments)}),D=(d=(0,w.Z)(g().mark(function e(n){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.delete("teams/".concat(n)).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return d.apply(this,arguments)}),M=(f=(0,w.Z)(g().mark(function e(n){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.post("teams/".concat(n,"/service-accounts")).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return f.apply(this,arguments)}),T=(m=(0,w.Z)(g().mark(function e(n){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams/".concat(n,"/service-accounts")).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return m.apply(this,arguments)}),N=(h=(0,w.Z)(g().mark(function e(n,t){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams/".concat(n,"/service-accounts/").concat(t)).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return h.apply(this,arguments)}),R=(v=(0,w.Z)(g().mark(function e(n,t){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams/".concat(n,"/service-accounts/").concat(t,"/credentials")).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return v.apply(this,arguments)}),G=(b=(0,w.Z)(g().mark(function e(n,t){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.put("teams/".concat(n,"/service-accounts/").concat(t,"/credentials")).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return b.apply(this,arguments)}),F=(x=(0,w.Z)(g().mark(function e(n,t){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.delete("teams/".concat(n,"/service-accounts/").concat(t)).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return x.apply(this,arguments)})}}]);