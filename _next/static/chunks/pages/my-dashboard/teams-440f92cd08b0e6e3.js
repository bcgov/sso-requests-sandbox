(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{91296:function(e,n,t){var r=0/0,a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),m=Object.prototype.toString,p=Math.max,f=Math.min,h=function(){return d.Date.now()};function x(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function b(e){if("number"==typeof e)return e;if("symbol"==typeof(n=e)||n&&"object"==typeof n&&"[object Symbol]"==m.call(n))return r;if(x(e)){var n,t="function"==typeof e.valueOf?e.valueOf():e;e=x(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var l=o.test(e);return l||s.test(e)?c(e.slice(2),l?2:8):i.test(e)?r:+e}e.exports=function(e,n,t){var r,a,i,o,s,c,l=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function v(n){var t=r,i=a;return r=a=void 0,l=n,o=e.apply(i,t)}function g(e){var t=e-c,r=e-l;return void 0===c||t>=n||t<0||d&&r>=i}function j(){var e,t,r,a=h();if(g(a))return y(a);s=setTimeout(j,(e=a-c,t=a-l,r=n-e,d?f(r,i-t):r))}function y(e){return(s=void 0,m&&r)?v(e):(r=a=void 0,o)}function w(){var e,t=h(),i=g(t);if(r=arguments,a=this,c=t,i){if(void 0===s)return l=e=c,s=setTimeout(j,n),u?v(e):o;if(d)return s=setTimeout(j,n),v(c)}return void 0===s&&(s=setTimeout(j,n)),o}return n=b(n)||0,x(t)&&(u=!!t.leading,i=(d="maxWait"in t)?p(b(t.maxWait)||0,n):i,m="trailing"in t?!!t.trailing:m),w.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},w.flush=function(){return void 0===s?o:y(h())},w}},65363:function(e,n,t){"use strict";var r,a=t(71383),i=t(71893).ZP.span(r||(r=(0,a.Z)(["\n  color: #dc3545;\n  margin: 0;\n  padding: 0;\n"])));n.Z=i},92109:function(e,n,t){"use strict";var r,a=t(16835),i=t(50029),o=t(71383),s=t(87794),c=t.n(s),l=t(67294),u=t(11915),d=t(71893),m=t(85330),p=t(37112),f=t(42894),h=t(36063),x=t(65363),b=t(87266),v=t(66708),g=t(85893),j=d.ZP.div(r||(r=(0,o.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"]))),y={idirEmail:"",role:"member",id:new Date().getTime()};n.Z=(0,h.hU)(function(e){var n,t=e.onSubmit,r=e.alert,o=e.setOpenCreateTeamModal,s=((0,l.useContext)(v.SessionContext)||{}).session,d=(0,l.useState)([y]),h=d[0],w=d[1],Z=(0,l.useState)(""),S=Z[0],C=Z[1],k=(0,l.useState)(!1),O=k[0],P=k[1],E=(0,l.useState)(null),T=E[0],A=E[1],D=(n=(0,i.Z)(c().mark(function e(){var n,i,l,u,d,m,f,x;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:S,members:h},i=(0,b.p)(n,s.email),u=(l=(0,a.Z)(i,2))[0],d=l[1],!u){e.next=5;break}return e.abrupt("return",A(d));case 5:return P(!0),e.next=8,(0,p.Cm)(n);case 8:if(m=e.sent,x=(f=(0,a.Z)(m,2))[0],f[1]?r.show({variant:"danger",fadeOut:1e4,closable:!0,content:"Failed to create team. Please try again."}):r.show({variant:"success",fadeOut:1e4,closable:!0,content:"Team ".concat(S," successfully created")}),!x){e.next=16;break}return e.next=16,t(x.id);case 16:w([y]),C(""),P(!1),A(null),o(!1);case 21:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,g.jsxs)("div",{children:[(0,g.jsx)(u.default,{label:"Team Name",onChange:function(e){C(e.target.value)},maxLength:"255","data-testid":"team-name",value:S}),T&&T.name&&(0,g.jsx)(x.Z,{children:null==T?void 0:T.name}),(0,g.jsx)("br",{}),(0,g.jsx)("strong",{children:"Team Members"}),(0,g.jsx)(b.Z,{errors:T,members:h,setMembers:w,currentUser:s}),(0,g.jsxs)(j,{children:[(0,g.jsx)(m.zx,{variant:"secondary",onClick:function(){w([y]),C(""),P(!1),A(null),o(!1)},children:"Cancel"}),(0,g.jsx)(m.zx,{type:"button",onClick:D,"data-testid":"send-invitation",children:O?(0,g.jsx)(f.rj,{color:"#FFF",height:18,width:50,visible:O}):"Send Invitation"})]})]})})},87266:function(e,n,t){"use strict";t.d(n,{p:function(){return _}});var r,a,i,o,s,c,l,u,d,m,p=t(59499),f=t(27812),h=t(71383);t(67294);var x=t(11915),b=t(35611),v=t(71893),g=t(48966),j=t.n(g),y=t(99603),w=t(59417),Z=t(65363),S=t(74150),C=t(18269),k=t(35685),O=t(17769),P=t(85893);function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach(function(n){(0,p.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var A=v.ZP.div(r||(r=(0,h.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  align-items: end;\n  margin-bottom: 10px;\n  grid-gap: 0 1em;\n"]))),D=(0,v.ZP)(b.default)(a||(a=(0,h.Z)(["\n  & .pg-select-wrapper {\n    height: 44px;\n    ","\n  }\n"])),function(e){return e.readOnlyRole?"padding-left:6px;":""}),M=v.ZP.div(i||(i=(0,h.Z)(["\n  border-bottom: 1px solid black;\n  grid-column: 1 / 3;\n"]))),R=v.ZP.span(o||(o=(0,h.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),N=v.ZP.section(s||(s=(0,h.Z)(["\n  max-height: 50vh;\n  overflow-y: scroll;\n  padding-left: 1em;\n"]))),F=(0,v.ZP)(A)(c||(c=(0,h.Z)(["\n  grid-template-columns: 2.2fr 0.9fr 1.2fr;\n  align-items: start;\n  margin-bottom: 20px;\n  .email-select > .select-inner__control {\n    padding: 0.13em 0;\n    border: 2px solid #606060;\n    visibility: inherit;\n\n    &:focus-within {\n      outline: 4px solid #3b99fc !important;\n      outline-offset: 2px !important;\n    }\n  }\n"]))),I=(0,v.ZP)(y.G)(l||(l=(0,h.Z)(["\n  align-self: center;\n  color: red;\n  cursor: pointer;\n"]))),z=(0,v.ZP)(y.G)(u||(u=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n"]))),U=(0,v.ZP)(y.G)(d||(d=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n  color: white;\n  background-color: black;\n"]))),B=v.ZP.p(m||(m=(0,h.Z)(["\n  font-style: italic;\n  font-size: 0.95em;\n"]))),_=function(e,n){var t={name:null,members:[]};return e.name||(t.name="Please enter a name"),e.members.forEach(function(r,a){r.idirEmail?j().isEmail(r.idirEmail)?(e.members.filter(function(e){return e.idirEmail===r.idirEmail}).length>1||r.idirEmail===n)&&(t.members[a]="Please use unique email"):t.members[a]="Please enter a valid email":t.members[a]="Please enter an email"}),[t.name||t.members.length>0,t]};n.Z=function(e){var n=e.errors,t=e.members,r=e.setMembers,a=e.allowDelete,i=void 0===a||a,o=e.currentUser,s=void 0===o?null:o,c=function(e,n){var a=T({},t[n]);a.idirEmail=(null==e?void 0:e.label.toLowerCase())||"";var i=(0,f.Z)(t);i[n]=a,r(i)},l=function(e,n){var a=T({},t[e]);a.role=n.target.value;var i=(0,f.Z)(t);i[e]=a,r(i)},u=function(e){r(t.filter(function(n,t){return t!==e}))};return(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:["Enter your team member’s government email address and they will be sent an invitation to join the project. Once they accept the invitation, they will have access to your project. Their invitation will expire in"," ",(0,P.jsx)("strong",{children:"2 business days"}),"."]}),(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{className:"strong",children:"Roles:"}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(U,{icon:w.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Admins"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"managing"})," powers"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(z,{icon:w.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Members"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"viewing"})," powers"]})]}),(0,P.jsx)("br",{}),(0,P.jsx)("div",{children:(0,P.jsx)("span",{className:"underline",children:(0,P.jsx)(S.default,{external:!0,href:(0,C.eO)("CSS-App-My-Teams#ive-created-a-team-now-what"),children:"View a detailed breakdown of roles on our wiki page"})})})]}),(0,P.jsxs)(N,{children:[(0,P.jsxs)(A,{children:[(0,P.jsx)("strong",{children:"Member"}),(0,P.jsx)("strong",{children:"Role"}),(0,P.jsx)(M,{})]}),(0,P.jsx)(B,{children:"*Please enter email address tied to an IDIR to allow your user to login"}),s&&(0,P.jsxs)(F,{children:[(0,P.jsx)(x.default,{value:(null==s?void 0:s.email)||"",readOnly:!0,fullWidth:!0}),(0,P.jsx)(D,{label:"Role",disabled:!0,value:"admin",readOnlyRole:!0,children:(0,P.jsx)("option",{value:"admin",children:"Admin"})})]}),t.map(function(e,t){return(0,P.jsxs)(F,{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(k.Z,{loadOptions:O.c,onChange:function(e){return c(e,t)},noOptionsMessage:function(){return"Start typing email..."},className:"email-select",menuPlacement:"top",maxMenuHeight:120,classNamePrefix:"select-inner",placeholder:"Enter email address"}),n&&n.members&&n.members[t]&&(0,P.jsx)(Z.Z,{children:n.members[t]})]}),(0,P.jsxs)(D,{label:"Role",onChange:function(e){return l(t,e)},value:e.role,"data-testid":"user-role",children:[(0,P.jsx)("option",{value:"member",children:"Member"}),(0,P.jsx)("option",{value:"admin",children:"Admin"})]}),t>=0&&i&&(0,P.jsx)(I,{icon:w.uMC,onClick:function(){return u(t)},title:"Delete","data-testid":"delete-user-role"})]},e.id)}),(0,P.jsxs)(R,{onClick:function(){r([].concat((0,f.Z)(t),[{idirEmail:"",role:"member",id:new Date().getTime(),pending:!0}]))},children:[(0,P.jsx)(y.G,{style:{color:"#006fc4"},icon:w.KtF,title:"Add Item","data-testid":"add-user-role"}),(0,P.jsx)("span",{children:"Add another team member"})]})]})]})}},62325:function(e,n,t){"use strict";var r=t(83024),a=t(12183),i={shared:{button:"\n      border-radius: 0.222em;\n      border-width: 0;\n      padding: 0.6em 1.1em;\n      text-align: center;\n      text-decoration: none;\n      font-weight: 700;\n      letter-spacing: 1px;\n      display: inline-block;\n      cursor: pointer;\n      box-shadow: 0px 0px 0px 2px transparent inset, 0px 0em 0px 0px rgba(34, 36, 38, 0.15) inset;\n    "},size:{xsmall:{button:"\n        font-size: 0.7rem;\n      "},small:{button:"\n        font-size: 0.8rem;\n      "},medium:{button:"\n        font-size: ".concat(a.n5,";\n      ")},large:{button:"\n        font-size: ".concat(a.zA,";\n      ")}},variant:{primary:{button:"\n        background-color: #D5EDFF;\n        box-shadow: 0px 0px 0px 2px #D5EDFF inset !important;\n        color: #3E3E3E;\n\n        &:hover {\n          text-decoration: underline;\n          background-color: #FFF7D5;\n          box-shadow: 0px 0px 0px 2px #FFF7D5 inset !important;\n          opacity: 0.80;\n        }\n\n        &:active {\n          opacity: 1;\n        }\n      "},grey:{button:"\n        background-color: #B2B2B2;\n        box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        color: #F8F8F8;\n        min-width: 110px;\n\n        &:hover {\n          background-color: ".concat(a.TU,";\n          box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        }\n      ")}}},o=(0,r.applyTheme)(i,{defaultProps:{variant:"primary",size:"medium"},breakProps:[],staticProps:["fullHeight","fullWidth"]});n.Z=o},49936:function(e,n,t){"use strict";var r,a=t(71383);t(67294);var i=t(11163),o=t(46312),s=t(71893),c=t(85330),l=t(4256),u=t(22280),d=t(85893),m=s.ZP.div(r||(r=(0,a.Z)(["\n  height: 100%;\n  overflow: auto;\n"])));n.Z=function(e){var n=e.tab,t=e.leftPanel,r=e.rightPanel,a=e.showResizable;e.children;var s=(0,i.useRouter)(),p=(0,d.jsxs)(c.mQ,{onChange:function(e){s.replace("/my-dashboard/".concat(e))},activeKey:n,tabBarGutter:30,children:[(0,d.jsx)(c.OK,{tab:"My Projects"},"integrations"),(0,d.jsx)(c.OK,{tab:"My Teams"},"teams")]});return(0,d.jsxs)(l.Z,{rules:u.F,children:[p,void 0===a||a?(0,d.jsx)(o.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,d.jsx)(m,{children:t&&t()})}):t&&t(),(0,d.jsx)("br",{}),r&&r()]})}},44196:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eq}});var r,a,i,o,s,c,l,u,d,m,p,f,h,x,b,v,g,j,y,w,Z,S=t(16835),C=t(50029),k=t(87794),O=t.n(k),P=t(67294),E=t(49936),T=t(59499),A=t(71383),D=t(11163),M=t(71893),R=t(85330),N=t(47755),F=t(62325),I=t(35611),z=t(35166),U=t(87266),B=t(27008),_=t(37112),H=t(36063),G=t(76457),K=t(99603),L=t(59417),q=t(58766),Y=t(63916),W=t(85893),$=(0,M.ZP)(K.G)(r||(r=(0,A.Z)(["\n  color: #ff0303;\n"]))),V=M.ZP.div(a||(a=(0,A.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 6fr;\n"]))),X=function(e){var n=e.title,t=e.content,r=e.note;return(0,W.jsxs)(V,{children:[(0,W.jsx)($,{icon:L.RLE,size:"3x"}),(0,W.jsxs)("div",{children:[n&&(0,W.jsx)("strong",{children:n}),t&&(0,W.jsx)("p",{children:t}),r&&(0,W.jsx)("i",{children:r})]})]})},Q=t(11058),J=t(64735),ee=t(42894),en=t(12183),et=M.ZP.div(i||(i=(0,A.Z)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-right: 15px;\n  & > * {\n    margin-left: 15px;\n  }\n"]))),er=(0,M.ZP)(K.G)(o||(o=(0,A.Z)(["\n  cursor: ",";\n  ","\n  ",";\n"])),function(e){return e.disabled?"not-allowed":"pointer"},function(e){return e.disabled?"color: #CACACA;":"color: inherit; &:hover { color: ".concat(e.activeColor||"#000","; }")},function(e){return e.isUnread?"color: ".concat(en.Uo):""});function ea(e){var n=e.copyOrDownloadAction,t=e.showDeleteModal,r=e.showUpdateModal,a=e.actionsDisabled;return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(et,{children:[(0,W.jsx)(er,{icon:L.kZ_,role:"button","aria-label":"copy",onClick:function(){return n(!1)},title:"Copy to clipboard",size:"lg",disabled:a}),(0,W.jsx)(er,{icon:L.q7m,role:"button","aria-label":"download",onClick:function(){return n(!0)},title:"Download",size:"lg",disabled:a}),(0,W.jsx)(er,{icon:L.lUd,role:"button","aria-label":"download",onClick:r,title:"Update secret",size:"lg",disabled:a}),(0,W.jsx)(er,{icon:L.$aW,role:"button","aria-label":"delete",onClick:t,title:"Delete",size:"lg",disabled:a})]})})}M.ZP.div(s||(s=(0,A.Z)(["\n  height: 40px;\n  border-right: 2px solid #e3e3e3;\n"])));var ei=t(9595),eo=M.ZP.td(c||(c=(0,A.Z)(["\n  float: right;\n"])));(0,M.ZP)(K.G)(l||(l=(0,A.Z)(["\n  color: #000000;\n"])));var es=M.ZP.div(u||(u=(0,A.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"])));function ec(){return(0,W.jsx)("span",{style:{float:"right",paddingRight:"2.7em"},children:"Actions"})}M.ZP.div(d||(d=(0,A.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 6fr;\n"])));var el=(0,H.hU)(function(e){var n,t,r,a=e.team,i=e.selectedServiceAccount,o=e.setSelectedServiceAccount,s=e.teamServiceAccounts,c=e.getTeamServiceAccounts,l=e.alert,u=(0,P.useState)(!1),d=u[0],m=u[1],p=(0,P.useState)(!1),f=p[0],h=p[1],x=(0,P.useState)(!1),b=x[0],v=x[1],g=function(e){return e&&(null==e?void 0:e.status)!=="applied"&&!(null!=e&&e.archived)},j=function(){g(i)||h(!0)},y=(n=(0,C.Z)(O().mark(function e(){var n,t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.yN)(a.id,null==i?void 0:i.id);case 2:if(n=e.sent,(t=(0,S.Z)(n,2))[0],!t[1]){e.next=9;break}return l.show({variant:"danger",content:"Failed to delete service account, please try again."}),e.abrupt("return");case 9:c(a.id);case 10:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),w=function(){g(i)||m(!0)},Z=(t=(0,C.Z)(O().mark(function e(){var n,t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.Gc)(a.id,null==i?void 0:i.id);case 2:n=e.sent,(t=(0,S.Z)(n,2))[0],t[1]&&l.show({variant:"danger",content:"Failed to update secret, please try again."});case 7:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),k=(r=(0,C.Z)(O().mark(function e(n){var t,r,o,s,c,u;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g(i)){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.next=5,(0,_.vM)(a.id,null==i?void 0:i.id);case 5:if(r=e.sent,s=(o=(0,S.Z)(r,2))[0],c=o[1],v(!1),!c){e.next=13;break}return l.show({variant:"danger",content:"Failed to ".concat(n?"download":"copy",", please try again.")}),e.abrupt("return");case 13:s=s||{},u={tokenUrl:"".concat(s["auth-server-url"],"/realms/").concat(s.realm,"/protocol/openid-connect/token"),clientId:"".concat(s.resource),clientSecret:"".concat(null===(t=s.credentials)||void 0===t?void 0:t.secret)},n?(0,ei.Di)((0,ei.ON)(u),"".concat(null==i?void 0:i.clientId,".json")):((0,ei.TE)((0,ei.ON)(u)),l.show({variant:"success",content:"Copied to clipboard",fadeOut:3e3}));case 16:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return(0,W.jsxs)(W.Fragment,{children:[b?(0,W.jsx)(ee.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0}):(0,W.jsx)(N.Z,{headers:[{accessor:"id",Header:"API Account ID"},{accessor:"actions",Header:(0,W.jsx)(ec,{}),disableSortBy:!0}],data:s.map(function(e){return{id:e.id,actions:(0,W.jsx)(eo,{children:(0,W.jsx)(ea,{copyOrDownloadAction:k,showUpdateModal:w,showDeleteModal:j,actionsDisabled:!!g(e)})})}}),colfilters:[],activateRow:function(e){var n=e.cells[0].row.original.id;s.forEach(function(e){e.id==n&&o(e)})},rowSelectorKey:"id"}),(0,W.jsx)(z.Z,{id:"update-service-account-secret-modal",title:"Request a new secret for CSS API Account",onConfirm:Z,openModal:d,handleClose:function(){return m(!1)},content:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(es,{children:(0,W.jsx)("strong",{children:"You are about to request a new secret for CSS API Account"})}),(0,W.jsx)("br",{}),(0,W.jsx)("p",{children:"Once the new secret gets generated, your previous secret will no longer be valid for any applications using it."}),(0,W.jsx)("p",{children:"This means any application using CSS API through this account should be configured with the new secret."})]}),buttonStyle:"custom",confirmText:"Confirm",closable:!0}),(0,W.jsx)(z.Z,{id:"delete-service-account-modal",title:"Delete CSS API Account",icon:null,onConfirm:y,openModal:f,handleClose:function(){return h(!1)},content:(0,W.jsx)(X,{title:"Are you sure that you want to delete this CSS API Account?",content:"Once you delete this CSS PI Account, this action cannot be undone."}),buttonStyle:"danger",confirmText:"Delete",closable:!0})]})}),eu=t(32098),ed=t(9206),em=t(66708),ep=t(18269);function ef(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var eh=M.ZP.div(m||(m=(0,A.Z)(["\n  padding-left: 1rem;\n  ","\n"])),function(e){return"\n  margin-top: ".concat(e.marginTop||"0",";\n  margin-bottom: ").concat(e.marginBottom||"0",";\n  margin-left: ").concat(e.marginLeft||"0",";\n  margin-right: ").concat(e.marginRight||"0",";\n  ")}),ex=M.ZP.td(p||(p=(0,A.Z)(["\n  float: right;\n"]))),eb=(0,M.ZP)(F.Z)(f||(f=(0,A.Z)(["\n  padding: 0 !important;\n  margin: 10px 0 !important;\n"]))),ev=M.ZP.td(h||(h=(0,A.Z)(["\n  text-align: left !important;\n"]))),eg=M.ZP.div(x||(x=(0,A.Z)(["\n  height: var(--field-top-spacing);\n"])));function ej(){return(0,W.jsxs)("span",{children:["Role\xa0",(0,W.jsx)(Q.Z,{title:"",content:'Admin: can manage integrations <span class="strong">and</span> teams. <br> Members: can <span class="strong">only</span> manage integrations.',hide:200})]})}function ey(){return(0,W.jsx)("span",{style:{float:"right",paddingRight:"1.8em"},children:"Actions"})}function ew(){return(0,W.jsx)("span",{style:{float:"right",paddingRight:"0.4em"},children:"Actions"})}var eZ={idirEmail:"",role:"member",pending:!0},eS=function(e){var n=e.onConfirmDelete,t=e.type,r=e.openModal,a=e.handleClose,i={confirmText:"Delete",buttonStyle:"danger",openModal:r,handleClose:void 0===a?function(){}:a},o="",s="";switch(t){case"allow":o="Once they are deleted, they will no longer have access to the team's integrations.",s="Are you sure that you want to delete this team member?",i.onConfirm=n;break;case"notAllowed":o="Before you delete the last team admin, you must assign a new admin.",i.confirmText="Okay",i.buttonStyle="custom"}return(0,W.jsx)(z.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ef(Object(t),!0).forEach(function(n){(0,T.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ef(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({id:"delete-member-modal",title:"Delete Team Member",icon:null,content:(0,W.jsx)(X,{content:o,title:s}),closable:!0},i))},eC=(0,M.ZP)(K.G)(b||(b=(0,A.Z)(["\n  margin-right: 10px;\n  &:hover {\n    cursor: pointer;\n  }\n"]))),ek=function(e){var n=e.status;if(!n)return null;var t=L.RLE,r="black";return"draft"===n?(t=L.Xcf,r="#1a5a96"):"submitted"===n?(t=L.SZw,r="#fcba19"):["prFailed","applyFailed","planFailed"].includes(n)?(t=L.nYk,r="#ff0303"):"applied"===n&&(r="#2e8540",t=L.f8k),(0,W.jsx)(K.G,{icon:t,title:n,style:{color:r}})},eO=function(e){var n,t,r,a=e.pending,i=e.invitationSendTime;if(!i)return null;var o=new Date().getTime()-new Date(i).getTime();return a&&o/864e5>2?(n=L.RLE,t="#ff0303",r="Invitation Expired"):a?(n=L.SZw,t="#fcba19",r="Invitation Sent"):(t="#2e8540",n=L.f8k,r="Active Member"),(0,W.jsx)(K.G,{icon:n,title:r,style:{color:t}})};M.ZP.div(v||(v=(0,A.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  margin-bottom: 1rem;\n"]))),M.ZP.div(g||(g=(0,A.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"])));var eP=M.ZP.div(j||(j=(0,A.Z)(["\n  text-align: center;\n"]))),eE=(0,H.hU)(function(e){var n,t,r,a,i,o,s,c=e.alert,l=e.currentUser,u=e.team,d=e.loadTeams,m=(0,D.useRouter)(),p=(0,P.useState)([]),f=p[0],h=p[1],x=(0,P.useState)([]),b=x[0],v=x[1],g=(0,P.useState)([]),j=g[0],y=g[1],w=(0,P.useState)(null),Z=w[0],k=w[1],E=(0,P.useState)(null),T=E[0],A=E[1],M=(0,P.useState)(null),F=M[0],H=M[1],K=(0,P.useState)([eZ]),$=K[0],V=K[1],X=(0,P.useState)(),Q=X[0],en=X[1],et=(0,P.useState)(!1),er=et[0],ea=et[1],ei=(0,P.useState)(),eo=ei[0],es=ei[1],ec=(0,P.useState)("allow"),ef=ec[0],eE=ec[1],eT=(0,P.useContext)(em.SurveyContext),eA=(0,P.useState)(!1),eD=eA[0],eM=eA[1],eR=(0,P.useState)(!1),eN=eR[0],eF=eR[1],eI=(n=(0,C.Z)(O().mark(function e(n){var t,r,a,i,o,s,c,u,d,m;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ea(!0),e.next=3,Promise.all([(0,_.YY)(n),(0,B.H0)(n)]);case 3:return t=e.sent,a=(r=(0,S.Z)(t,2))[0],i=r[1],s=(o=(0,S.Z)(a,2))[0],c=o[1],d=(u=(0,S.Z)(i,2))[0],m=u[1],c||m?(h([]),H(null),v([])):(h(s),H(s.find(function(e){return e.idirEmail===l.email})),v(d||[])),e.next=12,ez(n);case 12:ea(!1);case 13:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),ez=(t=(0,C.Z)(O().mark(function e(n){var t,r,a;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ea(!0),"admin"!==u.role){e.next=11;break}return e.next=4,(0,_.Sx)(n);case 4:t=e.sent,a=(r=(0,S.Z)(t,2))[0],r[1]?y([]):(y(a),k(a&&a.length>0?a[0]:null)),e.next=13;break;case 11:y([]),k(null);case 13:ea(!1);case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});(0,P.useEffect)(function(){A(null),eI(u.id)},[u.id]),(0,P.useEffect)(function(){Z&&"applied"!==Z.status&&!Z.archived&&A(Z)},[Z]),(0,P.useEffect)(function(){return T&&"applied"!==T.status?(clearInterval(s),s=setInterval((0,C.Z)(O().mark(function e(){var n,t,r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.ZT)(u.id,T.id);case 2:n=e.sent,r=(t=(0,S.Z)(n,2))[0],t[1]?clearInterval(s):A(r);case 7:case"end":return e.stop()}},e)})),5e3)):(ez(u.id),A(null)),function(){s&&clearInterval(s)}},[T]);var eU=function(e){e&&((0,q.Wv)(f,e)?eE("allow"):eE("notAllowed"),es(e),eF(!0))},eB=(r=(0,C.Z)(O().mark(function e(){var n,t,r,a,i;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,U.p)({name:u.name,members:$},l.email),r=(t=(0,S.Z)(n,2))[0],a=t[1],!r){e.next=4;break}return en(a),e.abrupt("return");case 4:return e.next=6,(0,_.yG)({members:$,id:u.id});case 6:if(i=e.sent,!(0,S.Z)(i,2)[1]){e.next=13;break}c.show({variant:"danger",fadeOut:1e4,closable:!0,content:ep.sY.ADD_TEAM_MEMBERS_ERROR}),e.next=18;break;case 13:return e.next=15,eI(u.id);case 15:V([eZ]),window.location.hash="",c.show({variant:"success",fadeOut:1e4,closable:!0,content:ep.sY.ADD_TEAM_MEMBERS_SUCCESS});case 18:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),e_=(a=(0,C.Z)(O().mark(function e(){var n,t,r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!eo||!u.id)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,_.MH)(Number(eo),u.id);case 4:n=e.sent,(0,S.Z)(n,2)[1]?c.show({variant:"danger",fadeOut:1e4,closable:!0,content:ep.sY.DELETE_TEAM_MEMBER_ERROR}):(h(f.filter(function(e){return e.id!==eo})),r=null===(t=f.find(function(e){return e.id===eo}))||void 0===t?void 0:t.idirEmail,c.show({variant:"success",fadeOut:1e4,closable:!0,content:"".concat(r," has successfully been deleted.")}));case 8:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)}),eH=function(e){m.push({pathname:"/my-dashboard/integrations",query:{integr:e}})},eG=(i=(0,C.Z)(O().mark(function e(n){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,_.rU)(n,u.id);case 4:t=e.sent,(0,S.Z)(t,2)[1]?c.show({variant:"danger",fadeOut:1e4,closable:!0,content:"Failed to resend invitation."}):c.show({variant:"success",fadeOut:1e4,closable:!0,content:"Sent new invitation for team member ".concat(n.idirEmail)});case 8:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),eK=(o=(0,C.Z)(O().mark(function e(n,t){var r,a,i;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.zZ)(u.id,n,{role:t});case 2:if(r=e.sent,i=(a=(0,S.Z)(r,2))[0],!a[1]){e.next=9;break}return c.show({variant:"danger",content:"Failed to update user role. Please try again."}),e.abrupt("return");case 9:h(f.map(function(e){return e.id===n?i:e})),c.show({variant:"success",fadeOut:1e4,closable:!0,content:"Member role updated successfully"});case 12:case"end":return e.stop()}},e)})),function(e,n){return o.apply(this,arguments)});if(!u||!F)return null;var eL="admin"===F.role;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("h2",{children:"Team Details"}),(0,W.jsxs)(R.mQ,{defaultActiveKey:"members",tabBarGutter:30,children:[(0,W.jsx)(R.OK,{tab:"Members",children:(0,W.jsxs)(eh,{children:[eL?(0,W.jsx)(eb,{children:(0,W.jsx)(R.zx,{onClick:function(){return eM(!0)},"data-testid":"add-new-team-member",children:"+ Add New Team Members"})}):(0,W.jsx)("br",{}),(0,W.jsx)(G.Z,{type:"text",rows:7,ready:!er,style:{marginTop:"20px"},children:(0,W.jsx)(N.Z,{"data-testid":"team-members-table",variant:"medium",headers:[{accessor:"status",Header:"Invite Status",disableSortBy:!0},{accessor:"idirEmail",Header:"Email"},{accessor:"role",Header:(0,W.jsx)(ej,{}),disableSortBy:!0},{accessor:"actions",Header:(0,W.jsx)(ew,{}),disableSortBy:!0}],data:f.map(function(e){var n=eL&&F.id!==e.id;return{status:(0,W.jsx)(eO,{pending:e.pending,invitationSendTime:e.createdAt}),idirEmail:e.idirEmail,role:n&&!e.pending?(0,W.jsxs)(I.default,{onChange:function(n){return eK(e.id,n.target.value)},value:e.role,children:[(0,W.jsx)("option",{value:"member",children:"Member"}),(0,W.jsx)("option",{value:"admin",children:"Admin"})]}):(0,q.kC)(e.role),actions:(0,W.jsxs)(ex,{children:[n&&e.pending&&(0,W.jsx)(eC,{icon:L.zBy,size:"lg",onClick:function(){return eG(e)},title:"Resend Invitation",style:{marginRight:"6px"},"data-testid":"resend-invitation"}),n&&(0,W.jsx)(eC,{icon:L.$aW,onClick:function(){return eU(e.id)},size:"lg",title:"Delete User",style:{marginRight:"16px"},"data-testid":"delete-member"})]})}}),colfilters:[],rowSelectorKey:"status",readOnly:!0})})]})},"members"),(0,W.jsx)(R.OK,{tab:"Integrations",children:(0,W.jsx)(eh,{marginTop:"20px",children:(0,W.jsx)(G.Z,{type:"text",rows:7,ready:!er,style:{marginTop:"20px"},children:(0,W.jsx)(N.Z,{variant:"medium",headers:[{accessor:"status",Header:"Status",disableSortBy:!0},{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"actions",Header:(0,W.jsx)(ey,{}),disableSortBy:!0}],data:(null==b?void 0:b.length)>0?null==b?void 0:b.map(function(e){return{status:(0,W.jsx)(ek,{status:null==e?void 0:e.status}),id:e.id,projectName:e.projectName,actions:(0,W.jsx)(ex,{children:(0,W.jsx)(Y.ZP,{request:e,onDelete:function(){d(),eI(null==u?void 0:u.id)},children:(0,W.jsx)(Y.Kk,{icon:L.Mdf,"aria-label":"view",onClick:function(){return eH(e.id)},size:"lg"})})})}}):[],readOnly:!0,colfilters:[],rowSelectorKey:"status",noDataFoundElement:(0,W.jsxs)(ev,{colSpan:5,children:[(0,W.jsx)("br",{}),"There are no integrations for this team yet.",(0,W.jsx)("br",{}),(0,W.jsx)("br",{}),"To add this team to an ",(0,W.jsx)("span",{className:"strong",children:"existing integration"}),":",(0,W.jsx)("span",{className:"line-height-200"}),(0,W.jsxs)("ol",{children:[(0,W.jsxs)("li",{children:["Go to your"," ",(0,W.jsx)("span",{className:"text-blue",children:(0,W.jsx)("span",{className:"strong",children:"Projects"})})," ","tab"]}),(0,W.jsx)("li",{children:"Select the “pencil” icon to edit the integration"}),(0,W.jsx)("li",{children:"Select this team from the “Project Team” drop down"})]}),(0,W.jsx)("br",{}),"To add this team to a ",(0,W.jsx)("span",{className:"strong",children:"new integration"}),":",(0,W.jsx)("span",{className:"line-height-200"}),(0,W.jsxs)("ol",{children:[(0,W.jsxs)("li",{children:["Go to your"," ",(0,W.jsx)("span",{className:"text-blue",children:(0,W.jsx)("span",{className:"strong",children:"Projects"})})," ","tab"]}),(0,W.jsx)("li",{children:"Select “+ Request SSO Integration”"}),(0,W.jsx)("li",{children:"Select “Yes” to allow multiple team members to manage the integration"}),(0,W.jsx)("li",{children:"Select this team from the “Project Team” drop down"})]})]})})})})},"integrations"),eL&&(0,W.jsx)(R.OK,{tab:"CSS API Account",children:(0,W.jsx)(eh,{marginTop:"10px",children:er?(0,W.jsxs)(eP,{children:[(0,W.jsx)(eg,{}),(0,W.jsx)(ee.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,W.jsxs)(J.ZP,{cols:10,children:[(0,W.jsxs)(J.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,W.jsx)(J.ZP.Col,{span:4,children:j.length>0?(0,W.jsx)(el,{team:u,selectedServiceAccount:Z,setSelectedServiceAccount:k,teamServiceAccounts:j,getTeamServiceAccounts:ez}):(0,W.jsx)(R.zx,{style:{marginBottom:10},onClick:(0,C.Z)(O().mark(function e(){var n,t,r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ea(!0),e.next=3,(0,_.rl)(u.id);case 3:n=e.sent,(t=(0,S.Z)(n,2))[0],(r=t[1])?(ea(!1),c.show({variant:"danger",fadeOut:1e4,closable:!0,content:r})):(null==eT||eT.setShowSurvey(!0,"cssApiRequest"),ez(u.id));case 8:case"end":return e.stop()}},e)})),children:"+ Request CSS API Account"})}),(0,W.jsx)(J.ZP.Col,{span:6,children:T&&(0,W.jsx)("div",{style:{display:"inline-flex",margin:"20px 0 20px 0",background:"#FFCCCB",borderRadius:"5px"},children:(0,W.jsx)("div",{style:{padding:5},children:(0,W.jsxs)(eu.B,{children:["Your request for an API account could not be completed. Please"," ",(0,W.jsx)(ed.rU,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})})})]}),j.length>0&&(0,W.jsx)(J.ZP.Row,{children:(0,W.jsxs)(eu.$,{children:["For more information on how to use the CSS API Account with your integrations,"," ",(0,W.jsx)(ed.rU,{href:"".concat(ep.UN,"/integrating-your-application/css-app-api"),external:!0,children:"click to learn more on our wiki page"}),"."]})})]})})},"service-accounts")]}),(0,W.jsx)(z.Z,{id:"add-member-modal",openModal:eD,handleClose:function(){en(null),V([eZ]),eM(!1)},title:"Add a New Team Member",icon:null,content:(0,W.jsx)(U.Z,{members:$,setMembers:V,allowDelete:eL,errors:Q,currentUser:l}),onConfirm:eB,buttonStyle:"custom",skipCloseOnConfirm:!0,closable:!0}),(0,W.jsx)(eS,{onConfirmDelete:e_,type:ef,openModal:eN,handleClose:function(){return eF(!1)}})]})}),eT=t(92109),eA=t(11915),eD=t(65363),eM=M.ZP.div(y||(y=(0,A.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"])));function eR(e){var n,t=e.onSubmit,r=e.teamId,a=e.initialTeamName,i=e.setOpenEditTeamModal,o=(0,P.useState)(""),s=o[0],c=o[1],l=(0,P.useState)(!1),u=l[0],d=l[1],m=(0,P.useState)(),p=m[0],f=m[1],h=(0,P.useState)(!1),x=h[0],b=h[1];(0,P.useEffect)(function(){c(a)},[a]);var v=function(e){var n={members:[]},t=!1;return(e.name.trim()||(n.name="Please enter a name",t=!0),t)?n:(f(void 0),null)},g=(n=(0,C.Z)(O().mark(function e(){var n,a,o;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!1),!(a=v(n={name:s.trim(),id:r}))){e.next=5;break}return e.abrupt("return",f(a));case 5:return d(!0),e.next=8,(0,_.w2)(n);case 8:if(o=e.sent,!(0,S.Z)(o,2)[1]){e.next=15;break}return b(!0),d(!1),e.abrupt("return");case 15:return e.next=17,t();case 17:d(!1),i(!1);case 19:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,W.jsxs)("div",{children:[(0,W.jsx)(eA.default,{label:"New Team Name",onChange:function(e){c(e.target.value)},value:s,"data-testid":"edit-name"}),p&&p.name&&(0,W.jsx)(eD.Z,{children:null==p?void 0:p.name}),x&&(0,W.jsx)(eD.Z,{children:"Failed to update team name"}),(0,W.jsx)("br",{}),(0,W.jsxs)(eM,{children:[(0,W.jsx)(R.zx,{variant:"secondary",onClick:function(){c(a),i(!1)},style:{marginRight:"20px"},"data-testid":"cancel-edit-name",children:"Cancel"}),(0,W.jsx)(R.zx,{type:"button",onClick:g,"data-testid":"save-edit-name",children:u?(0,W.jsx)(ee.rj,{color:"#FFF",height:18,width:50,visible:u}):"Save"})]})]})}var eN=t(5845),eF=t(30274),eI=t(34798),ez=t.n(eI);function eU(e){var n=e.team,t=e.showEditTeamNameModal,r=e.showDeleteModal,a=(0,eF.te)(n),i=(0,eF.VV)(n);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(Y.c4,{children:[(0,W.jsx)(Y.Kk,{disabled:!i,icon:L.Xcf,role:"button","aria-label":"edit",title:"Edit",size:"lg",onClick:function(){return i?t(n):ez()},"data-testid":"edit-team-button"}),(0,W.jsx)(Y.Kk,{disabled:!a,icon:L.$aW,role:"button","aria-label":"delete",title:"Delete",size:"lg",onClick:function(){return a?r(n):ez()},style:{marginLeft:"7px"},"data-testid":"delete-team-button"})]})})}var eB=t(24791),e_=M.ZP.tr(w||(w=(0,A.Z)(["\n  float: right;\n  padding-right: 0.5em;\n"])));function eH(){return(0,W.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var eG=(0,M.ZP)(R.zx)(Z||(Z=(0,A.Z)(["\n  &&& {\n    margin: 0;\n  }\n"]))),eK=function(e){var n=e.handleNewTeamClick;return(0,W.jsx)(eG,{size:"large",onClick:n,variant:"callout",children:"+ Create a New Team"})},eL=(0,H.hU)(function(e){var n,t,r,a,i=e.currentUser,o=e.setTeam,s=e.loading,c=e.teams,l=e.loadTeams,u=e.hasError,d=e.alert,m=(0,P.useState)(null),p=m[0],f=m[1],h=(0,P.useState)(void 0),x=h[0],b=h[1],v=(0,P.useState)([]),g=v[0],j=v[1],y=(0,P.useState)(!1),w=y[0],Z=y[1],k=(0,P.useState)(!1),E=k[0],T=k[1],A=(0,P.useState)(!1),D=A[0],M=A[1],R=(0,P.useState)(!1),F=R[0],I=R[1],U=(0,P.useState)(!1),B=U[0],H=U[1],G=(n=(0,C.Z)(O().mark(function e(n){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f(n),b(null==n?void 0:n.id),o(n),!n){e.next=7;break}return e.next=6,K(n.id);case 6:H(p&&0===Number(p.integrationCount)||!1);case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),K=(t=(0,C.Z)(O().mark(function e(n){var t,r,a;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==p?void 0:p.role)!=="admin"){e.next=13;break}return e.next=3,(0,_.Sx)(n);case 3:if(t=e.sent,a=(r=(0,S.Z)(t,2))[0],!r[1]){e.next=10;break}return d.show({variant:"danger",content:"Failed to load service accounts for team. Please refresh."}),e.abrupt("return");case 10:j(a),e.next=14;break;case 13:j([]);case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});(0,P.useEffect)(function(){(null==c?void 0:c.length)>0?x&&c.find(function(e){return e.id===x})||G(c[0]):G(null)},[c]);var L=(r=(0,C.Z)(O().mark(function e(){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(!0));case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),q=function(e){Z(!1),G(e),x===e.id&&I(!0)},Y=function(e){G(e),M(!0)},$=u?(0,W.jsx)(eB.q1,{}):c&&(null==c?void 0:c.length)!==0?(0,W.jsx)(N.Z,{headers:[{accessor:"name",Header:"Team Name"},{accessor:"actions",Header:(0,W.jsx)(eH,{}),disableSortBy:!0}],data:c&&c.map(function(e){return{teamId:e.id,name:e.name,actions:(0,W.jsx)(e_,{children:(0,W.jsx)(eU,{team:e,showEditTeamNameModal:Y,showDeleteModal:q})})}}),activateRow:function(e){var n=e.cells[0].row.original.teamId;c.forEach(function(e){e.id==n&&G(e)})},rowSelectorKey:"teamId",activeSelector:x,colfilters:[]}):(0,W.jsx)(eB.Vs,{message:"You have not been added to any teams yet."}),V=(a=(0,C.Z)(O().mark(function e(){var n,t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Z(!1),B){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,_.fC)(x);case 5:n=e.sent,(t=(0,S.Z)(n,2))[0],t[1]?Z(!0):l();case 10:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)});return s?(0,W.jsx)(eN.Z,{}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("br",{}),(0,W.jsx)(eK,{handleNewTeamClick:L}),(0,W.jsx)("br",{}),(0,W.jsx)("br",{}),$,(0,W.jsx)(z.Z,{id:ep.zw,title:"Create a New Team",icon:null,onConfirm:function(){return console.log("confirm")},content:(0,W.jsx)(eT.Z,{onSubmit:l,currentUser:i,setOpenCreateTeamModal:T}),showCancel:!1,showConfirm:!1,openModal:E,handleClose:function(){return T(!1)},closable:!0}),(0,W.jsx)(z.Z,{id:ep.HW,title:"Edit Team Name",icon:null,onConfirm:function(){return console.log("confirm")},content:(0,W.jsx)(eR,{onSubmit:l,teamId:x,initialTeamName:(null==p?void 0:p.name)||"",setOpenEditTeamModal:M}),showCancel:!1,showConfirm:!1,openModal:D,handleClose:function(){return M(!1)},closable:!0}),(0,W.jsx)(z.Z,{id:ep.aS,title:"Delete team",icon:null,onConfirm:V,content:(0,W.jsxs)("div",{children:[(0,W.jsx)(X,{title:"Are you sure that you want to delete this team?",content:B?"Once you delete this team, this action cannot be undone.":"Before you delete this team, you will need to delete the integration(s) the team is responsible for.",note:B&&g.length>0?"*By deleting this team, you are also deleting the CSS App API Account that belongs to this team.":""}),w&&(0,W.jsx)(eD.Z,{children:"Failed to delete. Please try again"})]}),buttonStyle:B?"danger":"custom",confirmText:B?"Delete Team":"Okay",openModal:F,handleClose:function(){return I(!1)},closable:!0})]})}),eq=function(e){var n,t=e.session,r=(0,P.useState)(!0),a=r[0],i=r[1],o=(0,P.useState)(!1),s=o[0],c=o[1],l=(0,P.useState)(null),u=l[0],d=l[1],m=(0,P.useState)([]),p=m[0],f=m[1],h=(n=(0,C.Z)(O().mark(function e(){var n,t,r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,(0,_.Dc)();case 3:n=e.sent,r=(t=(0,S.Z)(n,2))[0],c(!!t[1]),f(r||[]),i(!1);case 10:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,P.useEffect)(function(){h()},[]),(0,W.jsx)(E.Z,{tab:"teams",leftPanel:function(){return(0,W.jsx)(eL,{currentUser:t,setTeam:d,loading:a,teams:p,loadTeams:h,hasError:s})},rightPanel:function(){return u&&(0,W.jsx)(eE,{team:u,currentUser:t,loadTeams:h})}})}},9595:function(e,n,t){"use strict";t.d(n,{Di:function(){return i},ON:function(){return r},TE:function(){return a}});var r=function(e){return JSON.stringify(e,void 0,2)},a=function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{return document.execCommand("copy"),document.body.removeChild(n),!0}catch(e){return document.body.removeChild(n),!1}},i=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:t})),a=document.createElement("a");a.href=r,a.setAttribute("download",n),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},69137:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/teams",function(){return t(44196)}])},35685:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var r=t(2717),a=t(67294),i=t(28648),o=t(65342),s=t(28549),c=t(33417),l=t(70292),u=t(30138),d=t(17609),m=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];t(73935),t(73469);var p=(0,a.forwardRef)(function(e,n){var t,p,f,h,x,b,v,g,j,y,w,Z,S,C,k,O,P,E,T,A,D,M,R,N,F,I,z,U,B,_,H,G,K,L,q,Y,W,$,V,X,Q,J,ee,en,et,er,ea,ei,eo,es,ec=(p=void 0!==(t=e.defaultOptions)&&t,h=void 0!==(f=e.cacheOptions)&&f,x=e.loadOptions,e.options,b=e.isLoading,v=e.onInputChange,g=e.filterOption,y=(j=(0,u.Z)(e,m)).inputValue,w=(0,a.useRef)(void 0),Z=(0,a.useRef)(!1),S=(0,a.useState)(Array.isArray(p)?p:void 0),k=(C=(0,l.Z)(S,2))[0],O=C[1],P=(0,a.useState)(void 0!==y?y:""),T=(E=(0,l.Z)(P,2))[0],A=E[1],D=(0,a.useState)(!0===p),R=(M=(0,l.Z)(D,2))[0],N=M[1],F=(0,a.useState)(void 0),z=(I=(0,l.Z)(F,2))[0],U=I[1],B=(0,a.useState)([]),H=(_=(0,l.Z)(B,2))[0],G=_[1],K=(0,a.useState)(!1),q=(L=(0,l.Z)(K,2))[0],Y=L[1],W=(0,a.useState)({}),V=($=(0,l.Z)(W,2))[0],X=$[1],Q=(0,a.useState)(void 0),ee=(J=(0,l.Z)(Q,2))[0],en=J[1],et=(0,a.useState)(void 0),ea=(er=(0,l.Z)(et,2))[0],ei=er[1],h!==ea&&(X({}),ei(h)),p!==ee&&(O(Array.isArray(p)?p:void 0),en(p)),(0,a.useEffect)(function(){return Z.current=!0,function(){Z.current=!1}},[]),eo=(0,a.useCallback)(function(e,n){if(!x)return n();var t=x(e,n);t&&"function"==typeof t.then&&t.then(n,function(){return n()})},[x]),(0,a.useEffect)(function(){!0===p&&eo(T,function(e){Z.current&&(O(e||[]),N(!!w.current))})},[]),es=(0,a.useCallback)(function(e,n){var t=(0,d.L)(e,n,v);if(!t){w.current=void 0,A(""),U(""),G([]),N(!1),Y(!1);return}if(h&&V[t])A(t),U(t),G(V[t]),N(!1),Y(!1);else{var r=w.current={};A(t),N(!0),Y(!z),eo(t,function(e){Z&&r===w.current&&(w.current=void 0,N(!1),U(t),G(e||[]),Y(!1),X(e?(0,c.Z)((0,c.Z)({},V),{},(0,s.Z)({},t,e)):V))})}},[h,eo,z,V,v]),(0,c.Z)((0,c.Z)({},j),{},{options:q?[]:T&&z?H:k||[],isLoading:R||void 0!==b&&b,onInputChange:es,filterOption:void 0===g?null:g})),el=(0,o.u)(ec);return a.createElement(i.S,(0,r.Z)({ref:n},el))})}},function(e){e.O(0,[925,936,620,912,291,774,888,179],function(){return e(e.s=69137)}),_N_E=e.O()}]);