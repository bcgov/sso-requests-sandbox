(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{96270:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r,a=t(71383);t(67294);var i=t(71893),s=t(58766),o=t(85893),c=i.ZP.div(r||(r=(0,a.Z)(["\n  margin-top: 20px;\n  max-height: calc(100vh - 250px);\n  overflow: auto;\n"])));function l(e){var n=e.events;return(0,o.jsx)(c,{children:n&&0!==n.length?n.map(function(e){var n;return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Event Code: "}),e.eventCode]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Created Time: "}),(n=e.createdAt,new Date(n).toLocaleString())]}),e.idirUserDisplayName&&(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Created By: "}),e.idirUserDisplayName]})}),e.details&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:"Details"})}),"request-update-success"===e.eventCode?(0,o.jsxs)(o.Fragment,{children:[(0,s.Sx)(e.details.changes),(0,o.jsx)("strong",{children:"Comment: "}),(0,o.jsx)("p",{children:e.details.comment})]}):(0,o.jsx)("pre",{children:(0,o.jsx)("code",{children:JSON.stringify(e.details||{},void 0,2)})})]}),(0,o.jsx)("hr",{})]},e.id)}):(0,o.jsx)("div",{children:"No events found"})})}},4602:function(e,n,t){"use strict";t.d(n,{S:function(){return r}});var r={idir:"IDIR",azureidir:"IDIR - MFA",bceidbasic:"Basic BCeID",bceidbusiness:"Business BCeID",bceidboth:"Basic or Business BCeID",githubbcgov:"GitHub BC Gov",githubpublic:"GitHub",digitalcredential:"Digital Credential",bcservicescard:"BC Services Card"}},62325:function(e,n,t){"use strict";var r=t(83024),a=t(12183),i={shared:{button:"\n      border-radius: 0.222em;\n      border-width: 0;\n      padding: 0.6em 1.1em;\n      text-align: center;\n      text-decoration: none;\n      font-weight: 700;\n      letter-spacing: 1px;\n      display: inline-block;\n      cursor: pointer;\n      box-shadow: 0px 0px 0px 2px transparent inset, 0px 0em 0px 0px rgba(34, 36, 38, 0.15) inset;\n    "},size:{xsmall:{button:"\n        font-size: 0.7rem;\n      "},small:{button:"\n        font-size: 0.8rem;\n      "},medium:{button:"\n        font-size: ".concat(a.n5,";\n      ")},large:{button:"\n        font-size: ".concat(a.zA,";\n      ")}},variant:{primary:{button:"\n        background-color: #D5EDFF;\n        box-shadow: 0px 0px 0px 2px #D5EDFF inset !important;\n        color: #3E3E3E;\n\n        &:hover {\n          text-decoration: underline;\n          background-color: #FFF7D5;\n          box-shadow: 0px 0px 0px 2px #FFF7D5 inset !important;\n          opacity: 0.80;\n        }\n\n        &:active {\n          opacity: 1;\n        }\n      "},grey:{button:"\n        background-color: #B2B2B2;\n        box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        color: #F8F8F8;\n        min-width: 110px;\n\n        &:hover {\n          background-color: ".concat(a.TU,";\n          box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        }\n      ")}}},s=(0,r.applyTheme)(i,{defaultProps:{variant:"primary",size:"medium"},breakProps:[],staticProps:["fullHeight","fullWidth"]});n.Z=s},35927:function(e,n,t){"use strict";t.d(n,{F:function(){return r}});var r={"browser-login":"Browser Login","service-account":"Service Account",both:"Browser Login & Service Account"}},49936:function(e,n,t){"use strict";var r,a=t(71383);t(67294);var i=t(11163),s=t(46312),o=t(71893),c=t(85330),l=t(4256),u=t(22280),d=t(85893),p=o.ZP.div(r||(r=(0,a.Z)(["\n  height: 100%;\n  overflow: auto;\n"])));n.Z=function(e){var n=e.tab,t=e.leftPanel,r=e.rightPanel,a=e.showResizable;e.children;var o=(0,i.useRouter)(),h=(0,d.jsxs)(c.mQ,{onChange:function(e){o.replace("/my-dashboard/".concat(e))},activeKey:n,tabBarGutter:30,children:[(0,d.jsx)(c.OK,{tab:"My Projects"},"integrations"),(0,d.jsx)(c.OK,{tab:"My Teams"},"teams")]});return(0,d.jsxs)(l.Z,{rules:u.F,children:[h,void 0===a||a?(0,d.jsx)(s.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,d.jsx)(p,{children:t&&t()})}):t&&t(),(0,d.jsx)("br",{}),r&&r()]})}},74887:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ay}});var r,a,i,s,o,c,l,u,d,p,h,f,x,v,m,g,b,j,y,w,Z,k,P,S,C,I,D,O,N,F,R,E,T,B,A,z,G,U,q,L,M,K,H,V,_,W,Y,J,$,Q,X,ee,en,et,er,ea,ei,es,eo,ec,el,eu,ed,ep,eh,ef,ex,ev,em,eg,eb,ej,ey,ew,eZ,ek,eP,eS,eC,eI,eD,eO=t(50029),eN=t(71383),eF=t(87794),eR=t.n(eF),eE=t(67294),eT=t(71893),eB=t(59499),eA=t(16530),ez=t(69829),eG=t(85893);function eU(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eq(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eU(Object(t),!0).forEach(function(n){(0,eB.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eU(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eL=(0,eA.applyTheme)({shared:{container:"\n      line-height: 1.5em;\n      border: 1px solid transparent;\n      border-radius: 0.2222em;\n      padding: 1em 0.5em;\n\n      & a {\n        text-decoration: underline;\n      }\n\n      & .pg-notification-content>svg {\n        overflow: initial;\n      }\n    ",close:"\n      cursor: pointer !important;\n      text-align: center;\n      text-decoration: none;\n      border-radius: 0.2222em;\n      padding: 0.4em 0.5em;\n      margin-right: 20px;\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},variant:{success:{container:"\n        background-color: #dff0d8;\n        border-color: #d6e9c6;\n        color: #2d4821;\n\n        & a {\n          color: #2b542c;\n        }\n      ",content:"\n        color: #2d4821;\n      ",close:"\n        color: #2d4821;\n        border: 1px solid #2d4821;\n\n        &:hover {\n          background: #2d4821;\n          color: #fff;\n        }\n      ",group:"\n        color: #2d4821;\n      "},info:{container:"\n        background-color: #d9eaf7;\n        border-color: #afd3ee;\n        color: #313132;\n\n        & a {\n          color: #1a5a96;\n        }\n      ",content:"\n        color: #313132;\n      ",close:"\n        color: #313132;\n        border: 1px solid #313132;\n\n        &:hover {\n          background: #313132;\n          color: #fff;\n        }\n      ",group:"\n        color: #313132;\n      "},warning:{container:"\n        background-color: #f9f1c6;\n        border-color: #faebcc;\n        color: #6c4a00;\n\n        & a {\n          color: #66512c;\n        }\n      ",content:"\n        color: #66512c;\n      ",close:"\n        color: #66512c;\n        border: 1px solid #66512c;\n\n        &:hover {\n          background: #66512c;\n          color: #fff;\n        }\n      ",group:"\n        color: #66512c;\n      "},danger:{container:"\n        background-color: #f2dede;\n        border-color: #ebccd1;\n        color: #a12622;\n\n        & a {\n          color: #843534;\n        }\n      ",content:"\n        color: #a12622;\n      ",close:"\n        color: #a12622;\n        border: 1px solid #a12622;\n\n        &:hover {\n          background: #a12622;\n          color: #fff;\n        }\n      ",group:"\n        color: #a12622;\n      "}},flex:{container:"\n      display: flex;\n    ",group:"\n      margin: auto 0.5rem;\n    "}},{defaultProps:{variant:"info",size:"medium",flex:!0},staticProps:[]},{group:{align:{left:"\n        margin-right: auto;\n    ",right:"\n        margin-left: auto;\n    "}}}),eM=function(e){switch(e){case"success":return ez.CheckCircle;case"info":return ez.InfoCircle;case"warning":return ez.ExclamationTriangle;default:return ez.ExclamationCircle}};function eK(e){return(0,eG.jsxs)(eL,eq(eq({},e),{},{children:[(0,eG.jsx)(eL.Group,{style:{marginTop:"1px"},children:(0,eG.jsx)(ez.FaSVG,{children:(0,eG.jsx)("path",{fill:"currentColor",d:eM(e.variant)})})}),(0,eG.jsx)(eL.Content,{children:e.content?e.content:e.children}),e.closable&&(0,eG.jsx)(eL.Group,{align:"right",children:(0,eG.jsx)(eL.Close,{children:"x"})})]}))}var eH=t(16835),eV=t(99603),e_=t(59417),eW=t(64735),eY=t(42894),eJ=t(10433),e$=(r=(0,eO.Z)(eR().mark(function e(n,t){var r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eJ.e.post("installation",{requestId:n,environment:t}).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return r.apply(this,arguments)}),eQ=(a=(0,eO.Z)(eR().mark(function e(n,t){var r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eJ.e.put("installation",{requestId:n,environment:t}).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return a.apply(this,arguments)}),eX=(i=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,s,o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.idp,a=n.property,i=n.searchKey,s=n.integrationId,e.prev=1,e.next=4,eJ.e.post("keycloak/users",{environment:t,idp:r,property:a,searchKey:i,integrationId:s}).then(function(e){return e.data});case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return i.apply(this,arguments)}),e0=(s=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,s;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=void 0===(a=n.search)?"":a,e.prev=1,e.next=4,eJ.e.post("keycloak/roles",{environment:t,integrationId:r,search:i}).then(function(e){return e.data});case 4:return s=e.sent,e.abrupt("return",[s,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return s.apply(this,arguments)}),e1=(o=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,s;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,a=n.roleName,i=n.compositeRoleNames,e.prev=1,e.next=4,eJ.e.post("keycloak/set-composite-roles",{environment:t,integrationId:r,roleName:a,compositeRoleNames:i}).then(function(e){return e.data});case 4:return s=e.sent,e.abrupt("return",[s,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return o.apply(this,arguments)}),e2=(c=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,a=n.roleName,e.prev=1,e.next=4,eJ.e.post("keycloak/get-composite-roles",{environment:t,integrationId:r,roleName:a}).then(function(e){return e.data});case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return c.apply(this,arguments)}),e3=(l=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,s,o,c,l;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,a=n.username,s=void 0===(i=n.first)?0:i,c=void 0===(o=n.max)?50:o,e.prev=1,e.next=4,eJ.e.post("keycloak/user-roles",{environment:t,integrationId:r,username:a,first:s,max:c}).then(function(e){return e.data});case 4:return l=e.sent,e.abrupt("return",[l,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return l.apply(this,arguments)}),e5=(u=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,s,o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,a=n.username,i=n.roleName,s=n.mode,e.prev=1,e.next=4,eJ.e.put("keycloak/user-role",{environment:t,integrationId:r,username:a,roleName:i,mode:s}).then(function(e){return e.data});case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return u.apply(this,arguments)}),e4=(d=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,s;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,a=n.username,i=n.roleNames,e.prev=1,e.next=4,eJ.e.put("keycloak/user-roles",{environment:t,integrationId:r,username:a,roleNames:i}).then(function(e){return e.data});case 4:return s=e.sent,e.abrupt("return",[s,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return d.apply(this,arguments)}),e8=(p=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,s,o,c,l;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,a=n.roleName,s=void 0===(i=n.first)?0:i,c=void 0===(o=n.max)?50:o,e.prev=1,e.next=4,eJ.e.post("keycloak/role-users",{environment:t,integrationId:r,roleName:a,first:s,max:c}).then(function(e){return e.data});case 4:return l=e.sent,e.abrupt("return",[l,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return p.apply(this,arguments)}),e7=(h=(0,eO.Z)(eR().mark(function e(n){var t,r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.integrationId,r=n.roles,e.prev=1,e.next=4,eJ.e.post("keycloak/bulk-roles",{integrationId:t,roles:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return h.apply(this,arguments)}),e6=(f=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,a=n.roleName,e.prev=1,e.next=4,eJ.e.post("keycloak/delete-role",{environment:t,integrationId:r,roleName:a}).then(function(e){return e.data});case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return f.apply(this,arguments)}),e9=t(62325),ne=t(9595),nn=t(58766),nt=t(12183),nr=t(36063),na=t(32098),ni=t(4602),ns=t(74150),no=t(18269),nc=eT.ZP.div(b||(b=(0,eN.Z)(["\n  text-align: center;\n"]))),nl=eT.ZP.div(j||(j=(0,eN.Z)(["\n  color: #000;\n  font-size: ",";\n  font-weight: bold;\n"])),nt.n5),nu=eT.ZP.span(y||(y=(0,eN.Z)(["\n  color: #3e3e3e;\n  font-size: 14px;\n  font-weight: 700;\n"]))),nd=eT.ZP.div(w||(w=(0,eN.Z)(["\n  height: var(--field-top-spacing);\n"]))),np=eT.ZP.div(Z||(Z=(0,eN.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),nh=(0,nr.hU)(function(e){var n,t,r,a=e.integration,i=e.alert,s=(0,eE.useState)(!1),o=s[0],c=s[1],l=(n=(0,eO.Z)(eR().mark(function e(n){var t,r,s,o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,e$(a.id,n);case 3:if(t=e.sent,s=(r=(0,eH.Z)(t,2))[0],o=r[1],c(!1),!o){e.next=11;break}return i.show({variant:"danger",content:"Failed to download installation"}),e.abrupt("return",null);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),u=(t=(0,eO.Z)(eR().mark(function e(n){var t;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:(t=e.sent)&&(0,ne.TE)((0,ne.ON)(t));case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),d=(r=(0,eO.Z)(eR().mark(function e(n){var t;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:(t=e.sent)&&(0,ne.Di)((0,ne.ON)(t),"".concat(a.projectName,"-installation-").concat(n,".json"));case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return o?(0,eG.jsxs)(nc,{children:[(0,eG.jsx)(nd,{}),(0,eG.jsx)(eY.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(nd,{}),(0,eG.jsx)(np,{children:"Installation JSONs"}),(0,eG.jsx)("br",{}),(0,eG.jsx)(eW.ZP,{cols:3,children:(0,nn.Dy)(a).map(function(e){if("service-account"!==a.authType&&0===e.idps.length)return null;var n=e.idps.length>0?"(".concat(e.idps.map(function(e){return ni.S[e]}).join(", "),")"):"";return(0,eG.jsxs)(eE.Fragment,{children:[(0,eG.jsx)(eW.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,eG.jsx)(eW.ZP.Col,{span:1,style:{width:"100%",height:"30px"},children:(0,eG.jsxs)(nl,{children:[e.display," ",n]})})}),(0,eG.jsx)(eW.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,eG.jsxs)(eW.ZP.Col,{span:3,children:[(0,eG.jsx)(e9.Z,{size:"medium",variant:"grey",onClick:function(){return u(e.name)},children:"Copy"}),"\xa0",(0,eG.jsx)(e9.Z,{size:"medium",variant:"grey",onClick:function(){return d(e.name)},children:"Download"}),"\xa0\xa0",(0,eG.jsx)(eV.G,{color:"green",icon:e_.f8k,title:"Ready"}),"\xa0",(0,eG.jsx)(nu,{children:"Ready"})]})}),(0,eG.jsx)("br",{})]},e.name)})}),(0,eG.jsxs)(na.$,{children:["For more information on how to use these details, or for the public endpoints associated to your client,"," ",(0,eG.jsx)(ns.default,{href:"".concat(no.UN,"/integrating-your-application/installation-json"),external:!0,children:"click to learn more on our wiki page"}),"."]})]})}),nf=t(4826),nx=t(90575),nv=eT.ZP.div(k||(k=(0,eN.Z)(["\n  height: var(--field-top-spacing);\n"]))),nm=eT.ZP.span(P||(P=(0,eN.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"])));(0,eT.ZP)(eV.G)(S||(S=(0,eN.Z)(["\n  margin-right: 20px;\n"])));var ng=eT.ZP.div(C||(C=(0,eN.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"])));eT.ZP.hr(I||(I=(0,eN.Z)(["\n  background-color: black;\n"])));var nb=(0,nr.hU)(function(e){var n,t=e.selectedRequest,r=e.alert,a=(0,eE.useState)(null),i=a[0],s=a[1],o=(0,nn.Dy)(t),c=function(e){s(e),window.location.hash="confirm-new-secret"},l=(n=(0,eO.Z)(eR().mark(function e(){var n,a,s,o,c,l;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eQ(t.id,(null==i?void 0:i.name)||null);case 2:n=e.sent,s=(a=(0,eH.Z)(n,2))[0],c=(o=a[1])?"danger":"success",l=o?"Failed to regenerate secret":"Client Secret Successfully Updated",r.show({variant:c,fadeOut:1e4,closable:!0,content:l}),window.location.hash="#",console.error(s,o);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),u=(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsxs)(ng,{children:[(0,eG.jsxs)("strong",{children:["You are about to change your client secret for your ",null==i?void 0:i.display," environment."]})," "]}),(0,eG.jsx)("br",{}),(0,eG.jsx)("p",{children:"Once you change your secret, your previous secret will no longer be valid for any applications using it."}),(0,eG.jsx)("p",{children:"This means you will need to update any applications using this client with the new JSON details before they are functional again."})]});return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(nv,{}),o.map(function(e){return(0,eG.jsxs)(eE.Fragment,{children:[(0,eG.jsxs)(nm,{children:[e.display,": "]}),!t.publicAccess&&(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)("br",{}),(0,eG.jsx)(nf.default,{type:"button",onClick:function(){return c(e)},children:"Change your client secret"})]}),(0,eG.jsx)("br",{}),(0,eG.jsx)("br",{})]},e.name)})]}),(0,eG.jsx)(nx.Z,{id:"confirm-new-secret",content:u,onConfirm:l,icon:e_.eHv,buttonStyle:"custom",title:"You are about to change your client secret",closable:!0})]})}),nj=t(20070),ny=t.n(nj),nw=t(35124),nZ=t(85330),nk=t(23157),nP=t(11915),nS=t(43590),nC=t.n(nS);function nI(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nD(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nI(Object(t),!0).forEach(function(n){(0,eB.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nO=eT.ZP.table(D||(D=(0,eN.Z)(["\n  .env {\n    width: 300px;\n  }\n"]))),nN=eT.ZP.span(O||(O=(0,eN.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),nF=eT.ZP.div(N||(N=(0,eN.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),nR=eT.ZP.div(F||(F=(0,eN.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),nE=eT.ZP.div(R||(R=(0,eN.Z)(["\n  color: #ff0000;\n"]))),nT={name:"",envs:["dev"]},nB=(0,eE.forwardRef)(function(e,n){var t,r=e.integrationId,a=e.environments,i=void 0===a?["dev"]:a,s=(0,eE.useState)(!1),o=s[0],c=s[1],l=(0,eE.useState)({}),u=l[0],d=l[1],p=(0,eE.useState)({}),h=p[0],f=p[1],x=(0,eE.useState)([nT]),v=x[0],m=x[1];(0,eE.useImperativeHandle)(n,function(){var e;return{submit:(e=(0,eO.Z)(eR().mark(function e(){var n,t,a,i,s,l,p,h;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v,o&&(n=[],nC()(u,function(e,t){n.push({name:t,envs:e})})),e.next=4,e7({integrationId:r,roles:n});case 4:if(t=e.sent,i=(a=(0,eH.Z)(t,2))[0],!a[1]){e.next=10;break}return e.abrupt("return",[!0,!1]);case 10:return s={},l={},p=!1,h=!1,nC()(i,function(e){e.failure.length>0&&nC()(e.failure,function(n){s[n]||(s[n]=[]),s[n].push(e.env),p=!0}),e.duplicate.length>0&&nC()(e.duplicate,function(n){l[n]||(l[n]=[]),l[n].push(e.env),h=!0})}),d(s),f(l),c(!0),e.abrupt("return",[p,h]);case 19:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),reset:function(){m([nT]),d({}),f({}),c(!1)}}});var g=function(e){m(v.filter(function(n,t){return t!==e}))},b=function(e,n){m(v.map(function(t,r){return r===e?{name:n,envs:t.envs}:t}))},j=(t=(0,eO.Z)(eR().mark(function e(n,t,r){return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m(v.map(function(e,r){return r===n?{name:e.name,envs:t.map(function(e){return e.value})}:e}));case 2:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),y=null;if(o){var w=null,Z=null;Object.keys(h).length>0&&(w=(0,eG.jsx)("tr",{children:(0,eG.jsx)("td",{colSpan:3,children:(0,eG.jsxs)(nF,{children:[(0,eG.jsx)(nR,{children:(0,eG.jsx)(eV.G,{icon:e_.sqG,color:"#17a2b8",title:"duplicated roles",size:"lg"})}),(0,eG.jsx)(nR,{children:"There are duplicated roles and we've skipped adding them."})]})})})),Object.keys(u).length>0&&(Z=(0,eG.jsx)("tr",{children:(0,eG.jsx)("td",{colSpan:3,children:(0,eG.jsxs)(nF,{children:[(0,eG.jsx)(nR,{children:(0,eG.jsx)(eV.G,{icon:e_.eHv,color:"#dc3545",title:"failed roles",size:"lg"})}),(0,eG.jsxs)(nR,{children:["We were unable to save some of your changes.",(0,eG.jsx)("br",{}),(0,eG.jsx)("div",{className:"fw-bold",children:"Please try submitting again."})]})]})})})),y=(0,eG.jsxs)(eG.Fragment,{children:[w,Z]})}else y=(0,eG.jsx)("tr",{children:(0,eG.jsx)("td",{colSpan:3,children:v.length<20?(0,eG.jsxs)(nN,{onClick:function(){m(v.concat(nT))},children:[(0,eG.jsx)(eV.G,{style:{color:"#006fc4"},icon:e_.KtF,title:"Add Role"}),(0,eG.jsx)("span",{children:"Add another role"})]}):(0,eG.jsx)(nE,{children:"You can only create 20 roles at a time. Please save before creating any new roles."})})});return(0,eG.jsx)("div",{children:(0,eG.jsxs)(nO,{children:[(0,eG.jsx)("thead",{children:(0,eG.jsxs)("tr",{children:[(0,eG.jsx)("th",{className:"role",children:"Role Name"}),(0,eG.jsx)("th",{className:"env",children:"Environments"}),(0,eG.jsx)("th",{})]})}),(0,eG.jsxs)("tbody",{children:[v.length>0?v.map(function(e,n){var t=function(n,t){return u[e.name]&&u[e.name].includes(t.children)?nD(nD({},n),{},{color:"#fff",backgroundColor:"#dc3545"}):h[e.name]&&h[e.name].includes(t.children)?nD(nD({},n),{},{color:"#fff",backgroundColor:"#17a2b8"}):n};return(0,eG.jsxs)("tr",{children:[(0,eG.jsx)("td",{className:"role",children:(0,eG.jsx)(nP.default,{size:"small","data-testid":"role-name-input-field",minLength:"2",maxLength:"100",value:e.name,disabled:o,onChange:function(e){return b(n,e.target.value)}})}),(0,eG.jsx)("td",{className:"env",children:(0,eG.jsx)(nk.ZP,{value:e.envs.map(function(e){return{value:e,label:e}}),options:i.map(function(e){return{value:e,label:e}}),isMulti:!0,isDisabled:o,placeholder:"Select...",noOptionsMessage:function(){return"You selected all environments"},onChange:function(e,t){return j(n,e,t)},styles:{multiValueLabel:t,multiValue:t}})}),(0,eG.jsx)("td",{children:!o&&v.length>1&&(0,eG.jsx)(nN,{onClick:function(){return g(n)},children:(0,eG.jsx)(eV.G,{style:{color:"#FF0303"},icon:e_.uMC,title:"Remove Role"})})})]})}):(0,eG.jsx)("tr",{children:(0,eG.jsx)("td",{colSpan:3,children:"No roles added."})}),y]})]})})}),nA=t(30274),nz=t(27812),nG=t(93096),nU=t.n(nG),nq=t(29208),nL=t.n(nq),nM=t(34766),nK=t.n(nM),nH=t(63916),nV=t(47755),n_=t(2100),nW=t(80820),nY=t.n(nW),nJ=t(99503),n$=t.n(nJ),nQ=t(99245),nX=t.n(nQ),n0=t(96486),n1=eT.ZP.label(E||(E=(0,eN.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),n2=eT.ZP.div(T||(T=(0,eN.Z)(["\n  display: flex;\n  & > div:first-child {\n    margin-right: 20px;\n  }\n"]))),n3=eT.ZP.div(B||(B=(0,eN.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"}),n5=eT.ZP.div(A||(A=(0,eN.Z)(["\n  font-size: 0.9rem;\n  ","\n"])),function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"}),n4=function(e){var n=e.children,t=e.width;return(0,eG.jsx)(n3,{width:t,children:(0,eG.jsx)(eW.ZP,{cols:6,children:(0,eG.jsxs)(eW.ZP.Row,{gutter:[],children:[(0,eG.jsx)(eW.ZP.Col,{span:5,children:n}),(0,eG.jsx)(eW.ZP.Col,{span:1,style:{textAlign:"right"},children:(0,eG.jsx)(eV.G,{icon:e_.byT,color:"#9F9F9F",size:"lg"})})]})})})},n8=function(e){var n=e.modalRef;return(0,eG.jsx)(nw.Z,{ref:n,id:"additiona-user-info",title:"Additional User Info",icon:null,cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){if(!e)return(0,eG.jsx)(eG.Fragment,{});var n=n$()(e.attributes,nX());return n=(0,n0.mapKeys)(n,function(e,n){return ny()(n)}),(0,eG.jsxs)("div",{children:[(0,eG.jsx)(n1,{children:"GUID"}),(0,eG.jsx)(n4,{width:"400px",children:e.guid}),(0,eG.jsx)("br",{}),(0,eG.jsx)(n1,{children:"Attributes"}),(0,eG.jsxs)(n2,{children:[(0,eG.jsx)(n5,{width:"200px",children:"Key"}),(0,eG.jsx)(n5,{width:"700px",children:"Value"})]}),nY()(n,function(e,n){return(0,eG.jsxs)(n2,{children:[(0,eG.jsx)(n4,{width:"200px",children:n}),(0,eG.jsx)(n4,{width:"700px",children:e})]})})]})}})},n7=t(27008),n6=function(e){return"service-account-".concat(e)},n9=t(34798),te=t.n(n9);function tn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tn(Object(t),!0).forEach(function(n){(0,eB.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tn(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tr=eT.ZP.label(z||(z=(0,eN.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),ta=eT.ZP.div(G||(G=(0,eN.Z)(["\n  text-align: center;\n"]))),ti=eT.ZP.div(U||(U=(0,eN.Z)(["\n  text-align: right;\n"]))),ts=eT.ZP.span(q||(q=(0,eN.Z)(["\n  float: right;\n  padding-right: 2.5em;\n"]))),to=eT.ZP.span(L||(L=(0,eN.Z)(["\n  float: right;\n  padding-right: 1.6em;\n"]))),tc=eT.ZP.div(M||(M=(0,eN.Z)(["\n  height: var(--field-top-spacing);\n"])));function tl(){return(0,eG.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}function tu(){return(0,eG.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var td=[{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"email",label:"Email"}],tp=[{value:"firstName",label:"Display Name"},{value:"lastName",label:"Username"},{value:"email",label:"Email"}],th=[{value:"firstName",label:"Name"},{value:"lastName",label:"Login"},{value:"email",label:"Email"}],tf={idir:td,azureidir:td,bceidbasic:tp,bceidbusiness:tp,bceidboth:tp,githubpublic:th,githubbcgov:th},tx=function(e){return{label:e,value:e}},tv=function(){return(0,eG.jsxs)(ta,{children:[(0,eG.jsx)(tc,{}),(0,eG.jsx)(eY.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},tm=(0,nr.hU)(function(e){var n,t,r,a=e.environment,i=e.integration,s=e.alert,o=(0,eE.useRef)(nw.V),c=(0,eE.useRef)(nw.V),l=(0,eE.useRef)(nw.V),u=(0,eE.useRef)(nw.V),d=(0,eE.useState)(!1),p=d[0],h=d[1],f=(0,eE.useState)(!1),x=f[0],v=f[1],m=(0,eE.useState)(!1),g=m[0],b=m[1],j=(0,eE.useState)(!1),y=j[0],w=j[1],Z=(0,eE.useState)(""),k=Z[0],P=Z[1],S=(0,eE.useState)(""),C=S[0],I=S[1],D=(0,eE.useState)(0),O=D[0],N=D[1],F=(0,eE.useState)(20),R=F[0];F[1];var E=(0,eE.useState)(!0),T=E[0],B=E[1],A=(0,eE.useState)([]),z=A[0],G=A[1],U=(0,eE.useState)([]),q=U[0],L=U[1],M=(0,eE.useState)(null),K=M[0],H=M[1],V=(0,eE.useState)([]),_=V[0],W=V[1],Y=(0,eE.useState)([]),J=Y[0],$=Y[1],Q=(0,eE.useState)([]),X=Q[0],ee=Q[1],en=(0,eE.useState)(),et=en[0],er=en[1],ea=(0,eE.useState)(!1),ei=ea[0],es=ea[1],eo=(0,eE.useState)(""),ec=eo[0],el=eo[1],eu=(0,eE.useState)([]),ed=eu[0],ep=eu[1],eh=(0,eE.useState)(!1),ef=eh[0],ex=eh[1],ev=function(){"service-account"===i.authType?(ee(["Service Accounts","Composite Roles"]),el("Service Accounts")):"browser-login"===i.authType?(ee(["Users","Composite Roles"]),el("Users")):(ee(["Users","Service Accounts","Composite Roles"]),el("Users"))},em=(0,eE.useCallback)(nU()((eP=(0,eO.Z)(eR().mark(function e(n){var t,r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K){e.next=2;break}return e.abrupt("return");case 2:return w(!0),ex(!1),e.next=6,e1({environment:a,integrationId:i.id,roleName:K,compositeRoleNames:n.map(function(e){return e.value})});case 6:if(t=e.sent,!(r=(0,eH.Z)(t,2)[1])){e.next=14;break}return P("Failed to save changes."),ex(!0),w(!1),e.abrupt("return",!1);case 14:return r||P("Last saved at ".concat(new Date().toLocaleString())),e.next=17,w(!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}},e)})),function(e){return eP.apply(this,arguments)}),2e3,{trailing:!0}),[K]),eg=function(){ej(),L([]),G([]),H(null),es((0,nA.Yr)(i))};(0,eE.useEffect)(function(){ep([]),ev(),er(i.id),i.id!==et&&eg()},[i]),(0,eE.useEffect)(function(){ep([]),K&&(ey(!0,K),ew(K),w(!1),P(""))},[K]);var eb=(0,eE.useMemo)(function(){return z.map(tx)},[z]),ej=(eS=(0,eO.Z)(eR().mark(function e(){var n,t,r,o,c;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return h(!0),e.next=5,e0({environment:a,integrationId:i.id,search:C});case 5:n=e.sent,r=(t=(0,eH.Z)(n,2))[0],o=t[1],c=null==r?[]:r.map(function(e){return e.name}),(o||!r)&&s.show({variant:"danger",content:"Failed to fetch roles."}),G(c),$(null==r?[]:r.map(function(e){return e.composite})),h(!1),1===c.length&&H(c[0]);case 15:case"end":return e.stop()}},e)})),function(){return eS.apply(this,arguments)}),ey=(eC=(0,eO.Z)(eR().mark(function e(n,t){var r,o,c,l,u,d;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=2;break}return e.abrupt("return");case 2:if(!(t.length<2)){e.next=4;break}return e.abrupt("return");case 4:return r=0,o=[],v(!0),n?N(r):(r=O,o=q),e.next=10,e8({environment:a,integrationId:i.id,roleName:t,first:r,max:R});case 10:if(c=e.sent,u=(l=(0,eH.Z)(c,2))[0],!l[1]){e.next=16;break}return e.abrupt("return",s.show({variant:"danger",content:"Failed to fetch users."}));case 16:(d=u||[]).length>0?d.map(function(){var e=(0,eO.Z)(eR().mark(function e(n){var t,r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.username.startsWith("service-account-")){e.next=8;break}return t=n.username.split("-"),e.next=4,(0,n7.A_)(t[t.length-1]);case 4:r=e.sent,a=(0,eH.Z)(r,1)[0],ep([].concat((0,nz.Z)(ed),[{username:n.username,integration:a}]));case 8:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()):ep([]),B(d.length===R),L(o.concat(d)),N(r+R),H(t),v(!1);case 23:case"end":return e.stop()}},e)})),function(e,n){return eC.apply(this,arguments)}),ew=(eI=(0,eO.Z)(eR().mark(function e(n){var t,r,o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return");case 2:return b(!0),e.next=5,e2({environment:a,integrationId:i.id,roleName:n});case 5:if(t=e.sent,o=(r=(0,eH.Z)(t,2))[0],!(r[1]||!o)){e.next=12;break}return s.show({variant:"danger",fadeOut:5e3,closable:!0,content:"Failed to fetch composite roles."}),e.abrupt("return");case 12:W(o.map(function(e){return{label:e,value:e}})),b(!1);case 14:case"end":return e.stop()}},e)})),function(e){return eI.apply(this,arguments)}),eZ=(eD=(0,eO.Z)(eR().mark(function e(n){return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.current.open(n);case 1:case"end":return e.stop()}},e)})),function(e){return eD.apply(this,arguments)}),ek=null;if(0===O&&x)ek=(0,eG.jsx)(tv,{});else if(K){var eP,eS,eC,eI,eD,eN,eF=q.filter(function(e){return!e.username.startsWith("service-account-")}),eT=q.filter(function(e){return e.username.startsWith("service-account-")});ek="Users"===ec?(0,eG.jsx)(nV.Z,{variant:"mini",headers:[{accessor:"idp",Header:"IDP"},{accessor:"guid",Header:"GUID"},{accessor:"email",Header:"Email"},{accessor:"actions",Header:(0,eG.jsx)(tl,{}),disableSortBy:!0}],data:eF.length>0?eF.map(function(e){var n=e.username.split("@");if(n.length<2)return[];var t=(0,eH.Z)(n,2),r=t[0],a=t[1],i=tf[a];return{idp:ni.S[a],guid:r,email:e.email,actions:(0,eG.jsxs)(to,{children:[(0,eG.jsx)("span",{onClick:function(n){n.stopPropagation(),o.current.open({guid:e.username.split("@")[0],attributes:tt(tt({},nK()(i,function(n,t){return n[t.label]=nL()(e,t.value),n},{})),e.attributes)})},children:(0,eG.jsx)(eV.G,{style:{color:"#000"},icon:e_.Mdf,size:"lg",title:"User Detail"})}),"\xa0\xa0",(0,eG.jsx)("span",{onClick:function(){return l.current.open(e)},children:(0,eG.jsx)(eV.G,{style:{color:"#FF0303"},icon:e_.uMC,size:"lg",title:"Remove User"})})]})}}):[],loadMoreItem:function(){return ey(!1,K)},hasMoreItem:T,loader:(0,eG.jsx)(tv,{}),colfilters:[],activateRow:te(),rowSelectorKey:"guid",noDataFoundElement:(0,eG.jsx)("td",{colSpan:5,children:"No users found."})}):"Service Accounts"===ec?(0,eG.jsx)(nV.Z,{variant:"mini",headers:[{accessor:"projectName",Header:"Project Name"},{accessor:"actions",Header:(0,eG.jsx)(tu,{}),disableSortBy:!0}],data:eT.length>0?eT.map(function(e){var n,t;return{projectName:null===(n=ed.find(function(n){return n.username==e.username}))||void 0===n?void 0:null===(t=n.integration)||void 0===t?void 0:t.projectName,actions:(0,eG.jsx)("span",{onClick:function(){return u.current.open(e)},children:(0,eG.jsx)(ts,{children:(0,eG.jsx)(eV.G,{style:{color:"#FF0303"},icon:e_.uMC,size:"lg",title:"Remove Service Account"})})})}}):[],colfilters:[],activateRow:te(),rowSelectorKey:"projectName",noDataFoundElement:(0,eG.jsx)("td",{colSpan:5,children:"No service accounts found."})}):g?(0,eG.jsx)(tv,{}):(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsxs)(tr,{children:["Select the roles to be nested under the Parent role"," ",(0,eG.jsx)(n_.Z,{content:"Composite roles associate (nest) one or more additional roles within it."})]}),(0,eG.jsx)(nk.ZP,{value:_,options:eb.filter(function(e){return e.value!==K}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:(eN=(0,eO.Z)(eR().mark(function e(n){var t;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=em(n))||void 0===t?void 0:t.then(function(e){return e&&W(n)});case 2:case"end":return e.stop()}},e)})),function(e){return eN.apply(this,arguments)}),isDisabled:!ei}),(0,eG.jsx)(nZ.Ad,{saving:y,content:k,variant:ef?"error":"success"})]})}var eB=(0,eG.jsx)(nV.Z,{headers:[{accessor:"role",Header:"Role Name"},{accessor:"actions",Header:"",disableSortBy:!0}],noDataFoundElement:(0,eG.jsx)("td",{children:"No roles found."}),activateRow:function(e){var n=e.cells[0].value;if(n.endsWith(" (Composite role)")){var t=e.cells[0].value.length;H(n.substr(0,t-17))}else H(n)},rowSelectorKey:"role",data:z.map(function(e,n){return{role:!0==J[n]?"".concat(e," (Composite role)"):e,actions:(0,eG.jsx)(ti,{children:(0,eG.jsx)(nH.Kk,{disabled:!ei,icon:e_.$aW,role:"button","aria-label":"delete",onClick:function(n){ei&&(n.stopPropagation(),eZ(e))},title:"Delete",size:"lg",style:{marginRight:"1rem"}})})}}),colfilters:[]});return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(eW.ZP,{cols:10,children:(0,eG.jsxs)(eW.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eG.jsx)(eW.ZP.Col,{span:4,children:(0,eG.jsxs)("div",{style:{display:"flex",float:"left"},children:[(0,eG.jsx)(nZ.E1,{type:"text",maxLength:"1000",placeholder:"Search existing roles",value:C,onChange:function(e){I(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&ej()}}),(0,eG.jsx)(nZ.zx,{type:"button",size:"small",variant:"bcPrimary",onClick:ej,children:"Search"})]})}),(0,eG.jsx)(eW.ZP.Col,{span:6,children:K&&(0,eG.jsx)(nZ.mQ,{onChange:function(e){el(e)},activeKey:ec,tabBarGutter:30,children:X.map(function(e){return(0,eG.jsx)(nZ.OK,{tab:e},e)})})})]})}),(0,eG.jsx)(tc,{}),p?(0,eG.jsx)(tv,{}):(0,eG.jsx)(eW.ZP,{cols:10,children:(0,eG.jsxs)(eW.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eG.jsx)(eW.ZP.Col,{span:4,children:eB}),(0,eG.jsx)(eW.ZP.Col,{span:6,children:ek})]})}),(0,eG.jsx)(nw.Z,{ref:c,title:"Delete Role",icon:e_.eHv,onConfirm:(n=(0,eO.Z)(eR().mark(function e(n,t){var r,o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,e6({environment:a,integrationId:i.id,roleName:t});case 2:return r=e.sent,(o=(0,eH.Z)(r,2))[0],o[1]&&s.show({variant:"danger",content:"Failed to delete role ".concat(t,". Please try again.")}),e.next=9,eg();case 9:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),confirmButtonText:"Delete",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,eG.jsx)("div",{children:"Are you sure you want to delete this role?"})}),(0,eG.jsx)(nw.Z,{id:"remove-user",ref:l,title:"Remove User from Role",icon:e_.eHv,onConfirm:(t=(0,eO.Z)(eR().mark(function e(n,t){var r,o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,e5({environment:a,integrationId:i.id,username:t.username,roleName:K,mode:"del"});case 4:r=e.sent,(o=(0,eH.Z)(r,2)[1])&&s.show({variant:"danger",content:o}),ey(!0,K);case 9:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),confirmButtonText:"Remove",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,eG.jsx)("div",{children:"Are you sure you want to remove this user from this role?"})}),(0,eG.jsx)(nw.Z,{id:"remove-service-account",ref:u,title:"Remove Service Account from Role",icon:e_.eHv,onConfirm:(r=(0,eO.Z)(eR().mark(function e(n,t){var r,o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,e5({environment:a,integrationId:i.id,username:t.username,roleName:K,mode:"del"});case 4:r=e.sent,(o=(0,eH.Z)(r,2)[1])&&s.show({variant:"danger",content:o}),ey(!0,K);case 9:case"end":return e.stop()}},e)})),function(e,n){return r.apply(this,arguments)}),confirmButtonText:"Remove",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,eG.jsx)("div",{children:"Are you sure you want to remove this service account from this role?"})}),(0,eG.jsx)(n8,{modalRef:o})]})}),tg=t(66708),tb=eT.ZP.div(K||(K=(0,eN.Z)(["\n  height: var(--field-top-spacing);\n"]))),tj=function(e){var n,t=e.integration,r=(0,eE.useRef)(nw.V),a=(0,eE.useState)("dev"),i=a[0],s=a[1],o=(0,eE.useState)(!1),c=o[0],l=o[1],u=(0,eE.useState)(0),d=u[0],p=u[1],h=(0,eE.useContext)(tg.SurveyContext);(0,eE.useEffect)(function(){s("dev"),l((0,nA.Yr)(t))},[t.id]);var f=(null==t?void 0:t.environments)||[];return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(tb,{}),(0,eG.jsx)(nZ.zx,{disabled:!c,size:"medium",variant:"primary",onClick:function(){r.current.open()},"data-testid":"create-role-button",children:"+ Create a New Role"}),(0,eG.jsx)(tb,{}),(0,eG.jsxs)(nZ.mQ,{onChange:function(e){s(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eG.jsx)("br",{}),f.map(function(e){return(0,eG.jsx)(nZ.OK,{tab:ny()(e),children:(0,eG.jsx)(tm,{environment:e,integration:t},d)},e)})]}),(0,eG.jsx)(nw.Z,{ref:r,title:"Create New Role",icon:null,onConfirm:(n=(0,eO.Z)(eR().mark(function e(n){var t,a,i,s;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.submit();case 2:if(t=e.sent,i=(a=(0,eH.Z)(t,2))[0],s=a[1],!i){e.next=11;break}return r.current.updateConfig({confirmButtonText:"Try Again"}),e.abrupt("return",!1);case 11:if(!s){e.next=17;break}return r.current.updateConfig({showConfirmButton:!1,cancelButtonText:"Close",buttonAlign:"right"}),p(function(e){return e+1}),e.abrupt("return",!1);case 17:return e.next=19,n.current.reset();case 19:p(function(e){return e+1}),null==h||h.setShowSurvey(!0,"createRole");case 21:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),onCancel:function(e){e.current.reset()},confirmButtonText:"Save",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:(0,eG.jsx)(nB,{integrationId:t.id,environments:f})})]})},ty=(x=(0,eO.Z)(eR().mark(function e(n){var t,r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,r=n.search,e.prev=1,e.next=4,eJ.e.post("bceid-webservice/idir/search",{field:t,search:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return x.apply(this,arguments)}),tw=(v=(0,eO.Z)(eR().mark(function e(n){var t,r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.guid,r=n.userId,e.prev=1,e.next=4,eJ.e.post("bceid-webservice/idir/import",{guid:t,userId:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return v.apply(this,arguments)}),tZ=[{value:"idir",label:"IDIR"}],tk=[{value:"givenName",label:"First Name",allowed:["idir"]},{value:"surname",label:"Last Name",allowed:["idir"]},{value:"mail",label:"Email",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"mailNickname",label:"Username",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"guid",label:"IDP GUID",allowed:["bceidbasic","bceidbusiness"]}],tP=(0,eE.forwardRef)(function(e,n){e.key;var t,r,a=e.idp,i=e.property,s=e.search,o=e.infoModalRef,c=e.parentModalRef,l=(0,eE.useState)(!1),u=(l[0],l[1]),d=(0,eE.useState)(!1),p=d[0],h=d[1],f=(0,eE.useState)([]),x=f[0],v=f[1],m=(0,eE.useState)(""),g=m[0],b=m[1],j=(0,eE.useState)(i),y=j[0],w=j[1],Z=(0,eE.useState)(s),k=Z[0],P=Z[1],S=(0,eE.useState)(!1),C=S[0],I=S[1];(0,eE.useEffect)(function(){b(a)},[a]),(0,eE.useEffect)(function(){if(g){var e=tk.find(function(e){return e.value===y});if(null==e?void 0:e.allowed.includes(g))D(k,y);else{var n=tk.find(function(e){return e.allowed.includes(g)});w((null==n?void 0:n.value)||""),P("")}}},[g]);var D=(t=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,s=arguments;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:y,!(n.length<2)){e.next=3;break}return e.abrupt("return");case 3:return h(!0),v([]),u(!0),e.next=8,ty({field:t,search:n});case 8:r=e.sent,i=(a=(0,eH.Z)(r,2))[0],a[1],i&&v(i),h(!1);case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),O=(r=(0,eO.Z)(eR().mark(function e(n){var t,r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I(!1),e.next=3,tw({guid:n.guid,userId:n.userId});case 3:t=e.sent,(r=(0,eH.Z)(t,2))[0],r[1]?I(!0):c.current.close({idp:g,guid:n.guid});case 8:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(nV.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",headers:[{accessor:"firstName",Header:"First name"},{accessor:"lastName",Header:"Last Name"},{accessor:"email",Header:"Email"},{accessor:"idirUsername",Header:"IDIR username"},{accessor:"actions",Header:"",disableSortBy:!0}],rowSelectorKey:"guid",data:x.map(function(e){return{guid:e.guid,firstName:e.firstName,lastName:e.lastName,email:e.email,idirUsername:e.userId,actions:(0,eG.jsxs)(nH.c4,{children:[(0,eG.jsx)(nH.Kk,{icon:e_.Mdf,role:"button","aria-label":"view",onClick:function(){o.current.open({guid:e.guid,attributes:{username:e.userId,displayName:e.displayName,firstName:e.firstName,lastName:e.lastName,email:e.email,telephone:e.phone,company:e.company,department:e.department,title:e.jobTitle},_hash:c.current.getId()})},title:"View",size:"lg"}),(0,eG.jsx)(nH.Kk,{icon:e_.q7m,role:"button","aria-label":"import",onClick:function(){return O(e)},title:"Import",size:"lg"})]})}}),colfilters:[{value:g,multiselect:!1,onChange:b,options:tZ},{value:y,multiselect:!1,onChange:w,options:tk.filter(function(e){return e.allowed.includes(g)})}],showFilters:!0,loading:p,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:k,searchLocation:"right",onSearch:D,onEnter:D,noDataFoundElement:(0,eG.jsx)("p",{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})}),C&&(0,eG.jsx)("p",{className:"text-danger",children:"Failed to import the user. Please try again."})]})});function tS(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tC(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tS(Object(t),!0).forEach(function(n){(0,eB.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tI=eT.ZP.label(H||(H=(0,eN.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),tD=eT.ZP.div(V||(V=(0,eN.Z)(["\n  text-align: center;\n"]))),tO=eT.ZP.div(_||(_=(0,eN.Z)(["\n  height: var(--field-top-spacing);\n"]))),tN=eT.ZP.div(W||(W=(0,eN.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),tF=eT.ZP.div(Y||(Y=(0,eN.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),tR=eT.ZP.div(J||(J=(0,eN.Z)(["\n  text-align: center;\n"]))),tE=function(){return(0,eG.jsxs)(tD,{children:[(0,eG.jsx)(tO,{}),(0,eG.jsx)(eY.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},tT=[{value:"firstName",label:"First Name",search:!0,result:!0},{value:"lastName",label:"Last Name",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],tB=[{value:"firstName",label:"Display Name",search:!0,result:!0},{value:"lastName",label:"Username",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],tA=[{value:"firstName",label:"Name",search:!0,result:!0},{value:"lastName",label:"Login",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],tz={idir:tT,azureidir:tT,bceidbasic:tB,bceidbusiness:tB,bceidboth:tB,githubpublic:tA,githubbcgov:tA},tG=(0,nr.hU)(function(e){var n,t,r,a,i,s=e.selectedRequest,o=e.alert,c=(0,eE.useRef)(nw.V),l=(0,eE.useRef)(nw.V),u=(0,eE.useState)(!1),d=u[0],p=u[1],h=(0,eE.useState)(1),f=h[0],x=h[1],v=(0,eE.useState)(0),m=v[0],g=v[1],b=(0,eE.useState)(15),j=b[0],y=b[1],w=(0,eE.useState)(!1),Z=w[0],k=w[1],P=(0,eE.useState)(!1),S=P[0],C=P[1],I=(0,eE.useState)(!1),D=I[0],O=I[1],N=(0,eE.useState)(""),F=N[0],R=N[1],E=(0,eE.useState)([]),T=E[0],B=E[1],A=(0,eE.useState)([]),z=A[0],G=A[1],U=(0,eE.useState)([]),q=U[0],L=U[1],M=(0,eE.useState)([]),K=M[0],H=M[1],V=(0,eE.useState)("dev"),_=V[0],W=V[1],Y=(0,eE.useState)(s.devIdps[0]),J=Y[0],$=Y[1],Q=(0,eE.useState)(""),X=Q[0],ee=Q[1],en=(0,eE.useState)(""),et=en[0],er=en[1],ea=(0,eE.useState)(void 0),ei=ea[0],es=ea[1],eo=(0,eE.useState)(!1),ec=eo[0],el=eo[1],eu=(0,eE.useContext)(tg.SurveyContext),ed=(0,eE.useCallback)(nU()((n=(0,eO.Z)(eR().mark(function e(n){var t,r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(!0);case 2:return R("Assigning role..."),el(!1),e.next=6,e4({environment:_,integrationId:s.id,username:ei,roleNames:n});case 6:if(t=e.sent,r=(0,eH.Z)(t,2)[1],O(!1),r){e.next=16;break}return R("Last saved at ".concat(new Date().toLocaleString())),null==eu||eu.setShowSurvey(!0,"addUserToRole"),e.abrupt("return",!0);case 16:return el(!0),R("Failed to update roles."),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==s?void 0:s.id,_,ei,eu]),ep=(t=(0,eO.Z)(eR().mark(function e(){var n,t,r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k(!0);case 4:return e.next=6,e0({environment:_,integrationId:s.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,eH.Z)(n,2))[0],t[1]&&o.show({variant:"danger",content:"Failed to fetch roles."}),G(null===r?[]:r.map(function(e){return e.name})),H(null===r?[]:r.map(function(e){return e.composite})),k(!1);case 15:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),eh=function(){B([]),L([]),x(1),g(0),es(void 0),p(!1)},ef=function(){if(er(""),W("dev"),s.devIdps){var e=s.devIdps.length>0?s.devIdps[0]:"";$(e);var n=tz[e]||[];n.length>0&&ee(n[0].value)}},ex=(r=(0,eO.Z)(eR().mark(function e(n){var t,r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(!0);case 2:return e.next=4,e3({environment:_,integrationId:s.id,username:n});case 4:if(t=e.sent,a=(r=(0,eH.Z)(t,2))[0],!r[1]){e.next=12;break}return o.show({variant:"danger",content:"Failed to fetch user roles."}),C(!1),e.abrupt("return");case 12:return e.next=14,L(a||[]);case 14:C(!1);case 15:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});(0,eE.useEffect)(function(){eh(),ef(),G([])},[s.id]),(0,eE.useEffect)(function(){ev(et,void 0,f)},[f]),(0,eE.useEffect)(function(){ev(et,void 0,1)},[j]),(0,eE.useEffect)(function(){eh(),ep(),s.devIdps&&$(s.devIdps.length>0?s.devIdps[0]:"")},[_]),(0,eE.useEffect)(function(){eh();var e=tz[J]||[];!e.find(function(e){return e.search&&e.value===X})&&e.length>0&&ee(e[0].value)},[J]),(0,eE.useEffect)(function(){R(""),ei&&ex(ei)},[ei]);var ev=(a=(0,eO.Z)(eR().mark(function e(n){var t,r,a,i,c,l=arguments;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>1&&void 0!==l[1]?l[1]:X,r=l.length>2&&void 0!==l[2]?l[2]:f,!(n.length<2)){e.next=4;break}return e.abrupt("return");case 4:return k(!0),er(n),x(r),ee(t),B([]),L([]),es(void 0),e.next=13,eX({environment:_,idp:J,property:t,searchKey:n,integrationId:s.id||-1});case 13:if(a=e.sent,c=(i=(0,eH.Z)(a,2))[0],i[1]&&o.show({variant:"danger",content:"Failed to fetch users."}),c){var u;p(!0),B((u=r,c.rows.slice((u-1)*15,15*u))),g(c.count)}k(!1);case 20:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),em=function(e){return ev(e,void 0,1)},eg=(i=(0,eO.Z)(eR().mark(function e(n,t){var r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"clear"===t.action||(r="remove-value"===t.action?q.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,nz.Z)(q.slice(0,-1)):[].concat((0,nz.Z)(q),[null===(a=t.option)||void 0===a?void 0:a.value])),!(r.length!==q.length)){e.next=7;break}return e.next=5,ed(r);case 5:e.sent&&L(r);case 7:case"end":return e.stop()}},e)})),function(e,n){return i.apply(this,arguments)}),eb=null;S?eb=(0,eG.jsx)(tE,{}):ei&&(eb=(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(tI,{children:"2. Assign User to a Role"}),(0,eG.jsx)(nk.ZP,{value:q.map(function(e){return{value:e,label:e}}),options:z.map(function(e,n){return{value:e,label:!0==K[n]?"".concat(e," (Composite role)"):e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:eg,"data-testid":"user-role-select"}),(0,eG.jsx)(nZ.Ad,{saving:D,content:F,variant:ec?"error":"success"})]}));var ej="idir"===J,ey=tz[J]||[],ew=ey.length>0?ey.filter(function(e){return e.result}):[],eZ=null;d&&ej&&(eZ=(0,eG.jsxs)(eG.Fragment,{children:[T.length>0&&(0,eG.jsx)(nZ.XU,{italic:!0,children:"If you did not find the user you were looking for, you can try searching for the user in our IDIM Web Service Lookup tool. This tool uses a webservice to find IDIR users. so you will need to import the user that is found."}),(0,eG.jsx)(nf.default,{type:"button",size:"small","data-testid":"idim-search-button",onClick:function(){return l.current.open({key:new Date().getTime().toString(),idp:"idir",property:X,search:et})},children:"Search in IDIM Web Service Lookup"})]}));var ek=(null==s?void 0:s.environments)||[],eP=(null==s?void 0:s.devIdps)||[],eS="guid"===X||null!=J&&J.startsWith("bceid")?"Exact text match results will be displayed":"Partial text match results will be displayed",eC=function(e){var n=ey.find(function(n){return n.value===e});return null==n?void 0:n.label.toString()};return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(tO,{}),(0,eG.jsx)(eW.ZP,{cols:10,children:(0,eG.jsxs)(eW.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eG.jsxs)(eW.ZP.Col,{span:6,children:[(0,eG.jsxs)(nZ.h4,{variant:"dark",size:"sm",children:["1. Search for a user based on the selection criteria below \xa0",(0,eG.jsx)(n_.Z,{title:"",content:"When searching BCeID GUID, please ensure your end users has logged in via your app (and indirectly our IDP) for this search to be successful.",hide:200})]}),(0,eG.jsx)("div",{"data-testid":"role-search-table",children:(0,eG.jsx)(nV.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",rowSelectorKey:"username",headers:[{accessor:"firstName",Header:eC("firstName")||""},{accessor:"lastName",Header:eC("lastName")||""},{accessor:"email",Header:"Email"},{accessor:"actions",Header:"",disableSortBy:!0}],data:T.map(function(e){return{username:nL()(e,"username"),firstName:nL()(e,"firstName"),lastName:nL()(e,"lastName"),email:nL()(e,"email"),actions:(0,eG.jsx)(nH.c4,{children:(0,eG.jsx)(nH.Kk,{icon:e_.Mdf,role:"button","aria-label":"view",onClick:function(n){n.stopPropagation(),c.current.open({guid:e.username.split("@")[0],attributes:tC(tC({},nK()(ew,function(n,t){return n[t.label]=nL()(e,t.value),n},{})),e.attributes)})},title:"View",size:"lg"})})}}),colfilters:[{key:"user-role-filter-env",value:_,multiselect:!1,onChange:W,options:ek.map(function(e){return{value:e,label:ny()(e)}})},{key:"user-role-filter-idp",value:J,multiselect:!1,onChange:$,options:eP.filter(function(e){return!["digitalcredential","bcservicescard"].includes(e)}).map(function(e){return{value:e,label:ni.S[e]}})},{key:"user-role-filter-prop",value:X,multiselect:!1,onChange:ee,options:ey.filter(function(e){return e.search})}],showFilters:!0,loading:Z,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:et,searchLocation:"right",onSearch:em,onEnter:em,noDataFoundElement:d?(0,eG.jsxs)(tN,{children:[(0,eG.jsx)(tF,{children:(0,eG.jsx)(eV.G,{icon:e_.RLE,color:"#D44331",title:"Edit",size:"lg"})}),ej?(0,eG.jsx)(tF,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria or try using our IDIM Web Service Lookup tool."}):(0,eG.jsx)(tF,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})]}):(0,eG.jsx)(tR,{children:"You have not searched for any users yet."}),pagination:!0,pageLimits:[15],onPage:x,rowCount:m,limit:j,onLimit:function(e){y(e)},activateRow:function(e){es(e.original.username)},searchTooltip:eS})}),eZ]}),(0,eG.jsx)(eW.ZP.Col,{span:4,children:eb})]})}),(0,eG.jsx)(n8,{modalRef:c}),(0,eG.jsx)(nw.Z,{ref:l,id:"idim-webservice-lookup",title:"IDIM Web Service Lookup",icon:null,onClose:function(e,n,t){ev(t.guid,"guid",1)},cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{minWidth:"800px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){return e?(0,eG.jsx)(tP,{idp:e.idp,property:e.property,search:e.search,infoModalRef:c,parentModalRef:l},e.key):(0,eG.jsx)(eG.Fragment,{})}})]})}),tU=t(58292),tq=t(42050),tL=eT.ZP.h3($||($=(0,eN.Z)(["\n  color: #777777;\n  font-size: ",";\n  font-weight: bold;\n  min-height: 30px;\n  border-bottom: 1px solid #707070;\n  margin-bottom: 5px;\n  overflow: wrap;\n"])),nt.CA),tM=eT.ZP.p(Q||(Q=(0,eN.Z)(["\n  font-size: ",";\n  color: "," !important;\n"])),nt.KN,nt.we),tK=t(11752),tH=t.n(tK),tV=eT.ZP.ul(X||(X=(0,eN.Z)(["\n  list-style-type: none;\n  margin: 0;\n  position: relative;\n\n  & li {\n    border-bottom: 1px solid #d4d4d4;\n    & svg.svg-inline--fa {\n      position: absolute;\n      right: 0;\n    }\n\n    & div.icon {\n      position: absolute;\n      right: 0;\n      bottom: 5px;\n    }\n  }\n"]))),t_=(tH()()||{}).publicRuntimeConfig,tW=(void 0===t_?{}:t_).app_env,tY=(0,eT.ZP)(tL)(ee||(ee=(0,eN.Z)(["\n  border-bottom: none;\n  margin-top: 10px;\n"]))),tJ=(0,eT.ZP)(tY)(en||(en=(0,eN.Z)(["\n  font-size: 14px;\n"]))),t$=eT.ZP.a(et||(et=(0,eN.Z)(["\n  color: ",";\n"])),nt.nc),tQ=(0,eT.ZP)(tq.Z)(er||(er=(0,eN.Z)(["\n  margin-bottom: 10px;\n"]))),tX=function(e){switch(e){case"submitted":return 0;case"pr":return 33;case"planned":return 66;default:return 100}},t0=function(e){switch(e){case"submitted":return"Process request submitted...";case"pr":return"Pull request created...";case"planned":return"Terraform plan succeeded...";case"prFailed":case"planFailed":case"applyFailed":return"An error has occurred";default:return""}},t1=function(e){switch(e){case"prFailed":case"planFailed":case"applyFailed":return!0;default:return!1}},t2=function(e){switch(e){case"submitted":default:return 0;case"pr":return 1;case"prFailed":return 2;case"planned":return 3;case"planFailed":return 4;case"applied":return 5;case"applyFailed":return 6}};function t3(e){var n=e.integration,t=n.status,r=n.updatedAt,a=t1(t),i=new Date(r||"").toLocaleString();return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(tQ,{now:tX(t),animated:!0,variant:a?"danger":void 0}),(0,eG.jsxs)(tM,{children:["Last updated at ",i]})]})}(0,nr.hU)(function(e){var n=e.integration,t=e.title,r=e.alert,a=n.id,i=n.status,s=n.updatedAt,o=n.prNumber,c=(0,eE.useState)(!1),l=c[0],u=c[1],d=t1(i),p=t0(i),h=new Date(s||"");(0,eE.useEffect)(function(){u(12e5<new Date().getTime()-h.getTime())},[n]);var f=[(0,eG.jsxs)("li",{children:["Process request submitted",(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#00C45B"})]},"1")],x=t2(i);x<1?f.push((0,eG.jsxs)("li",{children:["Pull request created",(0,eG.jsx)(eV.G,{icon:e_.LM3,color:"#B2B2B2",spin:!0})]},"2")):2===x?f.push((0,eG.jsxs)("li",{children:["Pull request creation failed",(0,eG.jsx)(eV.G,{icon:e_.nYk,color:"#FF0000"})]},"2")):f.push((0,eG.jsxs)("li",{children:["Pull request created (",(0,eG.jsx)(ns.default,{external:!0,href:"production"===tW?"https://github.com/bcgov/sso-terraform/pull/".concat(o):"https://github.com/bcgov/sso-terraform-dev/pull/".concat(o),children:"link"}),")",(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#00C45B"})]},"2")),x<3?f.push((0,eG.jsxs)("li",{children:["Terraform plan succeeded",(0,eG.jsx)(eV.G,{icon:e_.LM3,color:"#B2B2B2",spin:!0})]},"3")):4===x?f.push((0,eG.jsxs)("li",{children:["Terraform plan failed",(0,eG.jsx)(eV.G,{icon:e_.nYk,color:"#FF0000"})]},"3")):f.push((0,eG.jsxs)("li",{children:["Terraform plan succeeded",(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#00C45B"})]},"3")),x<5?f.push((0,eG.jsxs)("li",{children:["Request processed",(0,eG.jsx)(eV.G,{icon:e_.LM3,color:"#B2B2B2",spin:!0})]},"4")):6===x?f.push((0,eG.jsxs)("li",{children:["Request failed",(0,eG.jsx)(eV.G,{icon:e_.nYk,color:"#FF0000"})]},"4")):f.push((0,eG.jsxs)("li",{children:["Request processed",(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#00C45B"})]},"4"));var v=null;return d?v=(0,eG.jsxs)(na.B,{children:["You have an unexpected error. Please contact our SSO support team by"," ",(0,eG.jsx)(t$,{href:"https://chat.developer.gov.bc.ca/channel/sso",target:"_blank",title:"Rocket Chat",children:"Rocket.Chat"})," ","or"," ",(0,eG.jsx)(t$,{href:"mailto:bcgov.sso@gov.bc.ca",title:"Pathfinder SSO",target:"blank",children:"Email us"})," "]}):l&&(v=(0,eG.jsxs)(na.$,{children:[(0,eG.jsx)("div",{children:"Your integration submission is taking longer than expected, please select resubmit."}),(0,eG.jsx)(nZ.zx,{variant:"bcPrimary",size:"small",type:"button",onClick:(0,eO.Z)(eR().mark(function e(){var n,t,i,s,o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n7.ct)(a);case 2:n=e.sent,(t=(0,eH.Z)(n,2))[0],s=(i=t[1])?"danger":"success",o=i?"failed to resubmit the request":"resubmitted the request successfully",r.show({variant:s,fadeOut:1e4,closable:!0,content:o}),u(!1);case 10:case"end":return e.stop()}},e)})),children:"Resubmit"})]})),(0,eG.jsxs)(eG.Fragment,{children:[t&&(0,eG.jsx)(tY,{children:t}),(0,eG.jsx)(tJ,{children:p}),(0,eG.jsx)(t3,{integration:n}),(0,eG.jsx)(tV,{children:f}),v]})});var t5=t(87414),t4=t(5845),t8=t(96270);function t7(e){var n,t=e.requestId,r=(0,eE.useState)(!1),a=r[0],i=r[1],s=(0,eE.useState)(!1),o=s[0],c=s[1],l=(0,eE.useState)([]),u=l[0],d=l[1],p=(n=(0,eO.Z)(eR().mark(function e(){var n,r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return i(!0),e.next=5,(0,t5.v)({requestId:t,eventCode:"request-update-success",clearNotifications:!0});case 5:n=e.sent,a=(r=(0,eH.Z)(n,2))[0],r[1]?c(!0):a&&d(a.rows),i(!1);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return((0,eE.useEffect)(function(){p()},[t]),o)?(0,eG.jsx)(eK,{variant:"warning",content:"Failed to load details."}):a?(0,eG.jsx)(t4.Z,{}):(0,eG.jsx)(eG.Fragment,{children:(0,eG.jsx)(t8.Z,{events:u})})}var t6=t(4136),t9=t(71431),re=t.n(t9),rn=eT.ZP.div(ea||(ea=(0,eN.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),rt=eT.ZP.div(ei||(ei=(0,eN.Z)(["\n  display: flex;\n  justify-content: flex-start;\n\n  & > *:nth-child(1) {\n    margin-right: 5px;\n  }\n"]))),rr="15px",ra=eT.ZP.div(es||(es=(0,eN.Z)(["\n  height: ",";\n  width: ",";\n  border-radius: ",";\n  margin: ",";\n  margin-left: 0;\n  border: 2px solid #b3b3b3;\n"])),rr,rr,rr,"0"),ri=eT.ZP.li(eo||(eo=(0,eN.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0;\n\n  & p {\n    max-width: 90%;\n    margin: 5px 0;\n  }\n"]))),rs=function(e){var n=e.integration;return(0,eG.jsxs)(rt,{children:[(0,eG.jsx)("div",{children:(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#2E8540"})}),(0,eG.jsxs)("div",{children:[(0,eG.jsx)("span",{children:"Your integration has been approved. Please wait approx. 10 min to get access to your installation information access again."}),(0,eG.jsx)(rn,{children:"Progress Update"}),(0,eG.jsx)(t3,{integration:n})]})]})},ro=function(){return(0,eG.jsxs)(rt,{children:[(0,eG.jsx)("div",{children:(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#2E8540"})}),(0,eG.jsx)("div",{children:(0,eG.jsx)("span",{children:"Your integration is approved and available."})})]})};function rc(e){return e.integration,(0,eG.jsx)(eG.Fragment,{children:(0,eG.jsxs)(tV,{children:[(0,eG.jsxs)(ri,{children:["Requirements email sent to IDIM",(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#00C45B"})]}),(0,eG.jsxs)(ri,{children:[(0,eG.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,eG.jsx)(ns.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,eG.jsx)(eV.G,{icon:e_.FU$,color:"#b3b3b3"})]}),(0,eG.jsxs)(ri,{children:[(0,eG.jsx)("p",{children:"Access to prod"}),(0,eG.jsx)(ra,{})]})]})})}var rl=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,a=t.hasBceid,i=t.awaitingBceidProd,s=t.bceidProdApplying,o=t.bceidApproved;if(!r||!a)return null;var c=null;return s?c=(0,eG.jsx)(rs,{integration:n}):o?c=(0,eG.jsx)(ro,{}):i&&(c=(0,eG.jsx)(rc,{integration:n})),(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)("br",{}),(0,eG.jsx)(rn,{children:"Access to BCeID Prod"}),(0,eG.jsx)("br",{}),c]})};function ru(e){return e.integration,(0,eG.jsx)(eG.Fragment,{children:(0,eG.jsxs)(tV,{children:[(0,eG.jsxs)(ri,{children:["Requirements email sent to GCIO",(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#00C45B"})]}),(0,eG.jsxs)(ri,{children:[(0,eG.jsx)("p",{children:"Access to prod"}),(0,eG.jsx)(ra,{})]})]})})}var rd=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,a=t.hasGithub,i=t.awaitingGithubProd,s=t.githubProdApplying,o=t.githubApproved;if(!r||!a)return null;var c=null;return s?c=(0,eG.jsx)(rs,{integration:n}):o?c=(0,eG.jsx)(ro,{}):i&&(c=(0,eG.jsx)(ru,{integration:n})),(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)("br",{}),(0,eG.jsx)(rn,{children:"Access to GitHub Prod"}),(0,eG.jsx)("br",{}),c]})},rp=t(67302),rh=eT.ZP.label(ec||(ec=(0,eN.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"])));eT.ZP.div(el||(el=(0,eN.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"});var rf=eT.ZP.div(eu||(eu=(0,eN.Z)(["\n  text-align: center;\n"]))),rx=eT.ZP.div(ed||(ed=(0,eN.Z)(["\n  height: var(--field-top-spacing);\n"]))),rv=function(){return(0,eG.jsxs)(rf,{children:[(0,eG.jsx)(rx,{}),(0,eG.jsx)(eY.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},rm=(0,nr.hU)(function(e){var n,t,r,a,i=e.selectedRequest,s=e.alert,o=(0,eE.useState)(!1),c=(o[0],o[1]),l=(0,eE.useState)(!1),u=l[0],d=l[1],p=(0,eE.useState)(!1),h=p[0],f=p[1],x=(0,eE.useState)(""),v=x[0],m=x[1],g=(0,eE.useState)([]),b=g[0],j=g[1],y=(0,eE.useState)([]),w=y[0],Z=y[1],k=(0,eE.useState)(void 0),P=k[0];k[1];var S=(0,eE.useState)("dev"),C=S[0],I=S[1],D=(0,eE.useState)(!1),O=D[0],N=D[1],F=(null==i?void 0:i.environments)||[],R=(0,eE.useCallback)(nU()((n=(0,eO.Z)(eR().mark(function e(n){var t,r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),m("Assigning role..."),N(!1),e.next=5,e4({environment:C,integrationId:i.id,username:n6(i.clientId),roleNames:n});case 5:if(t=e.sent,r=(0,eH.Z)(t,2)[1],f(!1),!r){e.next=15;break}return N(!0),m("Failed to update roles."),e.abrupt("return",!1);case 15:return m("Last saved at ".concat(new Date().toLocaleString())),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==i?void 0:i.id,C,P]),E=(t=(0,eO.Z)(eR().mark(function e(n,t){var r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"clear"===t.action||(r="remove-value"===t.action?w.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,nz.Z)(w.slice(0,-1)):[].concat((0,nz.Z)(w),[null===(a=t.option)||void 0===a?void 0:a.value])),!(w.length!==r.length)){e.next=7;break}return e.next=5,R(r);case 5:e.sent&&Z(r);case 7:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),T=(r=(0,eO.Z)(eR().mark(function e(){var n,t,r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c(!0);case 4:return e.next=6,e0({environment:C,integrationId:i.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,eH.Z)(n,2))[0],t[1]&&s.show({variant:"danger",content:"Failed to fetch roles."}),j(null===r?[]:r.map(function(e){return e.name})),c(!1);case 14:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),B=(a=(0,eO.Z)(eR().mark(function e(n){var t,r,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(!0);case 2:return e.next=4,e3({environment:C,integrationId:i.id,username:n});case 4:if(t=e.sent,a=(r=(0,eH.Z)(t,2))[0],!r[1]){e.next=12;break}return s.show({variant:"danger",content:"Failed to fetch roles."}),d(!1),e.abrupt("return");case 12:return e.next=14,Z(a||[]);case 14:d(!1);case 15:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});return(0,eE.useEffect)(function(){T(),m(""),B(n6(i.clientId))},[C]),(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(rp.Z,{children:(0,eG.jsx)(nZ.bZ,{variant:"info",closable:!1,"data-testid":"assign-svc-acct-role-risk-alert",children:(0,eG.jsxs)("span",{className:"normal",children:["There may be a security risk if you rely on client roles of a service account,"," ",(0,eG.jsx)(ns.default,{external:!0,href:(0,no.eO)("Creating-a-Role#service-account-role-management"),children:"click to visit our wiki page"})]})})}),(0,eG.jsxs)(nZ.mQ,{onChange:function(e){I(e)},activeKey:C,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eG.jsx)("br",{}),F.map(function(e){return(0,eG.jsx)(nZ.OK,{tab:ny()(e),children:(0,eG.jsx)(eW.ZP,{cols:10,children:(0,eG.jsxs)(eW.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eG.jsx)(eW.ZP.Col,{span:5,children:(0,eG.jsx)(nV.Z,{headers:[{accessor:"projectName",Header:"Service Account"}],data:[{projectName:i.projectName}],colfilters:[],activateRow:te(),rowSelectorKey:"projectName"})}),(0,eG.jsx)(eW.ZP.Col,{span:5,children:u?(0,eG.jsx)(rv,{}):(0,eG.jsxs)("div",{children:[(0,eG.jsx)(rh,{children:"Assign Service Account to a Role"}),(0,eG.jsx)("div",{"data-testid":"assign-svc-acct-to-role-select",children:(0,eG.jsx)(nk.ZP,{value:w.map(function(e){return{value:e,label:e}}),options:b.map(function(e){return{value:e,label:e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:E})}),(0,eG.jsx)(nZ.Ad,{saving:h,content:v,variant:O?"error":"success"})]})})]})})},e)})]})]})});function rg(){return(0,eG.jsxs)(tV,{children:[(0,eG.jsxs)(ri,{children:["Requirements email sent to DIT",(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#00C45B"})]}),(0,eG.jsxs)(ri,{children:[(0,eG.jsxs)("p",{children:["Please reach out to DIT if you do not hear back within the next 2-3 business days (",(0,eG.jsx)(ns.default,{href:"mailto:ditp.support@gov.bc.ca",children:"ditp.support@gov.bc.ca"}),")."]}),(0,eG.jsx)(eV.G,{icon:e_.FU$,color:"#b3b3b3"})]}),(0,eG.jsxs)(ri,{children:[(0,eG.jsx)("p",{children:"Access to prod"}),(0,eG.jsx)(ra,{})]})]})}var rb=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,a=t.hasDigitalCredential,i=t.awaitingDigitalCredentialProd,s=t.digitalCredentialProdApplying,o=t.digitalCredentialApproved;if(!r||!a)return null;var c=null;return s?c=(0,eG.jsx)(rs,{integration:n}):o?c=(0,eG.jsx)(ro,{}):i&&(c=(0,eG.jsx)(rg,{})),(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)("br",{}),(0,eG.jsx)(rn,{children:"Access to Digital Credential Prod"}),(0,eG.jsx)("br",{}),c]})};function rj(e){return e.integration,(0,eG.jsx)(eG.Fragment,{children:(0,eG.jsxs)(tV,{children:[(0,eG.jsxs)(ri,{children:["Requirements email sent to IDIM",(0,eG.jsx)(eV.G,{icon:e_.f8k,color:"#00C45B"})]}),(0,eG.jsxs)(ri,{children:[(0,eG.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,eG.jsx)(ns.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,eG.jsx)(eV.G,{icon:e_.FU$,color:"#b3b3b3"})]}),(0,eG.jsxs)(ri,{children:[(0,eG.jsx)("p",{children:"Access to prod"}),(0,eG.jsx)(ra,{})]})]})})}var ry=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,a=t.hasBcServicesCard,i=t.awaitingBcServicesCardProd,s=t.bcServicesCardProdApplying,o=t.bcServicesCardApproved;if(!r||!a)return null;var c=null;return s?c=(0,eG.jsx)(rs,{integration:n}):o?c=(0,eG.jsx)(ro,{}):i&&(c=(0,eG.jsx)(rj,{integration:n})),(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)("br",{}),(0,eG.jsx)(rn,{children:"Access to BC Services Card Prod"}),(0,eG.jsx)("br",{}),c]})},rw=t(29009),rZ=t(41087),rk=t(14195),rP=t(3023),rS=t(75358),rC=t(26050),rI=t(33558),rD=t(18242),rO=t(84642),rN=(m=(0,eO.Z)(eR().mark(function e(n,t,r,a){var i;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eJ.e.get("requests/".concat(n,"/metrics?env=").concat(t,"&fromDate=").concat(r,"&toDate=").concat(a)).then(function(e){return null==e?void 0:e.data});case 3:return i=e.sent,e.abrupt("return",[i,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r){return m.apply(this,arguments)}),rF=(g=(0,eO.Z)(eR().mark(function e(n,t,r,a,i,s){var o;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,eJ.e)({url:"requests/".concat(n,"/logs?env=").concat(t,"&start=").concat(r,"&end=").concat(a),method:"GET",responseType:"blob",onDownloadProgress:i,signal:null==s?void 0:s.signal}).then(function(e){return null==e?void 0:e.data});case 3:return o=e.sent,e.abrupt("return",[o,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r,a,i){return g.apply(this,arguments)}),rR=t(9198),rE=t.n(rR);t(459);var rT=t(31879);function rB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rA(e){return(0,eG.jsx)(eG.Fragment,{children:(0,eG.jsx)(rE(),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rB(Object(t),!0).forEach(function(n){(0,eB.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({dateFormat:"yyyy-MM-dd",customInput:(0,eG.jsx)(rz,{label:e.label}),enableTabLoop:!1,popperPlacement:"bottom-start",maxDate:new Date},e))})}function rz(e){var n=e.value,t=e.onClick,r=e.label;return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(rT.Z,{style:{fontWeight:"bold"},children:r}),(0,eG.jsxs)("div",{className:"input-group",children:[(0,eG.jsx)("input",{type:"text",className:"form-control",value:n,onClick:t,readOnly:!0}),(0,eG.jsx)("div",{className:"input-group-append",children:(0,eG.jsx)("span",{className:"input-group-text",style:{height:"100%"},children:(0,eG.jsx)(eV.G,{icon:e_.fT7})})})]})]})}var rG=t(9206),rU=eT.ZP.div(ep||(ep=(0,eN.Z)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  padding-right: 15px;\n  & > * {\n    margin-left: 15px;\n  }\n"])));eT.ZP.label(eh||(eh=(0,eN.Z)(["\n  margin-bottom: 2px;\n"])));var rq=eT.ZP.div(ef||(ef=(0,eN.Z)(["\n  height: var(--field-top-spacing);\n"])));eT.ZP.span(ex||(ex=(0,eN.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"]))),(0,eT.ZP)(eV.G)(ev||(ev=(0,eN.Z)(["\n  margin-right: 20px;\n"]))),eT.ZP.div(em||(em=(0,eN.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"]))),eT.ZP.hr(eg||(eg=(0,eN.Z)(["\n  background-color: black;\n"])));var rL=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},rM="December 01, 2023",rK=(0,nr.hU)(function(e){var n,t=e.integration,r=e.alert,a=(0,eE.useState)("dev"),i=a[0],s=a[1],o=(null==t?void 0:t.environments)||[],c=(0,eE.useState)([]),l=c[0],u=c[1],d=(0,eE.useState)(!1);d[0],d[1];var p=(0,eE.useState)((0,nn.F3)(14)),h=p[0],f=p[1],x=(0,eE.useState)(new Date),v=x[0],m=x[1],g=(0,eE.useContext)(tg.SurveyContext),b=function(e){f(e)},j=function(e){m(e)},y=(0,eE.useCallback)(nU()((n=(0,eO.Z)(eR().mark(function e(n,a,i){var s,o,c;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rN(null==t?void 0:t.id,i,n,a);case 2:s=e.sent,c=(o=(0,eH.Z)(s,2))[0],o[1]?r.show({variant:"danger",content:"Failed to fetch metrics"}):(u(c),c.length>0&&(null==g||g.setShowSurvey(!0,"viewMetrics")));case 7:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)})),[null==t?void 0:t.clientId,i,h,v]);return(0,eE.useEffect)(function(){y(rL(h),rL(v),i)},[null==t?void 0:t.clientId,i,h,v]),(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(rq,{}),(0,eG.jsx)("div",{children:(0,eG.jsxs)(rU,{children:[(0,eG.jsx)(rA,{placeholderText:"Start Date",selected:new Date(h),onChange:function(e){return b(e)},minDate:new Date(rM),maxDate:v,label:"Start Date"}),(0,eG.jsx)(rA,{placeholderText:"End Date",selected:new Date(v),onChange:function(e){return j(e)},minDate:h,label:"End Date"})]})}),(0,eG.jsxs)(nZ.mQ,{onChange:function(e){s(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eG.jsx)("br",{}),o.map(function(e){return(0,eG.jsx)(nZ.OK,{tab:ny()(e),children:(0,eG.jsx)("div",{style:{width:"100%",height:300},children:(null==l?void 0:l.length)>0?(0,eG.jsx)(rw.h,{children:(0,eG.jsxs)(rZ.v,{data:l,margin:{top:20,right:20,bottom:30,left:20},children:[(0,eG.jsx)(rk.q,{strokeDasharray:"3 3"}),(0,eG.jsx)(rP.K,{dataKey:"event",tick:{fontSize:10},label:{value:"Events",position:"insideBottomRight"}}),(0,eG.jsx)(rS.B,{dataKey:"count",label:{value:"Count",angle:-90,position:"insideLeft"}}),(0,eG.jsx)(rC.u,{}),(0,eG.jsx)(rI.D,{}),(0,eG.jsx)(rD.$,{dataKey:"count",fill:"#0d6efd",barSize:30,label:{fill:"#0d6efd",fontSize:20,position:"top"},background:{fill:"#eee"}})]})}):(0,eG.jsx)("div",{style:{textAlign:"center"},children:(0,eG.jsx)(rO.x,{children:"No data available yet!"})})})},e)})]}),(0,eG.jsxs)(na.$,{children:["This tab was released ",rM,". Please refer to"," ",(0,eG.jsx)(rG.rU,{href:"https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html/server_administration_guide/auditing_and_events#event_types",external:!0,children:"here"})," ","for event type details."]})]})}),rH=eT.ZP.div(eb||(eb=(0,eN.Z)(["\n  display: flex;\n  flex-direction: row;\n  column-gap: 1.5em;\n  justify-content: center;\n  min-width: 20em;\n  margin: 0;\n  padding: 0;\n"]))),rV=(0,eT.ZP)(nf.default)(ej||(ej=(0,eN.Z)(["\n  width: 150px;\n  text-align: center;\n"]))),r_=eT.ZP.form(ey||(ey=(0,eN.Z)(["\n  display: flex;\n  flex-direction: column;\n  row-gap: 1.5em;\n\n  .header {\n    margin-top: 1em;\n    display: flex;\n    align-items: center;\n    p {\n      font-weight: bold;\n      padding-right: 0.4em;\n      margin: 0;\n      font-size: 18px;\n    }\n  }\n\n  .bold {\n    font-weight: bold;\n  }\n\n  .env-controls {\n    margin: 0;\n    legend {\n      font-size: unset;\n      font-weight: bold;\n    }\n\n    input {\n      margin-right: 0.2em;\n    }\n\n    label {\n      margin-right: 1em;\n    }\n  }\n\n  .date-picker-container {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    column-gap: 1em;\n  }\n\n  select {\n    margin-left: 0.5em;\n    width: 200px;\n  }\n\n  .button-container {\n    display: flex;\n    flex-diretion: row;\n    align-items: center;\n\n    p {\n      margin: 0;\n      margin-left: 1em;\n    }\n  }\n\n  .error-text {\n    font-size: 14px;\n    color: red;\n    margin: 0;\n    height: 1em;\n  }\n"]))),rW=function(e,n){var t=new Blob([JSON.stringify(n)],{type:"text/json"}),r=document.createElement("a");r.download=e,r.href=window.URL.createObjectURL(t),r.dataset.downloadurl=["text/json",r.download,r.href].join(":");var a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});r.dispatchEvent(a),r.remove()},rY={dev:"Development",test:"Test",prod:"Production"},rJ=new Date("February 13, 2024"),r$=(0,nr.hU)(function(e){var n,t=e.integration,r=e.alert,a=(0,eE.useState)("dev"),i=a[0],s=a[1],o=(null==t?void 0:t.environments)||[],c=(0,eE.useState)(!1),l=c[0],u=c[1],d=(0,eE.useState)((0,nn.F3)(1)),p=d[0],h=d[1],f=(0,eE.useState)(new Date),x=f[0],v=f[1],m=(0,eE.useState)(""),g=m[0],b=m[1],j=(0,eE.useState)(0),y=j[0],w=j[1],Z=(0,eE.useState)(new Date),k=Z[0],P=Z[1],S=(0,eE.useState)(),C=S[0],I=S[1],D=(0,eE.useContext)(tg.SurveyContext);(0,eE.useEffect)(function(){p&&(Date.now()-p.getTime()>1728e5?P(new Date(p.getTime()+1728e5)):P(new Date),x&&(x.getTime()<p.getTime()||x.getTime()-p.getTime()>1728e5)&&v(null))},[p]),(0,eE.useEffect)(function(){x&&p&&x.getTime()<p.getTime()&&b("Please ensure your end date is later than your start date.")},[x]);var O=function(e){b(""),h(e)},N=function(e){b(""),v(e)},F=function(e){var n=Math.floor(e.loaded/e.total*100);n!==y&&w(n)},R=function(){s("dev"),h((0,nn.F3)(1)),v(new Date)};(0,eE.useEffect)(function(){R()},[t.clientId]);var E=function(e){window.location.hash=e?"logs-modal":""},T=(n=(0,eO.Z)(eR().mark(function e(n){var a,s,o,c,l,d,h,f,v,m;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),null==C||C.abort(),I(a=new AbortController),E(!0),e.prev=5,!(!p||!x)){e.next=9;break}return b("Please select a date range."),e.abrupt("return");case 9:return u(!0),e.next=12,rF(t.id,i,p,x,F,a);case 12:if(s=e.sent,c=(o=(0,eH.Z)(s,2))[0],!(l=o[1])){e.next=22;break}if("ERR_CANCELED"!==l.code){e.next=19;break}return e.abrupt("return");case 19:r.show({variant:"danger",fadeOut:1e4,closable:!0,content:null!==(d=null==l?void 0:null===(h=l.response)||void 0===h?void 0:null===(f=h.data)||void 0===f?void 0:f.message)&&void 0!==d?d:"Error fetching logs."}),e.next=28;break;case 22:return r.show({variant:"success",fadeOut:1e4,closable:!0,content:null!==(v=null==c?void 0:c.message)&&void 0!==v?v:"Downloaded logs."}),e.next=25,c.text();case 25:m=e.sent,rW("".concat(t.clientId,"-").concat(p.toLocaleString(),"-").concat(x.toLocaleString(),".json"),JSON.parse(m)),null==D||D.setShowSurvey(!0,"downloadLogs");case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(5),console.error("Exception parsing file");case 33:return e.prev=33,u(!1),w(0),E(!1),e.finish(33);case 38:case"end":return e.stop()}},e,null,[[5,30,33,38]])})),function(e){return n.apply(this,arguments)}),B=function(e){s(e.target.value)};return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsxs)(r_,{onSubmit:T,children:[(0,eG.jsxs)("div",{className:"header",children:[(0,eG.jsx)("p",{children:"Download Logs"}),(0,eG.jsx)(n_.Z,{content:"You can download upto 25,000 logs at a time. Result will indicate if all logs in the selected time interval were retrieved or a smaller time interval is required."})]}),(0,eG.jsxs)("fieldset",{className:"env-controls",disabled:l,children:[(0,eG.jsx)("legend",{children:"Select an Environment"}),o.map(function(e){return(0,eG.jsxs)("span",{children:[(0,eG.jsx)("input",{id:"radio-".concat(e),type:"radio",name:"environmentSelection",value:e,checked:i===e,onChange:B}),(0,eG.jsx)("label",{htmlFor:"radio-".concat(e),children:rY[e]})]},e)})]}),(0,eG.jsxs)("div",{children:[(0,eG.jsxs)("div",{className:"date-picker-container",children:[(0,eG.jsx)(rA,{placeholderText:"Start Date",selected:p,onChange:function(e){return O(e)},minDate:rJ,shouldCloseOnSelect:!1,label:"Start Date",showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",disabled:l}),(0,eG.jsx)(rA,{placeholderText:"End Date",selected:x,onChange:function(e){return N(e)},minDate:p,maxDate:k,label:"End Date",shouldCloseOnSelect:!1,showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",disabled:l})]}),(0,eG.jsx)("p",{className:"error-text",children:g})]}),(0,eG.jsx)("div",{className:"button-container",children:(0,eG.jsx)(rV,{type:"submit",disabled:g||l,children:"Download"})})]}),(0,eG.jsx)(nx.Z,{showConfirm:!1,title:"Downloading Logs",onClose:function(){null==C||C.abort(),u(!1),w(0)},content:(0,eG.jsxs)(rH,{children:[(0,eG.jsx)(eY.rj,{color:"black",visible:l,height:25,width:25,wrapperStyle:{justifyContent:"center"}}),l&&0===y&&(0,eG.jsx)("p",{children:"Querying logs..."}),l&&0!==y?(0,eG.jsxs)("p",{children:[y,"% downloaded."]}):null]}),id:"logs-modal"})]})}),rQ=eT.ZP.div(ew||(ew=(0,eN.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  ","\n"])),function(e){return e.short?"max-width: 800px;":""});eT.ZP.div(eZ||(eZ=(0,eN.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  margin-bottom: 1rem;\n"])));var rX=eT.ZP.div(ek||(ek=(0,eN.Z)(["\n  text-align: center;\n"]))),r0=eT.ZP.div(eP||(eP=(0,eN.Z)(["\n  height: var(--field-top-spacing);\n"]))),r1=eT.ZP.div(eS||(eS=(0,eN.Z)(["\n  margin-bottom: 60px;\n"]))),r2="tech-details",r3="role-management",r5="user-role-management",r4="service-account-role-management",r8="secret",r7="history",r6="metrics",r9="Logs",ae=function(e){var n=e.integration,t=e.children;return(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsxs)("h2",{children:["INTEGRATION DETAILS - ",re()(String(n.id),8,"0")]}),(0,eG.jsx)(nZ.OC,{children:t})]})},an=function(e){var n=e.integration,t=e.approvalContext;return(0,eG.jsx)(nZ.OK,{tab:"Technical Details",children:(0,eG.jsx)(rQ,{short:!1,children:(0,eG.jsx)(eW.ZP,{cols:15,children:(0,eG.jsxs)(eW.ZP.Row,{gutter:[],children:[(0,eG.jsx)(eW.ZP.Col,{span:7,children:(0,eG.jsx)(nh,{integration:n})}),(0,eG.jsx)(eW.ZP.Col,{span:1}),(0,eG.jsxs)(eW.ZP.Col,{span:7,children:[(0,eG.jsx)(rl,{integration:n,approvalContext:t}),(0,eG.jsx)(rd,{integration:n,approvalContext:t}),(0,eG.jsx)(rb,{integration:n,approvalContext:t}),(0,eG.jsx)(ry,{integration:n,approvalContext:t})]})]})})})},r2)},at=function(e){var n=e.integration;return(0,eG.jsx)(nZ.OK,{tab:"Role Management",children:(0,eG.jsxs)(rQ,{children:[(0,eG.jsx)("br",{}),(0,eG.jsxs)("div",{children:["Please visit our"," ",(0,eG.jsx)(ns.default,{external:!0,href:(0,no.eO)("Creating-a-Role"),children:"wiki page"})," ","for more information on roles."]}),(0,eG.jsx)(tj,{integration:n})]})},r3)},ar=function(e){var n=e.integration;return(0,eG.jsx)(nZ.OK,{tab:"Assign Users to Roles",children:(0,eG.jsx)(rQ,{children:(0,eG.jsx)(tG,{selectedRequest:n})})},r5)},aa=function(e){var n=e.integration;return(0,eG.jsx)(nZ.OK,{tab:"Assign Service Account to Roles",children:(0,eG.jsx)(rQ,{children:(0,eG.jsx)(rm,{selectedRequest:n})})},r4)},ai=function(e){var n=e.integration;return(0,eG.jsx)(nZ.OK,{tab:"Secrets",children:(0,eG.jsx)(rQ,{short:!0,children:(0,eG.jsx)(nb,{selectedRequest:n})})},r8)},as=function(e){var n=e.integration;return(0,eG.jsx)(nZ.OK,{tab:"Metrics",children:(0,eG.jsx)(rQ,{short:!1,children:(0,eG.jsx)(rK,{integration:n})})},r6)},ao=function(e){var n=e.integration;return(0,eG.jsx)(nZ.OK,{tab:"Logs",children:(0,eG.jsx)(rQ,{short:!1,children:(0,eG.jsx)(r$,{integration:n})})},r9)},ac=function(e){var n=e.integration;return(0,eG.jsx)(nZ.OK,{tab:"Change History",children:(0,eG.jsx)(rQ,{short:!0,children:(0,eG.jsx)(t7,{requestId:n.id})})},r7)},al=function(e){var n,t,r=e.integration,a=(0,eE.useState)(r2),i=a[0],s=a[1];if(!r)return null;var o=r.status,c=r.environments,l=r.bceidApproved,u=void 0!==l&&l,d=r.githubApproved,p=void 0!==d&&d,h=r.digitalCredentialApproved,f=void 0!==h&&h,x=r.bcServicesCardApproved,v=void 0!==x&&x,m=(0,tU.n)(o||"draft"),g=(void 0===c?[]:c).includes("prod"),b=(0,t6.Jx)(r),j=(0,t6.dV)(r),y=(0,t6.S3)(r),w=(0,t6.e$)(r),Z=(0,nn.he)(r),k=(0,nn.R5)(r),P=(0,nn.jt)(r),S=(0,nn.kF)(r),C="gold"===r.serviceType,I="service-account"!==r.authType,D="both"===r.authType;if("In Draft"===m)return(0,eG.jsx)(ae,{integration:r,children:(0,eG.jsxs)(eK,{variant:"info",children:[(0,eG.jsx)("div",{children:(0,eG.jsx)("strong",{children:"Your request has not been submitted."})}),(0,eG.jsx)("div",{children:'To complete your request, click "Edit" button.'})]})});var O=[],N=[],F=(null===(n=r.devIdps)||void 0===n?void 0:n.length)&&(null===(t=r.devIdps)||void 0===t?void 0:t.every(function(e){return["digitalcredential","bcservicescard"].includes(e)}));"Submitted"===m?["planFailed","applyFailed"].includes(r.status)?(O.push((0,eG.jsx)(nZ.OK,{tab:"Technical Details",children:(0,eG.jsx)(rQ,{short:!1,children:(0,eG.jsx)("div",{style:{display:"inline-flex",margin:"20px 0 20px 0",background:"#FFCCCB",borderRadius:"5px"},children:(0,eG.jsx)("div",{style:{padding:5},children:(0,eG.jsxs)(na.B,{children:["Your request for an integration could not be completed. Please"," ",(0,eG.jsx)(ns.default,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})})})},r2)),N.push(r2)):(O.push((0,eG.jsx)(nZ.OK,{tab:"Technical Details",children:(0,eG.jsx)(rQ,{short:!1,children:(0,eG.jsxs)(eW.ZP,{cols:15,children:[(0,eG.jsx)("br",{}),(0,eG.jsxs)(rX,{children:[(0,eG.jsx)(r0,{}),(0,eG.jsx)(eY.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0}),(0,eG.jsx)(r1,{})]})]})})},r2)),N.push(r2)):"Completed"===m&&(O.push(an({integration:r,approvalContext:{hasProd:g,hasBceid:b,hasGithub:j,hasDigitalCredential:y,hasBcServicesCard:w,bceidApproved:u,githubApproved:p,digitalCredentialApproved:f,bcServicesCardApproved:v,awaitingBceidProd:b&&g&&!u,awaitingGithubProd:j&&g&&!p,awaitingDigitalCredentialProd:y&&g&&!f,awaitingBcServicesCardProd:w&&g&&!v,bceidProdApplying:Z,githubProdApplying:k,digitalCredentialProdApplying:P,bcServicesCardProdApplying:S}})),N.push(r2),F||(O.push(at({integration:r})),N.push(r3)),C&&I&&!F&&(O.push(ar({integration:r})),N.push(r5)),C&&(!I||D)&&(O.push(aa({integration:r})),N.push(r4)),r.publicAccess||(O.push(ai({integration:r})),N.push(r8)),O.push(ac({integration:r})),N.push(r7),O.push(as({integration:r})),N.push(r6),O.push(ao({integration:r})),N.push(r9));var R=i;return N.includes(i)||(R=N[0]),(0,eG.jsx)(ae,{integration:r,children:(0,eG.jsx)(nZ.mQ,{activeKey:R,onChange:function(e){s(e)},tabBarGutter:30,destroyInactiveTabPane:!0,children:O})})},au=t(11163),ad=t(35927),ap=t(24791),ah=eT.ZP.tr(eC||(eC=(0,eN.Z)(["\n  float: right;\n  padding-right: 0.5em;\n"]))),af=eT.ZP.p(eI||(eI=(0,eN.Z)(["\n  margin: 0;\n"])));function ax(){return(0,eG.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var av=function(e){return re()(String(e),8,"0")},am=function(e){var n=e.handleNewIntegrationClick,t=e.integrations;return t&&(null==t?void 0:t.length)!=0?(0,eG.jsx)(nZ.zx,{size:"medium","data-testid":"request-integration",onClick:n,variant:"callout",children:"+ Request SSO Integration"}):(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)("p",{children:(0,eG.jsx)("b",{children:"To request an integration for a Standard Realm, you’ll need the following information:"})}),(0,eG.jsxs)("div",{style:{background:"#D9EDFD",textAlign:"center",padding:"16px"},children:[(0,eG.jsxs)(eW.ZP,{cols:2,style:{textAlign:"left"},children:[(0,eG.jsxs)(eW.ZP.Row,{collapse:"992",gutter:[],align:"top",children:[(0,eG.jsxs)(eW.ZP.Col,{span:1,children:[(0,eG.jsx)(nZ.wk,{number:1,title:"Project Information",children:null}),(0,eG.jsxs)(af,{children:[(0,eG.jsx)(eV.G,{icon:e_.LEp})," Project Name"]}),(0,eG.jsxs)(af,{children:[(0,eG.jsx)(eV.G,{icon:e_.LEp})," Project Team Members (Optional)"]}),(0,eG.jsxs)(af,{children:[(0,eG.jsx)(eV.G,{icon:e_.LEp})," Product Owner or Technical Contact"]})]}),(0,eG.jsxs)(eW.ZP.Col,{span:1,children:[(0,eG.jsx)(nZ.wk,{number:2,title:"Technical Info",children:null}),(0,eG.jsxs)(af,{children:[(0,eG.jsx)(eV.G,{icon:e_.LEp})," Client type (",(0,eG.jsx)(ns.default,{href:(0,no.eO)("Useful-References#client"),children:"Public or Confidential, learn more"}),")"]}),(0,eG.jsxs)(af,{children:[(0,eG.jsx)(eV.G,{icon:e_.LEp})," Identity Provider (IDIR, Azure, BCeID or Basic)"]}),(0,eG.jsxs)(af,{children:[(0,eG.jsx)(eV.G,{icon:e_.LEp})," Environments (Development, Test, Production)"]}),(0,eG.jsxs)(af,{children:[(0,eG.jsx)(eV.G,{icon:e_.LEp})," Redirect URIs for selected environments"]})]})]}),(0,eG.jsx)("p",{style:{marginTop:"1.25rem"},children:"*You’ll be able to save and return your integration request, anytime throughout the request form."})]}),(0,eG.jsx)(nZ.zx,{size:"medium","data-testid":"request-integration",onClick:n,variant:"callout",children:"+ Request SSO Integration"})]})]})},ag=(0,nr.hU)(function(e){var n,t,r,a=e.setIntegration,i=e.setIntegrationCount,s=e.alert,o=(0,au.useRouter)(),c=o.query.integr,l=(0,eE.useState)(!0),u=l[0],d=l[1],p=(0,eE.useState)(!1),h=p[0],f=p[1],x=(0,eE.useState)([]),v=x[0],m=x[1],g=(0,eE.useState)(c&&Number(c)||void 0),b=g[0],j=g[1],y=(n=(0,eO.Z)(eR().mark(function e(){return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.push("/request");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),w=function(e){j(e.id),a(e)},Z=function(e){var n=e||[];if(m(n),i(n.length),b){var t=e.find(function(e){return(null==e?void 0:e.id)===b});t?w(t):(null==e?void 0:e.length)>0&&w(e[0])}else(null==e?void 0:e.length)>0&&w(e[0])},k=(t=(0,eO.Z)(eR().mark(function e(){var n,t,r;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,(0,n7.XJ)();case 3:n=e.sent,r=(t=(0,eH.Z)(n,2))[0],f(!!t[1]),Z(r||[]),d(!1);case 10:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,eE.useEffect)(function(){k(),o.replace("/my-dashboard/integrations")},[]),(0,eE.useEffect)(function(){return(0,nn.rn)(v||[])&&(clearInterval(r),r=setInterval((0,eO.Z)(eR().mark(function e(){var n,t,a;return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n7.XJ)();case 2:n=e.sent,a=(t=(0,eH.Z)(n,2))[0],t[1]?clearInterval(r):Z(a||[]);case 7:case"end":return e.stop()}},e)})),5e3)),function(){r&&clearInterval(r)}},[v,b]);var P=h?(0,eG.jsx)(ap.q1,{}):v&&0!==v.length?(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(nZ.h4,{size:"lg",children:"INTEGRATIONS"}),(0,eG.jsx)(nV.Z,{headers:[{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"status",Header:"Status"},{accessor:"authType",Header:"Usecase"},{accessor:"serviceType",Header:"Service Type"},{accessor:"actions",Header:(0,eG.jsx)(ax,{}),disableSortBy:!0}],data:null==v?void 0:v.map(function(e){return{id:av(e.id),projectName:e.projectName,status:(0,tU.n)(e.status||"draft"),authType:ad.F[e.authType||"browser-login"],serviceType:"Gold",actions:(0,eG.jsx)(ah,{children:(0,eG.jsx)(nH.ZP,{request:e,onDelete:function(n,t){t?s.show({variant:"danger",content:"Failed to delete integration ".concat(e.projectName,".")}):k()},defaultActiveColor:"#fff",delIconStyle:{marginLeft:"7px"}})})}}),activateRow:function(e){var n=e.cells[0].value;v.forEach(function(e){e.id==n&&w(e)})},activeSelector:b&&av(b),rowSelectorKey:"id",colfilters:[]})]}):(0,eG.jsx)(ap.Vs,{message:"No Requests Submitted"});return u?(0,eG.jsx)(t4.Z,{}):(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)("br",{}),(0,eG.jsx)(am,{handleNewIntegrationClick:y,integrations:v}),(0,eG.jsx)("br",{}),(0,eG.jsx)("br",{}),P]})}),ab=t(49936),aj=eT.ZP.div(eD||(eD=(0,eN.Z)(["\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n  flex: 1;\n"]))),ay=function(e){e.session;var n,t=(0,au.useRouter)(),r=(0,eE.useState)(null),a=r[0],i=r[1],s=(0,eE.useState)(1),o=s[0],c=s[1],l=(0,eE.useState)(!1),u=(l[0],l[1]),d="integration-failed-modal",p=(n=(0,eO.Z)(eR().mark(function e(){return eR().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.location.hash=d);case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),h=(0,eE.useState)(""),f=h[0],x=h[1];return(0,eE.useEffect)(function(){var e;x(t.query.requestId),(null==t?void 0:null===(e=t.query)||void 0===e?void 0:e.integrationFailedMessageModal)==="true"&&(u(!0),p())},[t.query.showModal]),(0,eG.jsxs)(eG.Fragment,{children:[(0,eG.jsx)(ab.Z,{tab:"integrations",leftPanel:function(){return(0,eG.jsx)(ag,{setIntegration:i,setIntegrationCount:c})},rightPanel:function(){return a&&(0,eG.jsx)(al,{integration:a})},showResizable:o>0}),(0,eG.jsx)(nx.Z,{title:"".concat(f," - Integration request failed"),icon:e_.eHv,id:d,content:(0,eG.jsxs)("div",{children:[(0,eG.jsx)("div",{children:(0,eG.jsx)("p",{children:"The integration request could not be completed. Please contact the Pathfinder SSO Team."})}),(0,eG.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},children:[(0,eG.jsx)(aj,{children:(0,eG.jsx)("div",{children:(0,eG.jsxs)("a",{href:"https://chat.developer.gov.bc.ca/channel/sso",target:"_blank",title:"Rocket Chat",style:{color:"#0d6efd"},children:[(0,eG.jsx)(eV.G,{size:"1x",icon:e_.Z6I,color:"#0d6efd"})," Rocketchat"]})})}),(0,eG.jsx)(aj,{children:(0,eG.jsx)("div",{children:(0,eG.jsxs)("a",{href:"mailto:bcgov.sso@gov.bc.ca",title:"Pathfinder SSO",style:{color:"#0d6efd"},children:[(0,eG.jsx)(eV.G,{size:"1x",icon:e_.FU$,color:"#0d6efd"})," Email"]})})})]})]}),showCancel:!1,showConfirm:!1,closable:!0})]})}},87414:function(e,n,t){"use strict";t.d(n,{v:function(){return c}});var r,a=t(50029),i=t(87794),s=t.n(i),o=t(10433),c=(r=(0,a.Z)(s().mark(function e(n){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.e.post("events",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return r.apply(this,arguments)})},27008:function(e,n,t){"use strict";t.d(n,{A_:function(){return P},H0:function(){return C},Jl:function(){return F},OS:function(){return D},Uw:function(){return R},WN:function(){return N},XJ:function(){return S},ct:function(){return I},hG:function(){return k},zD:function(){return O}});var r,a,i,s,o,c,l,u,d,p,h=t(50029),f=t(87794),x=t.n(f),v=t(10433),m=t(75316),g=t.n(m),b=t(25751),j=t.n(b),y=t(76427),w=t.n(y),Z=t(58766),k=(r=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.post("requests",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,Z.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return r.apply(this,arguments)}),P=(a=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.post("request",{requestId:j()(n)?parseInt(n):n}).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,Z.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return a.apply(this,arguments)}),S=(i=(0,h.Z)(x().mark(function e(){var n,t,r=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={params:{include:r.length>0&&void 0!==r[0]?r[0]:"active"}},e.prev=2,e.next=5,v.e.get("requests",n).then(function(e){return e.data});case 5:return t=e.sent,t=g()(t,["createdAt"],["desc"]),e.abrupt("return",[t.map(Z.UB),null]);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",(0,v.z)(e.t0));case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(){return i.apply(this,arguments)}),C=(s=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.get("team-integrations/".concat(n)).then(function(e){return e.data});case 3:return t=e.sent,t=g()(t,["createdAt"],["desc"]),e.abrupt("return",[t.map(Z.UB),null]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return s.apply(this,arguments)}),I=(o=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.get("requests/".concat(n,"/resubmit")).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,Z.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return o.apply(this,arguments)}),D=(c=(0,h.Z)(x().mark(function e(n,t){var r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.post("requests/".concat(n,"/restore"),{email:t}).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[(0,Z.UB)(r),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return c.apply(this,arguments)}),O=(l=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.post("requests-all",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[{count:t.count,rows:t.rows.map(Z.UB)},null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return l.apply(this,arguments)}),N=(u=(0,h.Z)(x().mark(function e(n){var t,r,a,i,s,o=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]&&o[1],e.prev=1,i="requests",t&&(i="".concat(i,"?submit=true")),(n=w()(n,["user","lastChanges"])).devLoginTitle=n.devLoginTitle||"",n.testLoginTitle=n.testLoginTitle||"",n.prodLoginTitle=n.prodLoginTitle||"",n.additionalRoleAttribute=n.additionalRoleAttribute||"",n.clientId=n.clientId||"",n.primaryEndUsers=null!==(r=n.primaryEndUsers)&&void 0!==r?r:[],n.primaryEndUsersOther=null!==(a=n.primaryEndUsersOther)&&void 0!==a?a:"",e.next=14,v.e.put(i,n).then(function(e){return e.data});case 14:return s=e.sent,e.abrupt("return",[(0,Z.UB)(s),null]);case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",(0,v.z)(e.t0));case 21:case"end":return e.stop()}},e,null,[[1,18]])})),function(e){return u.apply(this,arguments)}),F=(d=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.delete("requests",{params:{id:n}}).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return d.apply(this,arguments)}),R=(p=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.put("request-metadata",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,Z.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return p.apply(this,arguments)})},9595:function(e,n,t){"use strict";t.d(n,{Di:function(){return i},ON:function(){return r},TE:function(){return a}});var r=function(e){return JSON.stringify(e,void 0,2)},a=function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{return document.execCommand("copy"),document.body.removeChild(n),!0}catch(e){return document.body.removeChild(n),!1}},i=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:t})),a=document.createElement("a");a.href=r,a.setAttribute("download",n),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},80382:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/integrations",function(){return t(74887)}])}},function(e){e.O(0,[662,925,937,759,630,291,774,888,179],function(){return e(e.s=80382)}),_N_E=e.O()}]);