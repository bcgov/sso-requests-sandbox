(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{83746:function(n,e,t){"use strict";t.d(e,{FE:function(){return v}});var r=t(85893),i=t(27261),o=t(67294),a=t(11163),s=t(64735),c=t(42745),u=t(56841),l=t(20374),d=t(40602),f=t(83727),h=t(81235);function p(){var n=(0,i.Z)(["\n  padding-top: 2px;\n"]);return p=function(){return n},n}function x(){var n=(0,i.Z)(["\n  overflow: auto;\n"]);return x=function(){return n},n}var v=[{maxWidth:900,marginTop:0,marginLeft:10,marginRight:10,marginUnit:"px",horizontalAlign:"none"},{width:480,marginTop:0,marginLeft:2.5,marginRight:2.5,marginUnit:"rem",horizontalAlign:"none"}],m=c.default.div(x()),j=c.default.div(p()),g=o.createContext({});e.ZP=function(n){var e,t=n.tab,i=n.leftPanel,c=n.rightPanel,p=n.children,x=(0,a.useRouter)(),b=(0,o.useReducer)(f.Z,f.E),y=b[0],w=b[1],Z=(0,o.useContext)(h.SessionContext)||{},k=Z.user,C=Z.enableGold,I=null===k||void 0===k||null===(e=k.integrations)||void 0===e?void 0:e.find((function(n){return"silver"===n.serviceType})),P=(0,o.useMemo)((function(){return{state:y,dispatch:w}}),[y,w]),S=(0,r.jsxs)(l.H,{onSelect:function(n){x.replace("/my-dashboard/".concat(n))},activeKey:t,children:[(0,r.jsx)(u.Z,{eventKey:"integrations",title:"My Projects"}),(0,r.jsx)(u.Z,{eventKey:"teams",title:"My Teams"}),C&&I&&(0,r.jsx)(u.Z,{eventKey:"s2g",title:"*New - Silver to Gold Upgrade"})]});return(0,r.jsx)(d.Z,{rules:v,children:(0,r.jsx)(g.Provider,{value:P,children:p?(0,r.jsxs)(j,{children:[S,p]}):(0,r.jsx)(s.ZP,{cols:10,children:(0,r.jsxs)(s.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,r.jsx)(s.ZP.Col,{span:6,children:(0,r.jsxs)(m,{children:[S,i&&i(y,w)]})}),(0,r.jsx)(s.ZP.Col,{span:4,children:c&&c(y,w)})]})})})})}},39309:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return gt}});var r=t(85893),i=t(67294),o=t(27261),a=t(42745),s=t(56841),c=t(26265),u=t(16530),l=t(69829);function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function f(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach((function(e){(0,c.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var h=(0,u._v)({shared:{container:"\n      line-height: 1.5em;\n      border: 1px solid transparent;\n      border-radius: 0.2222em;\n      padding: 1em 0.5em;\n\n      & a {\n        text-decoration: underline;\n      }\n\n      & .pg-notification-content>svg {\n        overflow: initial;\n      }\n    ",close:"\n      cursor: pointer !important;\n      text-align: center;\n      text-decoration: none;\n      border-radius: 0.2222em;\n      padding: 0.4em 0.5em;\n      margin-right: 20px;\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},variant:{success:{container:"\n        background-color: #dff0d8;\n        border-color: #d6e9c6;\n        color: #2d4821;\n\n        & a {\n          color: #2b542c;\n        }\n      ",content:"\n        color: #2d4821;\n      ",close:"\n        color: #2d4821;\n        border: 1px solid #2d4821;\n\n        &:hover {\n          background: #2d4821;\n          color: #fff;\n        }\n      ",group:"\n        color: #2d4821;\n      "},info:{container:"\n        background-color: #d9eaf7;\n        border-color: #afd3ee;\n        color: #313132;\n\n        & a {\n          color: #1a5a96;\n        }\n      ",content:"\n        color: #313132;\n      ",close:"\n        color: #313132;\n        border: 1px solid #313132;\n\n        &:hover {\n          background: #313132;\n          color: #fff;\n        }\n      ",group:"\n        color: #313132;\n      "},warning:{container:"\n        background-color: #f9f1c6;\n        border-color: #faebcc;\n        color: #6c4a00;\n\n        & a {\n          color: #66512c;\n        }\n      ",content:"\n        color: #66512c;\n      ",close:"\n        color: #66512c;\n        border: 1px solid #66512c;\n\n        &:hover {\n          background: #66512c;\n          color: #fff;\n        }\n      ",group:"\n        color: #66512c;\n      "},danger:{container:"\n        background-color: #f2dede;\n        border-color: #ebccd1;\n        color: #a12622;\n\n        & a {\n          color: #843534;\n        }\n      ",content:"\n        color: #a12622;\n      ",close:"\n        color: #a12622;\n        border: 1px solid #a12622;\n\n        &:hover {\n          background: #a12622;\n          color: #fff;\n        }\n      ",group:"\n        color: #a12622;\n      "}},flex:{container:"\n      display: flex;\n    ",group:"\n      margin: auto 0.5rem;\n    "}},{defaultProps:{variant:"info",size:"medium",flex:!0},staticProps:[]},{group:{align:{left:"\n        margin-right: auto;\n    ",right:"\n        margin-left: auto;\n    "}}}),p=function(n){switch(n){case"success":return l.CheckCircle;case"info":return l.InfoCircle;case"warning":return l.ExclamationTriangle;default:return l.ExclamationCircle}};function x(n){return(0,r.jsxs)(h,f(f({},n),{},{children:[(0,r.jsx)(h.Group,{style:{marginTop:"1px"},children:(0,r.jsx)(l.FaSVG,{children:(0,r.jsx)("path",{fill:"currentColor",d:p(n.variant)})})}),(0,r.jsx)(h.Content,{children:n.content?n.content:n.children}),n.closable&&(0,r.jsx)(h.Group,{align:"right",children:(0,r.jsx)(h.Close,{children:"x"})})]}))}var v=t(809),m=t.n(v),j=t(64121),g=t(92447),b=t(17625),y=t(51436),w=t(64735),Z=t(31607),k=t(70513),C=function(){var n=(0,g.Z)(m().mark((function n(e,t){var r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.e.post("installation",{requestId:e,environment:t}).then((function(n){return n.data}));case 3:return r=n.sent,n.abrupt("return",[r,null]);case 7:return n.prev=7,n.t0=n.catch(0),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}(),I=function(){var n=(0,g.Z)(m().mark((function n(e,t){var r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.e.put("installation",{requestId:e,environment:t}).then((function(n){return n.data}));case 3:return r=n.sent,n.abrupt("return",[r,null]);case 7:return n.prev=7,n.t0=n.catch(0),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}(),P=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i,o,a;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.environment,r=e.idp,i=e.property,o=e.searchKey,n.prev=1,n.next=4,k.e.post("keycloak/users",{environment:t,idp:r,property:i,searchKey:o}).then((function(n){return n.data}));case 4:return a=n.sent,n.abrupt("return",[a,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),S=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i,o,a,s,c,u,l;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.environment,r=e.integrationId,i=e.search,o=void 0===i?"":i,a=e.first,s=void 0===a?0:a,c=e.max,u=void 0===c?50:c,n.prev=1,n.next=4,k.e.post("keycloak/roles",{environment:t,integrationId:r,search:o,first:s,max:u}).then((function(n){return n.data}));case 4:return l=n.sent,n.abrupt("return",[l,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),N=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i,o,a,s,c,u;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.environment,r=e.integrationId,i=e.username,o=e.first,a=void 0===o?0:o,s=e.max,c=void 0===s?50:s,n.prev=1,n.next=4,k.e.post("keycloak/user-roles",{environment:t,integrationId:r,username:i,first:a,max:c}).then((function(n){return n.data}));case 4:return u=n.sent,n.abrupt("return",[u,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),O=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i,o,a,s;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.environment,r=e.integrationId,i=e.username,o=e.roleName,a=e.mode,n.prev=1,n.next=4,k.e.put("keycloak/user-roles",{environment:t,integrationId:r,username:i,roleName:o,mode:a}).then((function(n){return n.data}));case 4:return s=n.sent,n.abrupt("return",[s,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),R=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i,o,a,s,c,u;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.environment,r=e.integrationId,i=e.roleName,o=e.first,a=void 0===o?0:o,s=e.max,c=void 0===s?50:s,n.prev=1,n.next=4,k.e.post("keycloak/role-users",{environment:t,integrationId:r,roleName:i,first:a,max:c}).then((function(n){return n.data}));case 4:return u=n.sent,n.abrupt("return",[u,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),E=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.integrationId,r=e.roles,n.prev=1,n.next=4,k.e.post("keycloak/bulk-roles",{integrationId:t,roles:r}).then((function(n){return n.data}));case 4:return i=n.sent,n.abrupt("return",[i,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),D=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.environment,r=e.integrationId,i=e.roleName,n.prev=1,n.next=4,k.e.post("keycloak/delete-role",{environment:t,integrationId:r,roleName:i}).then((function(n){return n.data}));case 4:return o=n.sent,n.abrupt("return",[o,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),F=t(83024),z=t(30454),T={shared:{button:"\n      border-radius: 0.222em;\n      border-width: 0;\n      padding: 0.6em 1.1em;\n      text-align: center;\n      text-decoration: none;\n      font-weight: 700;\n      letter-spacing: 1px;\n      display: inline-block;\n      cursor: pointer;\n      box-shadow: 0px 0px 0px 2px transparent inset, 0px 0em 0px 0px rgba(34, 36, 38, 0.15) inset;\n    "},size:{xsmall:{button:"\n        font-size: 0.7rem;\n      "},small:{button:"\n        font-size: 0.8rem;\n      "},medium:{button:"\n        font-size: ".concat(z.n5,";\n      ")},large:{button:"\n        font-size: ".concat(z.zA,";\n      ")}},variant:{primary:{button:"\n        background-color: #D5EDFF;\n        box-shadow: 0px 0px 0px 2px #D5EDFF inset !important;\n        color: #3E3E3E;\n\n        &:hover {\n          text-decoration: underline;\n          background-color: #FFF7D5;\n          box-shadow: 0px 0px 0px 2px #FFF7D5 inset !important;\n          opacity: 0.80;\n        }\n\n        &:active {\n          opacity: 1;\n        }\n      "},grey:{button:"\n        background-color: #B2B2B2;\n        box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        color: #F8F8F8;\n        min-width: 110px;\n\n        &:hover {\n          background-color: ".concat(z.TU,";\n          box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        }\n      ")}}},q=(0,F.applyTheme)(T,{defaultProps:{variant:"primary",size:"medium"},breakProps:[],staticProps:["fullHeight","fullWidth"]}),G=function(n){return JSON.stringify(n,void 0,2)},B=function(n){var e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.focus(),e.select();try{return document.execCommand("copy"),document.body.removeChild(e),!0}catch(t){return document.body.removeChild(e),!1}},A=function(n,e){var t=window.URL.createObjectURL(new Blob([n],{type:"application/json"})),r=document.createElement("a");r.href=t,r.setAttribute("download",e),document.body.appendChild(r),r.click(),document.body.removeChild(r)},K=t(6434),L=t(28783),U=t(34605),M=t(74150);function H(){var n=(0,o.Z)(["\n  height: var(--field-top-spacing);\n"]);return H=function(){return n},n}function Y(){var n=(0,o.Z)(["\n  color: #3e3e3e;\n  font-size: 14px;\n  font-weight: 700;\n"]);return Y=function(){return n},n}function _(){var n=(0,o.Z)(["\n  color: #000;\n  font-size: ",";\n  font-weight: bold;\n"]);return _=function(){return n},n}function V(){var n=(0,o.Z)(["\n  text-align: center;\n"]);return V=function(){return n},n}var J=a.default.div(V()),W=a.default.span(_(),z.n5),X=a.default.span(Y()),$=a.default.div(H()),Q=(0,L.hU)((function(n){var e=n.selectedRequest,t=n.alert,o=(0,i.useState)(!1),a=o[0],s=o[1],c=function(){var n=(0,g.Z)(m().mark((function n(t){var r,i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0),n.next=3,C(e.id,t);case 3:return r=n.sent,i=(0,j.Z)(r,1),o=i[0],s(!1),n.abrupt("return",o);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),u=function(){var n=(0,g.Z)(m().mark((function n(e){var r,i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(e);case 2:r=n.sent,B(G(r)),i=r?"success":"danger",o=r?"Installation copied to clipboard":"Failed to download installation",t.show({variant:i,fadeOut:1e4,closable:!0,content:o});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),l=function(){var n=(0,g.Z)(m().mark((function n(t){var r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(t);case 2:r=n.sent,A(G(r),"".concat(e.projectName,"-installation-").concat(t,".json"));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return a?(0,r.jsxs)(J,{children:[(0,r.jsx)($,{}),(0,r.jsx)(Z.Z,{type:"Grid",color:"#000",height:45,width:45,visible:!0})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($,{}),(0,r.jsx)(w.ZP,{cols:4,children:(0,K.Dy)(e).map((function(n){return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(w.ZP.Row,{collapse:"992",gutter:[],align:"center",children:[(0,r.jsx)(w.ZP.Col,{span:1,style:{maxWidth:"200px"},children:(0,r.jsx)(W,{children:n.display})}),(0,r.jsxs)(w.ZP.Col,{span:3,children:[(0,r.jsx)(q,{size:"medium",variant:"grey",onClick:function(){return u(n.name)},children:"Copy"}),"\xa0",(0,r.jsx)(q,{size:"medium",variant:"grey",onClick:function(){return l(n.name)},children:"Download"}),"\xa0\xa0",(0,r.jsx)(b.G,{color:"green",icon:y.f8k,title:"Ready"}),"\xa0",(0,r.jsx)(X,{children:"Ready"})]})]}),(0,r.jsx)("br",{})]},n.name)}))}),(0,r.jsxs)(U.Z,{children:["For more information on how to use these details, or for the public endpoints associated to your client, see"," ",(0,r.jsx)(M.ZP,{href:"https://github.com/bcgov/sso-requests/blob/dev/docs/user-guide.md#using-your-integration",external:!0,children:"here"}),"."]})]})})),nn=t(4826),en=t(98806);function tn(){var n=(0,o.Z)(["\n  background-color: black;\n"]);return tn=function(){return n},n}function rn(){var n=(0,o.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"]);return rn=function(){return n},n}function on(){var n=(0,o.Z)(["\n  margin-right: 20px;\n"]);return on=function(){return n},n}function an(){var n=(0,o.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"]);return an=function(){return n},n}function sn(){var n=(0,o.Z)(["\n  height: var(--field-top-spacing);\n"]);return sn=function(){return n},n}var cn=a.default.div(sn()),un=a.default.span(an()),ln=(0,a.default)(b.G)(on()),dn=a.default.div(rn()),fn=a.default.hr(tn()),hn=(0,L.hU)((function(n){var e=n.selectedRequest,t=n.alert,o=(0,i.useState)(null),a=o[0],s=o[1],c=(0,K.Dy)(e),u=function(){var n=(0,g.Z)(m().mark((function n(){var r,i,o,s,c,u;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I(e.id,(null===a||void 0===a?void 0:a.name)||null);case 2:r=n.sent,i=(0,j.Z)(r,2),o=i[0],s=i[1],c=s?"danger":"success",u=s?"Failed to regenerate secret":"Client Secret Successfully Updated",t.show({variant:c,fadeOut:1e4,closable:!0,content:u}),window.location.hash="#",console.error(o,s);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(dn,{children:[(0,r.jsx)(ln,{icon:y.eHv,color:"black",title:"Warning",size:"2x"}),(0,r.jsxs)("strong",{children:["You're About to Change Your Client Secret for Your ",null===a||void 0===a?void 0:a.display," Environment."]})," "]}),(0,r.jsx)(fn,{}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"Once you change your secret, your previous secret will no longer be valid for any applications using it."}),(0,r.jsx)("li",{children:"This means you will need to update any applications using this client with the new JSON details before they are functional again."})]})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(cn,{}),c.map((function(n){return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(un,{children:[n.display,": "]}),!e.publicAccess&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(nn.ZP,{type:"button",onClick:function(){return function(n){s(n),window.location.hash="confirm-new-secret"}(n)},children:"Change your client secret"})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]},n.name)}))]}),(0,r.jsx)(en.Z,{id:"confirm-new-secret",content:l,onConfirm:u,icon:y.eHv,title:"You're About to Change Your Client Secret",closable:!0})]})})),pn=t(85330),xn=t(96486),vn=t(246),mn=t.n(vn),jn=t(11915),gn=t(20374),bn=t(69696);function yn(){var n=(0,o.Z)(["\n  min-width: 350px;\n  margin-top: 20px;\n  display: flex;\n  justify-content: "," & button {\n    min-width: 150px;\n    display: inline-block;\n  }\n"]);return yn=function(){return n},n}function wn(){var n=(0,o.Z)(["\n  margin-right: 5px;\n  height: 30px;\n"]);return wn=function(){return n},n}function Zn(){var n=(0,o.Z)(["\n  font-size: 1.5em;\n  padding: 0.75em;\n  background: #38598a;\n  color: #fff;\n  & a {\n    float: right;\n  }\n"]);return Zn=function(){return n},n}function kn(){var n=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  text-align: left !important;\n\n  & .pg-modal-main {\n    max-width: 700px;\n    margin: auto;\n    box-shadow: 5px 5px 10px black;\n  }\n"]);return kn=function(){return n},n}var Cn=(0,a.default)(bn.ZP)(kn()),In=(0,a.default)(bn.ZP.Header)(Zn()),Pn=(0,a.default)(b.G)(wn()),Sn=a.default.div(yn(),(function(n){return"center"===n.buttonAlign?"center;":"space-between;"})),Nn={open:xn.noop,close:xn.noop,getId:function(){return 1}},On=function(n,e){var t=n.id,o=void 0===t?(new Date).getTime().toString():t,a=n.title,s=void 0===a?"":a,c=n.onConfirm,u=void 0===c?xn.noop:c,l=n.onCancel,d=void 0===l?xn.noop:l,f=n.closable,h=void 0===f||f,p=n.children,x=n.icon,v=void 0===x?y.eHv:x,j=n.confirmButtonText,w=void 0===j?"Confirm":j,k=n.cancelButtonText,C=void 0===k?"Cancel":k,I=n.confirmButtonVariant,P=void 0===I?"bcPrimary":I,S=n.cancelButtonVariant,N=void 0===S?"bcSecondary":S,O=n.showConfirmButton,R=void 0===O||O,E=n.showCancelButton,D=void 0===E||E,F=n.buttonAlign,z=void 0===F?"default":F,T=n.style,q=void 0===T?{}:T,G=(0,i.useRef)(),B=(0,i.useState)(!1),A=B[0],K=B[1],L=(0,i.useState)(null),U=L[0],M=L[1];(0,i.useImperativeHandle)(e,(function(){return{open:function(n){M(n),window.location.hash=o},close:function(){window.location.hash="#"},getId:function(){return o}}}));var H=function(){var n=(0,g.Z)(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return K(!0),n.next=3,u(G,U);case 3:K(!1),window.location.hash="#";case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Y=function(){var n=(0,g.Z)(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:d(G,U),window.location.hash="#";case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();"function"===typeof p&&(p=p(U));var _=[];return"object"===typeof p&&(Array.isArray(p)?_=p:_.push(p)),_=i.Children.map(_,(function(n,e){return(0,i.cloneElement)(n,{ref:G})})),(0,r.jsxs)(Cn,{id:o,children:[(0,r.jsxs)(In,{title:s,as:"div",children:[v&&(0,r.jsx)(Pn,{icon:v,title:"Information",size:"2x",style:{paddingRight:"10px"}}),s,h&&(0,r.jsx)(bn.ZP.Close,{onClick:Y,title:"cancel",children:(0,r.jsx)(b.G,{icon:y.NBC,size:"lg"})})]}),(0,r.jsxs)(bn.ZP.Content,{style:q,children:[_,(0,r.jsxs)(Sn,{buttonAlign:z,children:[D&&(0,r.jsx)(pn.zx,{variant:N,onClick:Y,type:"button",children:C}),R&&(0,r.jsx)(pn.zx,{onClick:H,variant:P,type:"button",children:A?(0,r.jsx)(Z.Z,{type:"Grid",color:"#FFF",height:18,width:50,visible:A}):w})]})]})]})},Rn=(0,i.forwardRef)(On),En=t(61408),Dn=t(23451),Fn=t(26141);function zn(){var n=(0,o.Z)(["\n  color: #ff0000;\n"]);return zn=function(){return n},n}function Tn(){var n=(0,o.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]);return Tn=function(){return n},n}function qn(){var n=(0,o.Z)(["\n  .env {\n    width: 300px;\n  }\n"]);return qn=function(){return n},n}var Gn=a.default.table(qn()),Bn=a.default.span(Tn()),An=a.default.div(zn()),Kn={name:"",envs:["dev"]};function Ln(n,e){var t=n.integrationId,o=n.environments,a=void 0===o?["dev"]:o,s=(0,i.useState)([Kn]),c=s[0],u=s[1];(0,i.useImperativeHandle)(e,(function(){return{submit:function(){var n=(0,g.Z)(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E({integrationId:t,roles:c});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),reset:function(){u([Kn])}}}));var l=function(){var n=(0,g.Z)(m().mark((function n(e,t,r){var i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=c.map((function(n,r){return r===e?{name:n.name,envs:t.map((function(n){return n.value}))}:n})),u(i);case 2:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}();return(0,r.jsx)("div",{children:(0,r.jsxs)(Gn,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"role",children:"Role Name"}),(0,r.jsx)("th",{className:"env",children:"Environments"}),(0,r.jsx)("th",{})]})}),(0,r.jsxs)("tbody",{children:[c.length>0?c.map((function(n,e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"role",children:(0,r.jsx)(jn.ZP,{size:"small",minLength:"2",maxLength:"100",value:n.name,onChange:function(n){return function(n,e){var t=c.map((function(t,r){return r===n?{name:e,envs:t.envs}:t}));u(t)}(e,n.target.value)}})}),(0,r.jsx)("td",{className:"env",children:(0,r.jsx)(Fn.ZP,{value:n.envs.map((function(n){return{value:n,label:n}})),options:a.map((function(n){return{value:n,label:n}})),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"You selected all environments"},onChange:function(n,t){return l(e,n,t)}})}),(0,r.jsx)("td",{children:c.length>1&&(0,r.jsx)(Bn,{onClick:function(){return function(n){u(c.filter((function(e,t){return t!==n})))}(e)},children:(0,r.jsx)(b.G,{style:{color:"#FF0303"},icon:y.uMC,title:"Remove Role"})})})]})})):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,children:"No roles added."})}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,children:c.length<20?(0,r.jsxs)(Bn,{onClick:function(){u(c.concat(Kn))},children:[(0,r.jsx)(b.G,{style:{color:"#006fc4"},icon:y.KtF,title:"Add Role"}),(0,r.jsx)("span",{children:"Add another role"})]}):(0,r.jsx)(An,{children:"You can only create 20 roles at a time. Please save before creating any new roles."})})})]})]})})}var Un=(0,i.forwardRef)(Ln);function Mn(){var n=(0,o.Z)(["\n  height: var(--field-top-spacing);\n"]);return Mn=function(){return n},n}function Hn(){var n=(0,o.Z)(["\n  text-align: right;\n"]);return Hn=function(){return n},n}function Yn(){var n=(0,o.Z)(["\n  text-align: center;\n"]);return Yn=function(){return n},n}function _n(){var n=(0,o.Z)(["\n  display: inline-block;\n  input {\n    min-width: 200px;\n    height: 40px;\n  }\n"]);return _n=function(){return n},n}var Vn=(0,a.default)(jn.ZP)(_n()),Jn=a.default.div(Yn()),Wn=a.default.div(Hn()),Xn=a.default.div(Mn()),$n=function(){return(0,r.jsxs)(Jn,{children:[(0,r.jsx)(Xn,{}),(0,r.jsx)(Z.Z,{type:"Grid",color:"#000",height:45,width:45,visible:!0})]})},Qn=(0,L.hU)((function(n){var e=n.selectedRequest,t=(n.alert,(0,i.useRef)(Nn)),o=(0,i.useRef)(Nn),a=(0,i.useState)("dev"),c=a[0],u=a[1],l=(0,i.useState)(!1),d=l[0],f=l[1],h=(0,i.useState)(!1),p=h[0],x=h[1],v=(0,i.useState)(0),b=v[0],Z=v[1],k=(0,i.useState)(""),C=k[0],I=k[1],P=(0,i.useState)(20),N=P[0],O=(P[1],(0,i.useState)(!0)),E=O[0],F=O[1],z=(0,i.useState)(0),T=z[0],q=z[1],G=(0,i.useState)(20),B=G[0],A=(G[1],(0,i.useState)(!0)),K=A[0],L=A[1],U=(0,i.useState)([]),M=U[0],H=U[1],Y=(0,i.useState)([]),_=Y[0],V=Y[1],J=(0,i.useState)(""),W=J[0],X=J[1],$=function(){Q(!0),V([]),H([]),X("")};(0,i.useEffect)((function(){u("dev"),$()}),[e.id]),(0,i.useEffect)((function(){$()}),[c]);var Q=function(){var n=(0,g.Z)(m().mark((function n(t){var r,i,o,a,s,u;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!d){n.next=2;break}return n.abrupt("return");case 2:return r=0,i=[],f(!0),t?Z(r):(r=b,i=M),n.next=8,S({environment:c,integrationId:e.id,first:r,search:C,max:N});case 8:o=n.sent,a=(0,j.Z)(o,2),s=a[0],a[1],F((u=s||[]).length===N),H(i.concat(u)),Z(r+N),f(!1);case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),nn=function(){var n=(0,g.Z)(m().mark((function n(t,r){var i,o,a,s,u,l;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!p){n.next=2;break}return n.abrupt("return");case 2:return i=0,o=[],x(!0),t?q(i):(i=T,o=_),n.next=8,R({environment:c,integrationId:e.id,roleName:r,first:i,max:B});case 8:a=n.sent,s=(0,j.Z)(a,2),u=s[0],s[1],L((l=u||[]).length===B),V(o.concat(l)),q(i+B),X(r),x(!1);case 18:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),en=function(){var n=(0,g.Z)(m().mark((function n(e){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o.current.open(e);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),tn=null;0===T&&p?tn=(0,r.jsx)($n,{}):W&&(tn=(0,r.jsxs)(Dn.Z,{variant:"mini",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"First Name"}),(0,r.jsx)("th",{children:"Last Name"}),(0,r.jsx)("th",{children:"Email"}),(0,r.jsx)("th",{children:"Username"})]})}),_.length>0?(0,r.jsx)(mn(),{element:"tbody",loadMore:function(){return nn(!1,W)},hasMore:K,loader:(0,r.jsx)($n,{}),children:_.map((function(n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n.firstName}),(0,r.jsx)("td",{children:n.lastName}),(0,r.jsx)("td",{children:n.email}),(0,r.jsx)("td",{children:n.username})]})}))}):(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,children:"No users found."})})})]}));var rn=(0,r.jsx)("tbody",{});rn=M.length>0?(0,r.jsx)(mn(),{element:"tbody",loadMore:function(){return Q(!1)},hasMore:E,loader:(0,r.jsx)($n,{}),children:M.map((function(n){return(0,r.jsxs)("tr",{className:W===n?"active":"",onClick:function(){nn(!0,n)},children:[(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:(0,r.jsx)(Wn,{children:(0,r.jsx)(En.Kk,{icon:y.$aW,role:"button","aria-label":"delete",onClick:function(e){e.stopPropagation(),en(n)},title:"Delete",size:"lg",style:{marginRight:"1rem"}})})})]},n)}))}):(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:2,children:"No roles found."})})});var on=(0,r.jsxs)(Dn.Z,{variant:"mini",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Role Name"}),(0,r.jsx)("th",{})]})}),rn]}),an=(null===e||void 0===e?void 0:e.environments)||[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Xn,{}),(0,r.jsx)(pn.zx,{size:"medium",variant:"primary",onClick:function(){t.current.open()},children:"+ Create a New Role"}),(0,r.jsx)(Xn,{}),(0,r.jsx)(gn.H,{onSelect:function(n){u(n)},activeKey:c,children:an.map((function(n){return(0,r.jsx)(s.Z,{eventKey:n,title:(0,xn.startCase)(n)})}))}),(0,r.jsxs)("div",{children:[(0,r.jsx)(Vn,{type:"text",size:"small",maxLength:"1000",placeholder:"Search existing roles",value:C,onChange:function(n){I(n.target.value)},onKeyUp:function(n){"Enter"===n.key&&Q(!0)}}),(0,r.jsx)(pn.zx,{type:"button",size:"small",variant:"bcPrimary",onClick:function(){return Q(!0)},children:"Search"})]}),(0,r.jsx)(Xn,{}),0===b&&d?(0,r.jsx)($n,{}):(0,r.jsx)(w.ZP,{cols:10,children:(0,r.jsxs)(w.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,r.jsx)(w.ZP.Col,{span:4,children:on}),(0,r.jsx)(w.ZP.Col,{span:6,children:tn})]})}),(0,r.jsx)(Rn,{ref:t,title:"Create New Role",icon:null,onConfirm:function(){var n=(0,g.Z)(m().mark((function n(e){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.current.submit();case 2:return n.next=4,e.current.reset();case 4:$();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),onCancel:function(n){n.current.reset()},confirmButtonText:"Save",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:(0,r.jsx)(Un,{integrationId:e.id,environments:an})}),(0,r.jsx)(Rn,{ref:o,title:"Delete Role",icon:y.eHv,onConfirm:function(){var n=(0,g.Z)(m().mark((function n(t,r){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D({environment:c,integrationId:e.id,roleName:r});case 2:return n.next=4,$();case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),confirmButtonText:"Delete",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,r.jsx)("div",{children:"Are you sure you want to delete this role?"})})]})})),ne=t(68306),ee=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.field,r=e.search,n.prev=1,n.next=4,k.e.post("bceid-webservice/idir/search",{field:t,search:r}).then((function(n){return n.data}));case 4:return i=n.sent,n.abrupt("return",[i,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),te=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.guid,r=e.userId,n.prev=1,n.next=4,k.e.post("bceid-webservice/idir/import",{guid:t,userId:r}).then((function(n){return n.data}));case 4:return i=n.sent,n.abrupt("return",[i,null]);case 8:return n.prev=8,n.t0=n.catch(1),console.error(n.t0),n.abrupt("return",[null,n.t0]);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();function re(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function ie(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?re(Object(t),!0).forEach((function(e){(0,c.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function oe(){var n=(0,o.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]);return oe=function(){return n},n}function ae(){var n=(0,o.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]);return ae=function(){return n},n}function se(){var n=(0,o.Z)(["\n  text-align: center;\n"]);return se=function(){return n},n}function ce(){var n=(0,o.Z)(["\n  height: var(--field-top-spacing);\n"]);return ce=function(){return n},n}function ue(){var n=(0,o.Z)(["\n  text-align: center;\n"]);return ue=function(){return n},n}function le(){var n=(0,o.Z)(["\n  font-size: 0.9rem;\n  font-weight: 700;\n  ","\n"]);return le=function(){return n},n}function de(){var n=(0,o.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 4px 2px 0;\n  padding: 4px 6px;\n  ","\n"]);return de=function(){return n},n}function fe(){var n=(0,o.Z)(["\n  display: flex;\n"]);return fe=function(){return n},n}function he(){var n=(0,o.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]);return he=function(){return n},n}var pe=a.default.label(he()),xe=a.default.div(fe()),ve=a.default.div(de(),(function(n){return n.width?"width: ".concat(n.width,";"):"width: 300px;"})),me=a.default.div(le(),(function(n){return n.width?"width: ".concat(n.width,";"):"width: 300px;"})),je=function(n){var e=n.children,t=n.width;return(0,r.jsx)(ve,{width:t,children:(0,r.jsx)(w.ZP,{cols:6,children:(0,r.jsxs)(w.ZP.Row,{gutter:[],children:[(0,r.jsx)(w.ZP.Col,{span:5,children:e}),(0,r.jsx)(w.ZP.Col,{span:1,style:{textAlign:"right"},children:(0,r.jsx)(b.G,{icon:y.byT,color:"#9F9F9F",size:"lg"})})]})})})},ge=a.default.div(ue()),be=a.default.div(ce()),ye=a.default.div(se()),we=a.default.div(ae()),Ze=a.default.div(oe()),ke=function(){return(0,r.jsxs)(ge,{children:[(0,r.jsx)(be,{}),(0,r.jsx)(Z.Z,{type:"Grid",color:"#000",height:45,width:45,visible:!0})]})},Ce={idir:"IDIR",azureidir:"Azure IDIR",bceidbasic:"BCeID Basic",bceidbusiness:"BCeID Business",bceidboth:"BCeID Both"},Ie=[{value:"lastName",label:"Last Name"},{value:"firstName",label:"First Name"},{value:"email",label:"Email"},{value:"guid",label:"IDP GUID"}],Pe=(0,L.hU)((function(n){var e=n.selectedRequest,t=(n.alert,(0,i.useRef)(Nn)),o=(0,i.useState)(!1),a=o[0],s=o[1],c=(0,i.useState)(!1),u=c[0],l=c[1],d=(0,i.useState)(!1),f=d[0],h=d[1],p=(0,i.useState)(!1),x=p[0],v=p[1],Z=(0,i.useState)(!1),k=Z[0],C=Z[1],I=(0,i.useState)([]),R=I[0],E=I[1],D=(0,i.useState)([]),F=D[0],z=D[1],T=(0,i.useState)([]),q=T[0],G=T[1],B=(0,i.useState)([]),A=B[0],K=B[1],L=(0,i.useState)("dev"),U=L[0],M=L[1],H=(0,i.useState)(""),Y=H[0],_=H[1],V=(0,i.useState)(Ie[0].value),J=V[0],W=V[1],X=(0,i.useState)(""),$=X[0],Q=X[1],en=(0,i.useState)(void 0),tn=en[0],rn=en[1],on=function(){var n=(0,g.Z)(m().mark((function n(){var t,r,i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,h(!0);case 4:return n.next=6,S({environment:U,integrationId:e.id,first:0,max:1e3});case 6:t=n.sent,r=(0,j.Z)(t,2),i=r[0],r[1],z(i||[]),h(!1);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),an=function(){E([]),z([]),K([]),G([]),rn(void 0),s(!1),l(!1)};(0,i.useEffect)((function(){an(),M("dev")}),[e.id]),(0,i.useEffect)((function(){an(),on(),e.devIdps&&_(e.devIdps.length>0?e.devIdps[0]:"")}),[U]),(0,i.useEffect)((function(){an()}),[Y]);var sn=function(){var n=(0,g.Z)(m().mark((function n(e){var t,r,i,o,a=arguments;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=a.length>1&&void 0!==a[1]?a[1]:J,!(e.length<2)){n.next=3;break}return n.abrupt("return");case 3:return h(!0),Q(e),W(t),E([]),K([]),rn(void 0),s(!0),l(!1),n.next=13,P({environment:U,idp:Y,property:t,searchKey:e});case 13:r=n.sent,i=(0,j.Z)(r,2),o=i[0],i[1],o&&E(o),h(!1);case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),cn=function(){var n=(0,g.Z)(m().mark((function n(){var e,t,r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!($.length<2)){n.next=2;break}return n.abrupt("return");case 2:return C(!0),G([]),rn(void 0),l(!0),n.next=8,ee({field:J,search:$});case 8:e=n.sent,t=(0,j.Z)(e,2),r=t[0],t[1],r&&G(r),C(!1);case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),un=function(){var n=(0,g.Z)(m().mark((function n(t,r){var i,o,a,s,c,u;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={},"remove-value"===r.action?(i.mode="del",i.roleName=null===(o=r.removedValue)||void 0===o?void 0:o.value):(i.mode="add",i.roleName=null===(a=r.option)||void 0===a?void 0:a.value),n.next=4,v(!0);case 4:return n.next=6,O(ie({environment:U,integrationId:e.id,username:tn},i));case 6:return s=n.sent,c=(0,j.Z)(s,2),u=c[0],c[1],n.next=12,K(u||[]);case 12:return n.next=14,v(!1);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),ln=function(){var n=(0,g.Z)(m().mark((function n(t){var r,i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(!0);case 2:return n.next=4,N({environment:U,integrationId:e.id,username:t});case 4:return r=n.sent,i=(0,j.Z)(r,2),o=i[0],i[1],n.next=10,K(o||[]);case 10:rn(t),v(!1);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),dn=function(){var n=(0,g.Z)(m().mark((function n(e){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return C(!0),n.next=3,te({guid:e.guid,userId:e.userId});case 3:sn(e.guid,"guid"),C(!1);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),fn=null;x?fn=(0,r.jsx)(ke,{}):tn&&(fn=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pe,{children:"2. Assign User to a Role"}),(0,r.jsx)(Fn.ZP,{value:A.map((function(n){return{value:n,label:n}})),options:F.map((function(n){return{value:n,label:n}})),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:un})]}));var hn=null;hn=a?R.length>0?R.map((function(n){return(0,r.jsxs)("tr",{className:tn===n.username?"active":"",onClick:function(){ln(n.username)},children:[(0,r.jsx)("td",{children:n.firstName}),(0,r.jsx)("td",{children:n.lastName}),(0,r.jsx)("td",{children:n.email}),(0,r.jsx)("td",{children:(0,r.jsx)(En.c4,{children:(0,r.jsx)(En.Kk,{icon:y.Mdf,role:"button","aria-label":"view",onClick:function(e){e.stopPropagation(),t.current.open({guid:n.username.split("@")[0],attributes:ie({firstName:n.firstName,lastName:n.lastName,email:n.email},n.attributes)})},title:"View",size:"lg"})})})]},n.username)})):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:10,children:(0,r.jsxs)(we,{children:[(0,r.jsx)(Ze,{children:(0,r.jsx)(b.G,{icon:y.RLE,color:"#D44331",title:"Edit",size:"lg"})}),"idir"===Y?(0,r.jsx)(Ze,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria or try using our IDIR Lookup tool."}):(0,r.jsx)(Ze,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})]})})}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:10,children:(0,r.jsx)(ye,{children:"You have not searched for any users yet."})})});var pn=null;if(a&&"idir"===Y)if(k)pn=(0,r.jsx)(ke,{});else if(u){var vn=null;vn=q.length>0?q.map((function(n,e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n.individualIdentity.name.firstname}),(0,r.jsx)("td",{children:n.individualIdentity.name.surname}),(0,r.jsx)("td",{children:n.contact.email}),(0,r.jsx)("td",{children:n.userId}),(0,r.jsx)("td",{children:(0,r.jsxs)(En.c4,{children:[(0,r.jsx)(En.Kk,{icon:y.Mdf,role:"button","aria-label":"view",onClick:function(){return t.current.open({guid:n.guid,attributes:{username:n.userId,displayName:n.displayName,firstName:n.individualIdentity.name.firstname,middleName:n.individualIdentity.name.middleName,lastName:n.individualIdentity.name.surname,initials:n.individualIdentity.name.initials,email:n.contact.email,telephone:n.contact.telephone,company:n.internalIdentity.company,department:n.internalIdentity.department,title:n.internalIdentity.title}})},title:"View",size:"lg"}),(0,r.jsx)(En.Kk,{icon:y.q7m,role:"button","aria-label":"import",onClick:function(){return dn(n)},title:"Import",size:"lg"})]})})]},n.guid)})):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,children:(0,r.jsxs)(we,{children:[(0,r.jsx)(Ze,{children:(0,r.jsx)(b.G,{icon:y.RLE,color:"#D44331",title:"Edit",size:"lg"})}),(0,r.jsx)(Ze,{children:"The search criteria you entered does not exist in the IDIR Lookup system."})]})})}),pn=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Dn.Z,{variant:"mini",children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)("th",{children:"First Name"}),(0,r.jsx)("th",{children:"Last Name"}),(0,r.jsx)("th",{children:"Email"}),(0,r.jsx)("th",{children:"IDIR username"}),(0,r.jsx)("th",{})]}),(0,r.jsx)("tbody",{children:vn})]})})}else pn=(0,r.jsxs)(r.Fragment,{children:[R.length>0&&(0,r.jsx)("div",{className:"fst-italic small mb-1",children:"If you did not find the user you were looking for, you can try searching for the user in our IDIR Lookup tool. This tool uses a webservice to find IDIR users. so you will need to import the user that is found."}),(0,r.jsx)(nn.ZP,{type:"button",size:"small",onClick:cn,children:"Search in IDIR Lookup"})]});var mn=(null===e||void 0===e?void 0:e.environments)||[],jn=(null===e||void 0===e?void 0:e.devIdps)||[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(be,{}),(0,r.jsx)(w.ZP,{cols:10,children:(0,r.jsxs)(w.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,r.jsxs)(w.ZP.Col,{span:6,children:[(0,r.jsx)(pe,{children:"1. Search for User"}),(0,r.jsx)(ne.Z,{variant:"mini",searchLocation:"right",filters:[{value:U,multiselect:!1,onChange:M,options:mn.map((function(n){return{value:n,label:(0,xn.startCase)(n)}}))},{value:Y,multiselect:!1,onChange:_,options:jn.map((function(n){return{value:n,label:Ce[n]}}))},{value:J,multiselect:!1,onChange:W,options:Ie}],headers:[{name:"First name"},{name:"Last Name"},{name:"Email"}],searchKey:$,searchPlaceholder:"Enter search criteria",onSearch:sn,onEnter:sn,loading:f,totalColSpan:20,searchColSpan:8,filterColSpan:12,showContent:!u,children:hn},$),pn]}),(0,r.jsx)(w.ZP.Col,{span:4,children:fn})]})}),(0,r.jsx)(Rn,{ref:t,title:"User Info",icon:null,confirmButtonText:"Close",confirmButtonVariant:"primary",showConfirmButton:!0,showCancelButton:!1,buttonAlign:"center",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(n){if(!n)return(0,r.jsx)(r.Fragment,{});var e=(0,xn.omitBy)(n.attributes,xn.isEmpty);return(0,r.jsxs)("div",{children:[(0,r.jsx)(pe,{children:"GUID"}),(0,r.jsx)(je,{width:"400px",children:n.guid}),(0,r.jsx)("br",{}),(0,r.jsx)(pe,{children:"Attributes"}),(0,r.jsxs)(xe,{children:[(0,r.jsx)(me,{width:"200px",children:"key"}),(0,r.jsx)(me,{width:"700px",children:"value"})]}),(0,xn.map)(e,(function(n,e){return(0,r.jsxs)(xe,{children:[(0,r.jsx)(je,{width:"200px",children:(0,xn.startCase)(e)}),(0,r.jsx)(je,{width:"700px",children:n})]})}))]})}})]})})),Se=function(n){switch(n){case"draft":return"In Draft";case"applied":return"Completed";default:return"Submitted"}},Ne=t(90032),Oe=t(87522),Re=t(98224),Ee=t(25367);function De(n){var e=n.requestId,t=(0,i.useState)(!1),o=t[0],a=t[1],s=(0,i.useState)(!1),c=s[0],u=s[1],l=(0,i.useState)([]),d=l[0],f=l[1],h=function(){var n=(0,g.Z)(m().mark((function n(){var t,r,i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return a(!0),n.next=5,(0,Oe.v)({requestId:e,eventCode:"request-update-success",clearNotifications:!0});case 5:t=n.sent,r=(0,j.Z)(t,2),i=r[0],r[1]?u(!0):i&&f(i.rows),a(!1);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,i.useEffect)((function(){h()}),[e]),c?(0,r.jsx)(x,{variant:"warning",content:"Failed to load details."}):o?(0,r.jsx)(Re.Z,{}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Ee.Z,{events:d})})}var Fe=t(32781),ze=t(51479),Te=t(65982);function qe(){var n=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0;\n\n  & p {\n    max-width: 90%;\n    margin: 5px 0;\n  }\n"]);return qe=function(){return n},n}function Ge(){var n=(0,o.Z)(["\n  height: ",";\n  width: ",";\n  border-radius: ",";\n  margin: ",";\n  margin-left: 0;\n  border: 2px solid #b3b3b3;\n"]);return Ge=function(){return n},n}var Be="15px",Ae=a.default.div(Ge(),Be,Be,Be,"0"),Ke=a.default.li(qe());function Le(n){var e=n.request.updatedAt,t=new Date(e||"").toLocaleString();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ze.Z,{now:50}),(0,r.jsxs)(Te.Z,{children:["Last updated at ",t]}),(0,r.jsxs)(Fe.Z,{children:[(0,r.jsxs)(Ke,{children:["Requirements email sent to IDIM",(0,r.jsx)(b.G,{icon:y.f8k,color:"#00C45B"})]}),(0,r.jsxs)(Ke,{children:[(0,r.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,r.jsx)(M.ZP,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,r.jsx)(b.G,{icon:y.FU$,color:"#b3b3b3"})]}),(0,r.jsxs)(Ke,{children:[(0,r.jsx)("p",{children:"Access to prod"}),(0,r.jsx)(Ae,{})]})]})]})}var Ue=t(3278);function Me(){var n=(0,o.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  ","\n"]);return Me=function(){return n},n}function He(){var n=(0,o.Z)(["\n  margin-top: 10px;\n"]);return He=function(){return n},n}var Ye=(0,a.default)(Ue.Z)(He()),_e=a.default.div(Me(),(function(n){return n.short?"max-width: 800px;":""})),Ve=function(n){if(null===n||void 0===n||!n.environments)return"";var e=[];n.environments.includes("dev")&&e.push("Dev"),n.environments.includes("test")&&e.push("Test"),n.environments.includes("prod")&&e.push("Prod");var t="";return e.forEach((function(n,r){t+=n,e.length-r===2?t+=" and ":e.length-r>=2&&(t+=", ")})),"".concat(t," environment").concat(e.length>1?"s":"")};var Je=function(n){var e=n.integration,t=n.state,i=n.dispatch,o=t.panelTab;if(!e)return null;var a=e.status,c=e.environments,u=void 0===c?[]:c,l=e.bceidApproved,d=Se(a||"draft"),f=(0,K.Jx)(e)&&u.includes("prod")&&!l,h="gold"===e.serviceType,p=null;return"In Draft"===d?p=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsxs)(x,{variant:"info",children:[(0,r.jsx)("div",{children:(0,r.jsx)("strong",{children:"Your request has not been submitted."})}),(0,r.jsx)("div",{children:'To complete your request, click "Edit" button.'})]})]}):"Submitted"===d?p=(0,r.jsx)(gn.H,{activeKey:"Integration-request-summary",children:(0,r.jsx)(s.Z,{eventKey:"Integration-request-summary",title:"Integration Request Summary",children:(0,r.jsx)(_e,{short:!0,children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(pn.wk,{number:1,title:"Access to Dev and/or Test environment(s) - approx 20 mins",variant:"secondary",children:[(0,r.jsx)(Ne.Z,{selectedRequest:e}),(0,r.jsx)("br",{})]}),(0,r.jsx)(pn.wk,{number:2,title:"Access to Prod environment - (TBD)",variant:"secondary",children:(0,r.jsx)(Le,{request:e})})]}):(0,r.jsx)(Ne.Z,{selectedRequest:e,title:"Access to ".concat(Ve(e)," - approx 20 mins")})})})}):"Completed"===d&&(p=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(gn.H,{activeKey:o,mountOnEnter:!0,unmountOnExit:!0,onSelect:function(n){return i({type:"setPanelTab",payload:n})},children:[(0,r.jsx)(s.Z,{eventKey:"installation-json",title:"Installation JSON",children:(0,r.jsxs)(_e,{short:!0,children:[(0,r.jsx)(Q,{selectedRequest:e}),f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ye,{children:"Production Status"}),(0,r.jsx)(Le,{request:e})]})]})}),h&&(0,r.jsx)(s.Z,{eventKey:"client-roles",title:"Role Management",children:(0,r.jsx)(_e,{children:(0,r.jsx)(Qn,{selectedRequest:e})})}),h&&(0,r.jsx)(s.Z,{eventKey:"user-roles",title:"Assign Users to Roles",children:(0,r.jsx)(_e,{children:(0,r.jsx)(Pe,{selectedRequest:e})})}),!e.publicAccess&&(0,r.jsx)(s.Z,{eventKey:"configuration-url",title:"Secrets",children:(0,r.jsx)(_e,{short:!0,children:(0,r.jsx)(hn,{selectedRequest:e})})}),(0,r.jsx)(s.Z,{eventKey:"history",title:"History",children:(0,r.jsx)(_e,{short:!0,children:(0,r.jsx)(De,{requestId:e.id})})})]})})),p},We=t(11163),Xe=t(6645);function $e(){var n=(0,o.Z)(["\n  color: #006fc4;\n  height: 60px;\n  padding-left: 20px;\n  padding-top: 16px;\n  padding-bottom: 22px;\n  weight: 700;\n  background-color: #f8f8f8;\n"]);return $e=function(){return n},n}function Qe(){var n=(0,o.Z)(["\n  color: #a12622;\n  height: 60px;\n  padding-left: 20px;\n  padding-top: 16px;\n  padding-bottom: 22px;\n  weight: 700;\n  background-color: #f2dede;\n"]);return Qe=function(){return n},n}function nt(){var n=(0,o.Z)(["\n  margin: 0;\n"]);return nt=function(){return n},n}function et(){var n=(0,o.Z)(["\n  text-align: center;\n  min-width: 100px;\n"]);return et=function(){return n},n}var tt=a.default.th(et()),rt=a.default.p(nt()),it=a.default.div(Qe()),ot=a.default.div($e()),at=(0,r.jsxs)(it,{children:[(0,r.jsx)(b.G,{icon:y.RLE,title:"Unavailable"}),"\xa0 The system is unavailable at this moment. please refresh the page."]}),st=function(n){var e=n.message;return(0,r.jsxs)(ot,{children:[(0,r.jsx)(b.G,{icon:y.sqG,title:"Information"}),"\xa0 ",e]})},ct=function(n){var e=n.handleNewIntegrationClick,t=n.integrations;return t&&0!=(null===t||void 0===t?void 0:t.length)?(0,r.jsx)(pn.zx,{size:"medium",onClick:e,variant:"callout",children:"+ Request SSO Integration"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:(0,r.jsx)("b",{children:"To request an integration for a Standard Realm, you\u2019ll need the following information:"})}),(0,r.jsxs)("div",{style:{background:"#D9EDFD",textAlign:"center",padding:"16px"},children:[(0,r.jsxs)(w.ZP,{cols:2,style:{textAlign:"left"},children:[(0,r.jsxs)(w.ZP.Row,{collapse:"992",gutter:[],align:"top",children:[(0,r.jsxs)(w.ZP.Col,{span:1,children:[(0,r.jsx)(pn.wk,{number:1,title:"Project Information",children:null}),(0,r.jsxs)(rt,{children:[(0,r.jsx)(b.G,{icon:y.LEp})," Project Name"]}),(0,r.jsxs)(rt,{children:[(0,r.jsx)(b.G,{icon:y.LEp})," Project Team Members (Optional)"]}),(0,r.jsxs)(rt,{children:[(0,r.jsx)(b.G,{icon:y.LEp})," Product Owner or Technical Contact"]})]}),(0,r.jsxs)(w.ZP.Col,{span:1,children:[(0,r.jsx)(pn.wk,{number:2,title:"Technical Info",children:null}),(0,r.jsxs)(rt,{children:[(0,r.jsx)(b.G,{icon:y.LEp})," Client type (",(0,r.jsx)(M.ZP,{href:"https://github.com/bcgov/sso-keycloak/wiki/Using-Your-SSO-Client#confidential-vs-private-client",children:"Public or Confidential, learn more"}),")"]}),(0,r.jsxs)(rt,{children:[(0,r.jsx)(b.G,{icon:y.LEp})," Identity Provider (IDIR, Azure, BCeID or Basic)"]}),(0,r.jsxs)(rt,{children:[(0,r.jsx)(b.G,{icon:y.LEp})," Environments (Development, Test, Production)"]}),(0,r.jsxs)(rt,{children:[(0,r.jsx)(b.G,{icon:y.LEp})," Redirect URIs for selected environments"]})]})]}),(0,r.jsx)("p",{style:{marginTop:"1.25rem"},children:"*You\u2019ll be able to save and return your integration request, anytime throughout the request form."})]}),(0,r.jsx)(pn.zx,{size:"medium",onClick:e,variant:"callout",children:"+ Request SSO Integration"})]})]})};function ut(n){var e,t=n.setIntegration,o=n.state,a=n.dispatch,s=(0,We.useRouter)(),c=s.query.integr,u=(0,i.useState)(!0),l=u[0],d=u[1],f=(0,i.useState)([]),h=f[0],p=f[1],x=(0,i.useState)(null),v=(x[0],x[1]),b=(0,i.useState)(c&&Number(c)||void 0),y=b[0],w=b[1],Z=o.downloadError,k=function(){var n=(0,g.Z)(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s.push("/request");case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),C=function(n){v(n),w(n.id),t(n)},I=function(n){if(p(n||[]),y){var e=n.find((function(n){return(null===n||void 0===n?void 0:n.id)===y}));e?C(e):(null===n||void 0===n?void 0:n.length)>0&&C(n[0])}else(null===n||void 0===n?void 0:n.length)>0&&C(n[0])},P=function(){var n=(0,g.Z)(m().mark((function n(){var e,t,r;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!0),n.next=3,(0,Xe.XJ)();case 3:e=n.sent,t=(0,j.Z)(e,2),r=t[0],t[1]?a({type:"setDownloadError",payload:!0}):I(r||[]),d(!1);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,i.useEffect)((function(){P(),s.replace("/my-dashboard/integrations")}),[]),(0,i.useEffect)((function(){return(0,K.rn)(h||[])&&(clearInterval(e),e=setInterval((0,g.Z)(m().mark((function n(){var t,r,i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Xe.XJ)();case 2:t=n.sent,r=(0,j.Z)(t,2),i=r[0],r[1]?clearInterval(e):I(i||[]);case 7:case"end":return n.stop()}}),n)}))),5e3)),function(){e&&clearInterval(e)}}),[h,y]);var S=Z?at:h&&0!==h.length?(0,r.jsxs)(Dn.Z,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Request ID"}),(0,r.jsx)("th",{children:"Project Name"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Service Type"}),(0,r.jsx)(tt,{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:null===h||void 0===h?void 0:h.map((function(n){return(0,r.jsxs)("tr",{className:y===n.id?"active":"",onClick:function(){return C(n)},children:[(0,r.jsx)("td",{children:(0,xn.padStart)(String(n.id),8,"0")}),(0,r.jsx)("td",{children:n.projectName}),(0,r.jsx)("td",{children:Se(n.status||"draft")}),(0,r.jsx)("td",{children:"gold"===n.serviceType?"Gold":"Silver"}),(0,r.jsx)("td",{children:(0,r.jsx)(En.ZP,{request:n,onDelete:function(){P()}})})]},n.id)}))})]}):(0,r.jsx)(st,{message:"No Requests Submitted"});return l?(0,r.jsx)(Re.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(ct,{handleNewIntegrationClick:k,integrations:h}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),S]})}var lt=t(29119),dt=t(40602),ft=t(83727),ht=t(81235),pt=t(83746);function xt(){var n=(0,o.Z)(["\n  height: 100%;\n  overflow: auto;\n"]);return xt=function(){return n},n}var vt=a.default.div(xt()),mt=i.createContext({});var jt=function(n){var e,t=n.tab,o=n.leftPanel,a=n.rightPanel,c=(n.children,(0,We.useRouter)()),u=(0,i.useReducer)(ft.Z,ft.E),l=u[0],d=u[1],f=(0,i.useContext)(ht.SessionContext)||{},h=f.user,p=f.enableGold,x=null===h||void 0===h||null===(e=h.integrations)||void 0===e?void 0:e.find((function(n){return"silver"===n.serviceType})),v=(0,i.useMemo)((function(){return{state:l,dispatch:d}}),[l,d]),m=(0,r.jsxs)(gn.H,{onSelect:function(n){c.replace("/my-dashboard/".concat(n))},activeKey:t,children:[(0,r.jsx)(s.Z,{eventKey:"integrations",title:"My Projects"}),(0,r.jsx)(s.Z,{eventKey:"teams",title:"My Teams"}),p&&x&&(0,r.jsx)(s.Z,{eventKey:"s2g",title:"*New - Silver to Gold Upgrade"})]});return(0,r.jsx)(dt.Z,{rules:pt.FE,children:(0,r.jsxs)(mt.Provider,{value:v,children:[m,(0,r.jsx)(lt.e,{style:{paddingTop:"2px",borderBottom:"6px double #818181"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,r.jsx)(vt,{children:o&&o(l,d)})}),(0,r.jsx)("br",{}),a&&a(l,d)]})})};var gt=function(){var n=(0,i.useState)(null),e=n[0],t=n[1];return(0,r.jsx)(jt,{tab:"integrations",leftPanel:function(n,e){return(0,r.jsx)(ut,{setIntegration:t,state:n,dispatch:e})},rightPanel:function(n,t){return e&&(0,r.jsx)(Je,{integration:e,state:n,dispatch:t})}})}},83727:function(n,e,t){"use strict";t.d(e,{E:function(){return a}});var r=t(26265);function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var a={};e.Z=function(n,e){switch(e.type){case"setPanelTab":return o(o({},n),{},{panelTab:e.payload});case"setDownloadError":return o(o({},n),{},{downloadError:e.payload});default:return n}}},34226:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/integrations",function(){return t(39309)}])}},function(n){n.O(0,[376,715,417,936,774,888,179],(function(){return e=34226,n(n.s=e);var e}));var e=n.O();_N_E=e}]);