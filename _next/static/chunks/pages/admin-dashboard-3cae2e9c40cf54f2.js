(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{91296:function(e,t,n){var r=0/0,i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),p=Object.prototype.toString,v=Math.max,f=Math.min,h=function(){return d.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function x(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==p.call(t))return r;if(b(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=b(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var c=s.test(e);return c||o.test(e)?l(e.slice(2),c?2:8):a.test(e)?r:+e}e.exports=function(e,t,n){var r,i,a,s,o,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){var n=r,a=i;return r=i=void 0,c=t,s=e.apply(a,n)}function j(e){var n=e-l,r=e-c;return void 0===l||n>=t||n<0||d&&r>=a}function g(){var e,n,r,i=h();if(j(i))return S(i);o=setTimeout(g,(e=i-l,n=i-c,r=t-e,d?f(r,a-n):r))}function S(e){return(o=void 0,p&&r)?m(e):(r=i=void 0,s)}function y(){var e,n=h(),a=j(n);if(r=arguments,i=this,l=n,a){if(void 0===o)return c=e=l,o=setTimeout(g,t),u?m(e):s;if(d)return o=setTimeout(g,t),m(l)}return void 0===o&&(o=setTimeout(g,t)),s}return t=x(t)||0,b(n)&&(u=!!n.leading,a=(d="maxWait"in n)?v(x(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==o&&clearTimeout(o),c=0,r=l=i=o=void 0},y.flush=function(){return void 0===o?s:S(h())},y}},3255:function(e,t,n){"use strict";var r,i,a,s=n(71383),o=n(71893),l=n(59349),c=n(25820),u=n(24348),d=n(85893),p=o.ZP.table(r||(r=(0,s.Z)(["\n  font-size: unset;\n  & tr {\n    display: flex;\n    margin-bottom: 5px;\n    & > td {\n      border: none;\n      padding: 0 5px 0 0;\n    }\n  }\n"]))),v=o.ZP.span(i||(i=(0,s.Z)(["\n  font-weight: 600;\n"]))),f=o.ZP.ul(a||(a=(0,s.Z)(["\n  list-style: none;\n  margin: 0;\n  & li {\n    margin: 0;\n  }\n"]))),h=function(e){var t=e.list,n=e.title,r=e.inline,i=void 0!==r&&r,a=e.testid;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:n}),((null==t?void 0:t.length)===1||i)&&(0,d.jsx)(v,{"data-testid":a,children:null==t?void 0:t.map(function(e,n){return(0,d.jsxs)("span",{children:[e,n!==t.length-1&&", "," "]},e)})})]}),!i&&((null==t?void 0:t.length)||0)>1&&(0,d.jsx)("tr",{children:(0,d.jsx)("td",{children:(0,d.jsx)(v,{children:(0,d.jsx)(f,{children:null==t?void 0:t.map(function(e){return(0,d.jsx)("li",{children:e},e)})})})})})]})};t.Z=function(e){var t,n,r,i,a,s,o,f,b=e.children,x=e.request,m=e.teams;if(!x)return null;var j=null!==(i=x.devIdps)&&void 0!==i?i:[],g="saml"!==x.protocol,S=j.map(function(e){return c.S[e]}),y=(0,u.e$)(x),A="";x.usesTeam&&(A=(null===(f=(void 0===m?[]:m).find(function(e){return String(e.id)===String(x.teamId)}))||void 0===f?void 0:f.name)||x.team&&x.team.name);var C=(t=x.primaryEndUsers,n=x.primaryEndUsersOther,null==t?void 0:t.map(function(e){switch(e){case"livingInBC":return"People living in BC";case"businessInBC":return"People doing business/travel in BC";case"bcGovEmployees":return"BC Gov Employees";case"other":return"Other: ".concat(null!=n?n:"");default:return""}}));return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(p,{children:(0,d.jsxs)("tbody",{children:[A?(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Associated Team:"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{"data-testid":"associated-team",children:A})})]}):(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Are you accountable for this project?"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{"data-testid":"you-accountable",children:void 0===(r=x.projectLead)?"":r?"Yes":"No"})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Client Protocol:"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{"data-testid":"client-protocol",children:g?"OpenID Connect":"SAML"})})]}),g&&(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Client Type:"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{"data-testid":"client-type-team",children:x.publicAccess?"Public":"Confidential"})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Usecase:"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{"data-testid":"use-case",children:l.F[x.authType||"browser-login"]})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Project Name:"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{"data-testid":"project-name",children:x.projectName})})]}),C&&(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Primary End Users:"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{"data-testid":"project-name",children:C.join(", ")})})]}),x.additionalRoleAttribute&&(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Additional Role Attribute:"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{"data-testid":"add-role-attrib",children:x.additionalRoleAttribute})})]}),(0,d.jsx)(h,{list:S,title:"Identity Providers Required:",inline:!0,testid:"idp-required"}),y&&(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:"Privacy Zone:"}),(0,d.jsx)("td",{children:(0,d.jsx)(v,{children:x.bcscPrivacyZone})})]}),(null===(a=x.environments)||void 0===a?void 0:a.includes("dev"))&&(0,d.jsx)(h,{list:x.devValidRedirectUris,title:"Dev Redirect URIs:",testid:"dev-uri"}),(null===(s=x.environments)||void 0===s?void 0:s.includes("test"))&&(0,d.jsx)(h,{list:x.testValidRedirectUris,title:"Test Redirect URIs:",testid:"test-uri"}),(null===(o=x.environments)||void 0===o?void 0:o.includes("prod"))&&(0,d.jsx)(h,{list:x.prodValidRedirectUris,title:"Prod Redirect URIs:",testid:"prod-uri"}),b]})})})}},32960:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eP}});var r,i,a,s,o,l,c=n(27812),u=n(16835),d=n(50029),p=n(71383),v=n(64687),f=n.n(v),h=n(67294),b=n(11163),x=n(20070),m=n.n(x),j=n(59417),g=n(84403),S=n(3528),y=n(39247),A=n(48349),C=n(52008),w=n(96052),E=n(71893),P=n(85330),Z=n(24348),O=n(3255),k=n(23157),U=[{value:"draft",label:"Draft"},{value:"submitted",label:"Submitted"},{value:"planned",label:"Planned"},{value:"planFailed",label:"Plan Failed"},{value:"applied",label:"Applied"},{value:"applyFailed",label:"Apply Failed"}],R=n(85893),I=function(e){var t,n=e.request,r=e.onUpdate,i=(0,h.useState)(!1),a=i[0],s=i[1],o=(0,h.useState)(n.status),l=o[0],c=o[1],u=(t=(0,d.Z)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.Uw)({id:n.id,status:l});case 2:if(!r){e.next=5;break}return e.next=5,r();case 5:window.location.hash="#";case 6:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,h.useEffect)(function(){c(n.status)},[n.id]);var p=(0,R.jsxs)("div",{"data-testid":"integration-status",children:[(0,R.jsx)("p",{style:{fontWeight:"bold"},children:"Integration Status"}),(0,R.jsx)(k.ZP,{className:"react-select-container",classNamePrefix:"select",options:U.filter(function(e){return["draft","submitted"].includes(e.value)}),onChange:function(e){return c(e.value)},isSearchable:!0})]});return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("button",{className:"primary",onClick:function(){s(!0)},"data-testid":"edit-metadata-button",children:"Edit Metadata"}),(0,R.jsx)(A.Z,{id:"edit-metadata",openModal:a,handleClose:function(){return s(!1)},content:p,onConfirm:u,icon:j.UJf,title:"Edit Metadata",closable:!0})]})},T=E.ZP.div(r||(r=(0,p.Z)(["\n  max-height: calc(100vh - 250px);\n  overflow: auto;\n"])));function D(e){var t=e.currentUser,n=e.request,r=e.onUpdate;return n?(0,R.jsxs)(T,{children:[(0,R.jsx)("br",{}),(0,R.jsxs)(O.Z,{request:n,children:[(0,R.jsx)("br",{}),t.isAdmin&&(0,R.jsx)(I,{request:n,onUpdate:r})]})]}):null}var _=n(59499),q=n(42894),N=n(7932),F=n(56186),K=n(34393);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach(function(t){(0,_.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B=E.ZP.div(i||(i=(0,p.Z)(["\n  text-align: center;\n"]))),H=[{value:"all",label:"All Events"},{value:"request-pr-success",label:"REQUEST_PR_SUCCESS"},{value:"request-pr-failure",label:"REQUEST_PR_FAILURE"},{value:"request-plan-success",label:"REQUEST_PLAN_SUCCESS"},{value:"request-plan-failure",label:"REQUEST_PLAN_FAILURE"},{value:"request-apply-success",label:"REQUEST_APPLY_SUCCESS"},{value:"request-apply-failure",label:"REQUEST_APPLY_FAILURE"},{value:"request-create-success",label:"REQUEST_CREATE_SUCCESS"},{value:"request-create-failure",label:"REQUEST_CREATE_FAILURE"},{value:"request-update-success",label:"REQUEST_UPDATE_SUCCESS"},{value:"request-update-failure",label:"REQUEST_UPDATE_FAILURE"},{value:"request-delete-success",label:"REQUEST_DELETE_SUCCESS"},{value:"request-delete-failure",label:"REQUEST_DELETE_FAILURE"},{value:"email-submission-failure",label:"EMAIL_SUBMISSION_FAILURE"}];function Q(e){var t,n=e.requestId,r=(0,h.useState)("all"),i=r[0],a=r[1],s=(0,h.useState)([]),o=s[0],l=s[1],c=(0,h.useState)(!1),p=c[0],v=c[1],b=(0,h.useState)(!1),x=b[0],m=b[1],j=(t=(0,d.Z)(f().mark(function e(){var t,r,a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.next=5,(0,F.v)({requestId:n,eventCode:i});case 5:t=e.sent,a=(r=(0,u.Z)(t,2))[0],r[1]?m(!0):a&&l(a.rows),v(!1);case 11:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,h.useEffect)(function(){j()},[n,i]);var g=function(e){a(e)};return x?null:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(N.Z,{"data-testid":"events-dropdown",children:[(0,R.jsx)("br",{}),(0,R.jsx)(k.ZP,{options:H,onChange:function(e){return g(e.value)},maxMenuHeight:300,styles:{control:function(e){return M(M({},e),{},{width:"250px"})},menu:function(e){return M(M({},e),{},{width:"250px"})}}})]}),p?(0,R.jsx)(B,{children:(0,R.jsx)(q.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:p})}):(0,R.jsx)(K.Z,{events:o})]})}var G=n(21885),W=n(9206);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){(0,_.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y=E.ZP.div(a||(a=(0,p.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n"]))),z={bceid:"bceidApproved",github:"githubApproved",BCServicesCard:"bcServicesCardApproved",social:"socialApproved"},X=function(e){var t,n,r,i=e.integration,a=e.type,s=e.canApproveProd,o=e.notApplied,l=e.onApproved,c=(0,h.useState)(!1),p=c[0],v=c[1],b=(0,h.useState)([]),x=b[0],g=b[1],y=(t=(0,d.Z)(f().mark(function e(){var t,n,r,s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,F.v)({requestId:Number(i.id),eventCode:"all"});case 4:n=e.sent,(r=(0,u.Z)(n,1)[0])&&(null==r||null===(t=r.rows)||void 0===t?void 0:t.length)>0&&(s=[],r.rows.forEach(function(e){var t;null!=e&&null!==(t=e.details)&&void 0!==t&&null!==(t=t.changes)&&void 0!==t&&t.find(function(e){return(null==e?void 0:e.path.includes(z[a]))&&!0===e.rhs})&&s.push(e)}),s.length>0&&g(s));case 8:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});if((0,h.useEffect)(function(){y()},[null==i?void 0:i.id,null==i?void 0:i.bceidApproved,null==i?void 0:i.githubApproved,null==i?void 0:i.bcServicesCardApproved]),!i)return null;var C=m()(a),E=z[a],P=!1;switch(a){case"bceid":P=(0,w.he)(i);break;case"github":P=(0,w.R5)(i);break;case"BCServicesCard":P=(0,w.kF)(i);break;case"social":P=(0,w.HW)(i)}r=null!=i&&i.archived?(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("p",{children:"Cannot approve deleted/archived integrations."})}):s?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("p",{children:"To begin the ".concat(C," integration in production, Click Below.")}),(0,R.jsx)("button",{className:"primary",onClick:function(){v(!0)},disabled:o,children:"Approve Prod"})]}):o&&P?(0,R.jsx)("div",{style:{display:"inline-flex",background:"#FFCCCB",borderRadius:"5px"},children:(0,R.jsx)("div",{style:{padding:5},children:(0,R.jsxs)(G.B,{children:["Your request for ",a," approval could not be completed. Please"," ",(0,R.jsx)(W.rU,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})}):(0,R.jsx)(R.Fragment,{children:x.length>0?x.map(function(e){return(0,R.jsxs)("p",{style:{marginBottom:"5px"},"data-testid":"idp-approved-note",children:["Approved by ",(0,R.jsx)("b",{children:null==e?void 0:e.idirUserDisplayName})," on"," ",(0,R.jsx)("b",{children:new Date(null==e?void 0:e.createdAt).toLocaleString()})]},e.id)}):(0,R.jsx)("p",{children:"This integration has already been approved."})});var Z=(n=(0,d.Z)(f().mark(function e(){var t,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.WN)(V(V({},i),{},(0,_.Z)({},E,!0)),!0);case 2:t=e.sent,n=(0,u.Z)(t,2)[1],l&&!n&&l();case 6:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(Y,{children:[(0,R.jsx)("br",{}),r]}),(0,R.jsx)(A.Z,{id:"".concat(a,"-approval-modal"),openModal:p,handleClose:function(){return v(!1)},content:"Are you sure you want to approve this integration for ".concat(C," production?"),onConfirm:Z,icon:j.eHv,title:"".concat(C," Approve")})]})},J=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,i=t.bceidApproved;return(0,R.jsx)(X,{type:"bceid",integration:t,canApproveProd:!i,notApplied:"applied"!==r,onApproved:n})},ee=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,i=t.githubApproved;return(0,R.jsx)(X,{type:"github",integration:t,canApproveProd:!i,notApplied:"applied"!==r,onApproved:n})},et=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,i=t.bcServicesCardApproved;return(0,R.jsx)(X,{type:"BCServicesCard",integration:t,canApproveProd:!i,notApplied:"applied"!==r,onApproved:n})},en=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,i=t.socialApproved;return(0,R.jsx)(X,{type:"social",integration:t,canApproveProd:!i,notApplied:"applied"!==r,onApproved:n})},er=n(83585),ei=E.ZP.div(s||(s=(0,p.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n"]))),ea=function(e){var t=e.currentUser,n=e.integration,r=e.defaultTabKey,i=e.setActiveKey,a=e.setRows,s=e.activeKey,o=(0,h.useState)("dev"),l=o[0],c=o[1],u=!(null!=n&&n.archived)&&!(null!=n&&n.apiServiceAccount)&&t.isAdmin,d=t.isAdmin;if(!n)return null;var p=n.environments,v=void 0===p?[]:p,f=v.includes("prod"),b=(0,Z.Jx)(n)&&f&&(t.isAdmin||(0,w.cN)(t)),x=(0,Z.dV)(n)&&f&&(t.isAdmin||(0,w.LS)(t)),j=(0,Z.e$)(n)&&f&&(t.isAdmin||(0,w.T0)(t)),g=(0,Z.dw)(n)&&f&&(t.isAdmin||(0,w.XI)(t));return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(P.mQ,{activeKey:void 0===s?r:s,onChange:function(e){return i(e)},tabBarGutter:30,children:[(0,R.jsx)(P.OK,{tab:"Details",children:(0,R.jsx)(ei,{children:(0,R.jsx)(D,{currentUser:t,request:n,onUpdate:a})})},"details"),b&&(0,R.jsx)(P.OK,{tab:"BCeID Prod",children:(0,R.jsx)(J,{integration:n,onApproved:function(){return a()}})},"bceid-prod"),x&&(0,R.jsx)(P.OK,{tab:"GitHub Prod",children:(0,R.jsx)(ee,{integration:n,onApproved:function(){return a()}})},"github-prod"),j&&(0,R.jsx)(P.OK,{tab:"BC Services Card Prod",children:(0,R.jsx)(et,{integration:n,onApproved:function(){return a()}})},"bcsc-prod"),g&&(0,R.jsx)(P.OK,{tab:"Social Prod",children:(0,R.jsx)(en,{integration:n,onApproved:function(){return a()}})},"social-prod"),d&&(0,R.jsx)(P.OK,{tab:"Events",children:(0,R.jsx)(ei,{children:(0,R.jsx)(Q,{requestId:n.id})})},"events"),u&&(0,R.jsx)(P.OK,{tab:"Roles",children:(0,R.jsx)(ei,{children:(0,R.jsxs)(P.mQ,{onChange:c,activeKey:l,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,R.jsx)("br",{}),v.map(function(e){return(0,R.jsx)(P.OK,{tab:m()(e),children:(0,R.jsx)(er.Z,{environment:e,integration:n,viewOnly:!0})},e)})]})})},"roles")]})})},es=n(46312),eo=n(82587),el=n(89666),ec=E.ZP.div(o||(o=(0,p.Z)(["\n  height: 100%;\n  overflow: auto;\n"]))),eu=function(e){var t=e.leftPanel,n=e.rightPanel,r=e.showResizable;return e.children,(0,R.jsxs)(eo.Z,{rules:el.F,children:[void 0===r||r?(0,R.jsx)(es.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.45*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,R.jsx)(ec,{children:t&&t()})}):t&&t(),(0,R.jsx)("br",{}),n&&n()]})},ed=n(40291),ep=n(35685),ev=n(70928),ef=n(4680),eh=n(86022),eb=n(94934),ex=n(34798),em=n.n(ex),ej=n(34155),eg=[{value:"idir",label:"IDIR"},{value:"bceid",label:"BCeID"},{value:"github",label:"GitHub"},{value:"digitalcredential",label:"Digital Credential"},{value:"bcservicescard",label:"BC Services Card"},{value:"social",label:"Social"}],eS=[{value:"active",label:"Active"},{value:"archived",label:"Deleted"}],ey=[{value:"dev",label:"Dev"},{value:"test",label:"Test"},{value:"prod",label:"Prod"}],eA=[5,10,15,30,50,100];function eC(){return(0,R.jsx)("span",{style:{marginLeft:"40%"},children:"Actions"})}var ew=E.ZP.div(l||(l=(0,p.Z)(["\n  .restoration-email-select {\n    * {\n      visibility: inherit;\n    }\n  }\n  label {\n    margin-bottom: 0.5em;\n  }\n  .error-text {\n    margin-top: 0.5em;\n    color: red;\n  }\n"]))),eE=function(e){var t,n,r=e.selectedIntegration,i=e.loadData,a=e.alert,s=e.showModal,o=e.handleCloseModal,l=(0,h.useState)(!1),c=l[0],p=l[1],v=(0,h.useState)(!1),b=v[0],x=v[1],m=(0,h.useState)(""),j=m[0],g=m[1],y=(0,h.useState)(""),C=y[0],w=y[1],E=(t=(0,d.Z)(f().mark(function e(){var t,n,i;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,(0,ed.Um)(String(r.teamId));case 3:t=e.sent,i=(n=(0,u.Z)(t,2))[0],n[1],p(!!i),x(!1);case 9:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,h.useEffect)(function(){w(""),g(""),null!=r&&r.usesTeam&&E()},[null==r?void 0:r.id]),(0,h.useEffect)(function(){w("")},[j]);var P=(n=(0,d.Z)(f().mark(function e(){var t,n,s,o,l,d;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(null!=r&&r.usesTeam&&c),n=!1,!(t&&!j)){e.next=5;break}return w("Please select an email address to restore the integration to."),e.abrupt("return");case 5:if(!(null!=r&&r.apiServiceAccount)){e.next=15;break}return e.next=8,(0,ed.NU)(Number(null==r?void 0:r.teamId),null==r?void 0:r.id);case 8:s=e.sent,(o=(0,u.Z)(s,2))[0],n=!!o[1],e.next=22;break;case 15:return e.next=17,(0,S.OS)(null==r?void 0:r.id,j);case 17:l=e.sent,(d=(0,u.Z)(l,2))[0],n=!!d[1];case 22:return n&&a.show({variant:"danger",content:"Failed to restore integration, please try again."}),e.next=25,i();case 25:Z();case 26:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),Z=function(){g(""),w("")};if(!r)return null;var O="";return O=b?"Checking if the team exists...":r.usesTeam&&c?"You are about to restore this integration.":r.apiServiceAccount&&!c?"Cannot restore this team account, team does not exist.":(0,R.jsxs)(ew,{children:[(0,R.jsx)("label",{htmlFor:"restoration-email-select",children:"Please validate the requestor who is asking to restore (get one more government employee confirming their role). Please enter new requestor email address. Note this requestor can then assign to a new team as needed."}),(0,R.jsx)(ep.Z,{loadOptions:eh.c,value:{value:j,label:j},onChange:function(e){return g((null==e?void 0:e.label)||"")},noOptionsMessage:function(){return"Start typing email..."},maxMenuHeight:120,placeholder:"Enter email address",id:"restoration-email-select",className:"restoration-email-select"}),C&&(0,R.jsx)("p",{className:"error-text",children:"Select an email address"})]}),(0,R.jsx)(A.Z,{id:"restore-modal","data-testid":"modal-restore-integration",content:O,onConfirm:P,confirmText:"Restore",title:"Confirm Restoration",showConfirm:!(r.apiServiceAccount&&!c),openModal:s,handleClose:o})},eP=(0,ef.hU)(function(e){var t,n,r,i,a,s,o,l,p=e.session,v=e.alert,x=(0,b.useRouter)(),A=(0,h.useState)(!1),E=A[0],P=A[1],Z=(0,h.useState)(!1),O=Z[0],k=Z[1],I=(0,h.useState)([]),T=I[0],D=I[1],_=(0,h.useState)(String((null===(o=x.query)||void 0===o?void 0:o.id)||"")),q=_[0],N=_[1],F=(0,h.useState)(0),K=F[0],L=F[1],M=(0,h.useState)(5),B=M[0],H=M[1],Q=(0,h.useState)(1),G=Q[0],W=Q[1],$=(0,h.useState)(Number(null===(l=x.query)||void 0===l?void 0:l.id)||void 0),V=$[0],Y=$[1],z=(0,h.useState)([]),X=z[0],J=z[1],ee=(0,h.useState)([]),et=ee[0],en=ee[1],er=(0,h.useState)([]),ei=er[0],es=er[1],eo=(0,h.useState)([{value:"active",label:"Active"}]),el=eo[0],ec=eo[1],ep=(0,h.useState)("details"),ef=ep[0],eh=ep[1],ex=(0,h.useState)(!1),ew=ex[0],eP=ex[1],eZ=(0,h.useState)(!1),eO=eZ[0],ek=eZ[1],eU=T.find(function(e){return e.id===V}),eR=(0,h.useState)([{value:X,multiselect:!0,onChange:J,options:ey,label:"Environments"},{value:ei,multiselect:!0,onChange:es,options:U,label:"Workflow Status"},{value:el,multiselect:!0,onChange:ec,options:eS,defaultValue:el,label:"Archive Status"}]),eI=eR[0],eT=eR[1],eD=(t=(0,d.Z)(f().mark(function e(){var t,n,r,i,a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,w.UT)(et,X),r=(n=(0,u.Z)(t,3))[0],i=n[1],a=n[2],e.abrupt("return",(0,S.zD)({searchField:["id","projectName","clientId"],searchKey:q,order:[["updatedAt","desc"],["status","desc"]],limit:B,page:G,status:ei.map(function(e){return e.value}),archiveStatus:el.map(function(e){return e.value}),realms:i,environments:a,types:["gold"],devIdps:r}));case 2:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),e_=(n=(0,d.Z)(f().mark(function e(){var t,n,r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,eD();case 3:t=e.sent,r=(n=(0,u.Z)(t,2))[0],n[1]?k(!0):r&&(D(r.rows),L(r.count)),P(!1);case 9:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});if((0,h.useEffect)(function(){p.isAdmin||(0,w.HK)(p)?(p.isAdmin&&!eI.find(function(e){return"IDPs"===e.label})&&eT([].concat((0,c.Z)(eI),[{value:et,multiselect:!0,onChange:en,options:eg,label:"IDPs"}])),Y(void 0),e_()):x.push("/my-dashboard")},[q,B,G,ei,el,et,X]),O)return(0,R.jsx)(ev.q1,{});var eq=function(e){return!e.archived&&["applied"].includes((null==e?void 0:e.status)||"")&&!e.apiServiceAccount},eN=function(e){return!0!==e.archived&&!["pr","planned","submitted"].includes((null==e?void 0:e.status)||"")},eF=function(e){return!1!==e.archived&&!!["applied"].includes((null==e?void 0:e.status)||"")},eK=(r=(0,d.Z)(f().mark(function e(t){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eq(t))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,x.push("/request/".concat(t.id,"?status=").concat(t.status));case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),eL=(i=(0,d.Z)(f().mark(function e(t){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eN(t))){e.next=2;break}return e.abrupt("return");case 2:Y(t.id),ek(!0);case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),eM=(a=(0,d.Z)(f().mark(function e(t){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eF(t))){e.next=2;break}return e.abrupt("return");case 2:Y(t.id),eP(!1),ej.nextTick(function(){eP(!0)});case 5:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),eB=(s=(0,d.Z)(f().mark(function e(){var t,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eN){e.next=2;break}return e.abrupt("return");case 2:if(!(null!=eU&&eU.apiServiceAccount)){e.next=8;break}return e.next=5,(0,ed.yN)(null==eU?void 0:eU.teamId,V);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,(0,S.Jl)(V);case 10:e.t0=e.sent;case 11:return t=e.t0,(n=(0,u.Z)(t,2))[0],n[1]&&v.show({variant:"danger",content:"Failed to delete the integration, please try again."}),e.next=18,e_();case 18:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)}),eH=function(e){Y(e.cells[0].value),eh("details")};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(eu,{leftPanel:function(){return(0,R.jsx)(g.Z,{searchPlaceholder:"Project ID, Project Name or Client ID",headers:[{accessor:"id",Header:"Request ID"},{accessor:"clientId",Header:"Client ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"status",Header:"Request Status"},{accessor:"archived",Header:"File Status"},{accessor:"actions",Header:(0,R.jsx)(eC,{}),disableSortBy:!0}],data:T.map(function(e){return{id:e.id,projectName:e.projectName,status:m()(e.status),archived:e.archived?"Deleted":"Active",environments:e.environments,clientId:e.clientId,actions:p.isAdmin?(0,R.jsxs)(y.c4,{children:[(0,R.jsx)(y.Kk,{icon:j.Mdf,role:"button","aria-label":"events",onClick:function(t){t.stopPropagation(),Y(e.id),eh("events")},title:"Events"}),(0,R.jsx)(y.MO,{}),(0,R.jsx)(y.Kk,{disabled:!eq(e),icon:j.Xcf,role:"button","aria-label":"edit",onClick:function(){return eK(e)},title:"Edit"}),(0,R.jsx)(y.MO,{}),(0,R.jsx)(y.Kk,{icon:j.$aW,role:"button","aria-label":"delete",onClick:function(){return eL(e)},disabled:!eN(e),activeColor:C.Uo,title:"Delete from Keycloak"}),(0,R.jsx)(y.MO,{}),(0,R.jsx)(y.Kk,{icon:j.pdr,role:"button","aria-label":"restore",onClick:function(){return eM(e)},disabled:!eF(e),activeColor:C.Uo,title:"Restore at Keycloak"})]}):em()}}),activateRow:eH,colfilters:eI,showFilters:!0,loading:E,totalColSpan:15,searchColSpan:5,headerAlign:"bottom",headerGutter:[5,0],onPage:W,rowCount:K,searchKey:q,onSearch:function(e){N(e)},onEnter:function(e){N(e)},pageLimits:eA,limit:B,onLimit:function(e){W(1),H(e)},noDataFoundElement:(0,R.jsx)("div",{style:{textAlign:"center"},children:"No clients found."}),pagination:!0})},rightPanel:function(){return eU&&(0,R.jsx)(ea,{currentUser:p,integration:eU,defaultTabKey:"details",setActiveKey:eh,activeKey:ef,setRows:e_})}}),(0,R.jsx)(eb.Z,{id:"delete-modal",projectName:null==eU?void 0:eU.projectName,onConfirm:eB,title:"Confirm Deletion",content:"You are about to delete this integration request. This action cannot be undone.",openModal:eO,handleCloseModal:function(){return ek(!1)}}),(0,R.jsx)(eE,{selectedIntegration:eU,loadData:e_,alert:v,showModal:ew,handleCloseModal:function(){return eP(!1)}})]})})},25809:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin-dashboard",function(){return n(32960)}])},35685:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(2717),i=n(67294),a=n(28648),s=n(65342),o=n(28549),l=n(33417),c=n(70292),u=n(30138),d=n(17609),p=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];n(73935),n(73469);var v=(0,i.forwardRef)(function(e,t){var n,v,f,h,b,x,m,j,g,S,y,A,C,w,E,P,Z,O,k,U,R,I,T,D,_,q,N,F,K,L,M,B,H,Q,G,W,$,V,Y,z,X,J,ee,et,en,er,ei,ea,es,eo,el,ec=(v=void 0!==(n=e.defaultOptions)&&n,h=void 0!==(f=e.cacheOptions)&&f,b=e.loadOptions,e.options,x=e.isLoading,m=e.onInputChange,j=e.filterOption,S=(g=(0,u.Z)(e,p)).inputValue,y=(0,i.useRef)(void 0),A=(0,i.useRef)(!1),C=(0,i.useState)(Array.isArray(v)?v:void 0),E=(w=(0,c.Z)(C,2))[0],P=w[1],Z=(0,i.useState)(void 0!==S?S:""),k=(O=(0,c.Z)(Z,2))[0],U=O[1],R=(0,i.useState)(!0===v),T=(I=(0,c.Z)(R,2))[0],D=I[1],_=(0,i.useState)(void 0),N=(q=(0,c.Z)(_,2))[0],F=q[1],K=(0,i.useState)([]),M=(L=(0,c.Z)(K,2))[0],B=L[1],H=(0,i.useState)(!1),G=(Q=(0,c.Z)(H,2))[0],W=Q[1],$=(0,i.useState)({}),Y=(V=(0,c.Z)($,2))[0],z=V[1],X=(0,i.useState)(void 0),ee=(J=(0,c.Z)(X,2))[0],et=J[1],en=(0,i.useState)(void 0),ei=(er=(0,c.Z)(en,2))[0],ea=er[1],h!==ei&&(z({}),ea(h)),v!==ee&&(P(Array.isArray(v)?v:void 0),et(v)),(0,i.useEffect)(function(){return A.current=!0,function(){A.current=!1}},[]),es=(0,i.useCallback)(function(e,t){if(!b)return t();var n=b(e,t);n&&"function"==typeof n.then&&n.then(t,function(){return t()})},[b]),(0,i.useEffect)(function(){!0===v&&es(k,function(e){A.current&&(P(e||[]),D(!!y.current))})},[]),eo=(0,i.useCallback)(function(e,t){var n=(0,d.L)(e,t,m);if(!n){y.current=void 0,U(""),F(""),B([]),D(!1),W(!1);return}if(h&&Y[n])U(n),F(n),B(Y[n]),D(!1),W(!1);else{var r=y.current={};U(n),D(!0),W(!N),es(n,function(e){A&&r===y.current&&(y.current=void 0,D(!1),F(n),B(e||[]),W(!1),z(e?(0,l.Z)((0,l.Z)({},Y),{},(0,o.Z)({},n,e)):Y))})}},[h,es,N,Y,m]),el=G?[]:k&&N?M:E||[],(0,l.Z)((0,l.Z)({},g),{},{options:el,isLoading:T||void 0!==x&&x,onInputChange:eo,filterOption:void 0===j?null:j})),eu=(0,s.u)(ec);return i.createElement(a.S,(0,r.Z)({ref:t},eu))})}},function(e){e.O(0,[662,925,130,930,479,968,680,734,888,774,179],function(){return e(e.s=25809)}),_N_E=e.O()}]);