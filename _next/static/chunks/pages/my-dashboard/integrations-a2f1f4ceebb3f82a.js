(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{83333:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r,i=t(71383);t(67294);var a=t(71893),o=t(31513),s=t(85893),c=a.ZP.div(r||(r=(0,i.Z)(["\n  margin-top: 20px;\n  max-height: calc(100vh - 250px);\n  overflow: auto;\n"])));function l(e){var n=e.events;return(0,s.jsx)(c,{children:n&&0!==n.length?n.map(function(e){var n;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Event Code: "}),e.eventCode]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Created Time: "}),(n=e.createdAt,new Date(n).toLocaleString())]}),e.idirUserDisplayName&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Created By: "}),e.idirUserDisplayName]})}),e.details&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:"Details"})}),"request-update-success"===e.eventCode?(0,s.jsxs)(s.Fragment,{children:[(0,o.Sx)(e.details.changes),(0,s.jsx)("strong",{children:"Comment: "}),(0,s.jsx)("p",{children:e.details.comment})]}):(0,s.jsx)("pre",{children:(0,s.jsx)("code",{children:JSON.stringify(e.details||{},void 0,2)})})]}),(0,s.jsx)("hr",{})]},e.id)}):(0,s.jsx)("div",{children:"No events found"})})}},63005:function(e,n,t){"use strict";t.d(n,{S:function(){return r}});var r={idir:"IDIR",azureidir:"Azure IDIR",bceidbasic:"Basic BCeID",bceidbusiness:"Business BCeID",bceidboth:"Basic or Business BCeID",githubbcgov:"GitHub BC Gov",githubpublic:"GitHub",digitalcredential:"Digital Credential"}},71057:function(e,n,t){"use strict";var r=t(83024),i=t(63055),a={shared:{button:"\n      border-radius: 0.222em;\n      border-width: 0;\n      padding: 0.6em 1.1em;\n      text-align: center;\n      text-decoration: none;\n      font-weight: 700;\n      letter-spacing: 1px;\n      display: inline-block;\n      cursor: pointer;\n      box-shadow: 0px 0px 0px 2px transparent inset, 0px 0em 0px 0px rgba(34, 36, 38, 0.15) inset;\n    "},size:{xsmall:{button:"\n        font-size: 0.7rem;\n      "},small:{button:"\n        font-size: 0.8rem;\n      "},medium:{button:"\n        font-size: ".concat(i.n5,";\n      ")},large:{button:"\n        font-size: ".concat(i.zA,";\n      ")}},variant:{primary:{button:"\n        background-color: #D5EDFF;\n        box-shadow: 0px 0px 0px 2px #D5EDFF inset !important;\n        color: #3E3E3E;\n\n        &:hover {\n          text-decoration: underline;\n          background-color: #FFF7D5;\n          box-shadow: 0px 0px 0px 2px #FFF7D5 inset !important;\n          opacity: 0.80;\n        }\n\n        &:active {\n          opacity: 1;\n        }\n      "},grey:{button:"\n        background-color: #B2B2B2;\n        box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        color: #F8F8F8;\n        min-width: 110px;\n\n        &:hover {\n          background-color: ".concat(i.TU,";\n          box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        }\n      ")}}},o=(0,r.applyTheme)(a,{defaultProps:{variant:"primary",size:"medium"},breakProps:[],staticProps:["fullHeight","fullWidth"]});n.Z=o},77740:function(e,n,t){"use strict";t.d(n,{F:function(){return r}});var r={"browser-login":"Browser Login","service-account":"Service Account",both:"Browser Login & Service Account"}},48398:function(e,n,t){"use strict";t.d(n,{V:function(){return h},q:function(){return p}});var r,i,a=t(71383),o=t(71893),s=t(99603),c=t(59417),l=t(85893),u=o.ZP.div(r||(r=(0,a.Z)(["\n  color: #a12622;\n  height: 60px;\n  padding-left: 20px;\n  padding-top: 16px;\n  padding-bottom: 22px;\n  weight: 700;\n  background-color: #f2dede;\n"]))),d=o.ZP.div(i||(i=(0,a.Z)(["\n  color: #006fc4;\n  height: 60px;\n  padding-left: 20px;\n  padding-top: 16px;\n  padding-bottom: 22px;\n  weight: 700;\n  background-color: #f8f8f8;\n"]))),p=function(){return(0,l.jsxs)(u,{children:[(0,l.jsx)(s.G,{icon:c.RLE,title:"Unavailable"}),"\xa0 The system is unavailable at this moment. please refresh the page."]})},h=function(e){var n=e.message;return(0,l.jsxs)(d,{children:[(0,l.jsx)(s.G,{icon:c.sqG,title:"Information"}),"\xa0 ",n]})}},6178:function(e,n,t){"use strict";var r,i=t(71383);t(67294);var a=t(11163),o=t(46312),s=t(71893),c=t(85330),l=t(59912),u=t(49910),d=t(85893),p=s.ZP.div(r||(r=(0,i.Z)(["\n  height: 100%;\n  overflow: auto;\n"])));n.Z=function(e){var n=e.tab,t=e.leftPanel,r=e.rightPanel,i=e.showResizable;e.children;var s=(0,a.useRouter)(),h=(0,d.jsxs)(c.mQ,{onChange:function(e){s.replace("/my-dashboard/".concat(e))},activeKey:n,tabBarGutter:30,children:[(0,d.jsx)(c.OK,{tab:"My Projects"},"integrations"),(0,d.jsx)(c.OK,{tab:"My Teams"},"teams")]});return(0,d.jsxs)(l.Z,{rules:u.F,children:[h,void 0===i||i?(0,d.jsx)(o.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,d.jsx)(p,{children:t&&t()})}):t&&t(),(0,d.jsx)("br",{}),r&&r()]})}},74480:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ia}});var r,i,a,o,s,c,l,u,d,p,h,f,x,v,m,g,b,j,y,w,Z,P,k,S,C,I,O,N,D,R,F,E,T,B,A,G,z,q,U,L,K,M,H,V,_,W,Y,$,J,Q,X,ee,en,et,er,ei,ea,eo,es,ec,el,eu,ed,ep,eh,ef,ex,ev,em,eg,eb,ej,ey,ew,eZ,eP,ek,eS=t(50029),eC=t(71383),eI=t(87794),eO=t.n(eI),eN=t(67294),eD=t(71893),eR=t(59499),eF=t(16530),eE=t(69829),eT=t(85893);function eB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eA(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eB(Object(t),!0).forEach(function(n){(0,eR.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eG=(0,eF.applyTheme)({shared:{container:"\n      line-height: 1.5em;\n      border: 1px solid transparent;\n      border-radius: 0.2222em;\n      padding: 1em 0.5em;\n\n      & a {\n        text-decoration: underline;\n      }\n\n      & .pg-notification-content>svg {\n        overflow: initial;\n      }\n    ",close:"\n      cursor: pointer !important;\n      text-align: center;\n      text-decoration: none;\n      border-radius: 0.2222em;\n      padding: 0.4em 0.5em;\n      margin-right: 20px;\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},variant:{success:{container:"\n        background-color: #dff0d8;\n        border-color: #d6e9c6;\n        color: #2d4821;\n\n        & a {\n          color: #2b542c;\n        }\n      ",content:"\n        color: #2d4821;\n      ",close:"\n        color: #2d4821;\n        border: 1px solid #2d4821;\n\n        &:hover {\n          background: #2d4821;\n          color: #fff;\n        }\n      ",group:"\n        color: #2d4821;\n      "},info:{container:"\n        background-color: #d9eaf7;\n        border-color: #afd3ee;\n        color: #313132;\n\n        & a {\n          color: #1a5a96;\n        }\n      ",content:"\n        color: #313132;\n      ",close:"\n        color: #313132;\n        border: 1px solid #313132;\n\n        &:hover {\n          background: #313132;\n          color: #fff;\n        }\n      ",group:"\n        color: #313132;\n      "},warning:{container:"\n        background-color: #f9f1c6;\n        border-color: #faebcc;\n        color: #6c4a00;\n\n        & a {\n          color: #66512c;\n        }\n      ",content:"\n        color: #66512c;\n      ",close:"\n        color: #66512c;\n        border: 1px solid #66512c;\n\n        &:hover {\n          background: #66512c;\n          color: #fff;\n        }\n      ",group:"\n        color: #66512c;\n      "},danger:{container:"\n        background-color: #f2dede;\n        border-color: #ebccd1;\n        color: #a12622;\n\n        & a {\n          color: #843534;\n        }\n      ",content:"\n        color: #a12622;\n      ",close:"\n        color: #a12622;\n        border: 1px solid #a12622;\n\n        &:hover {\n          background: #a12622;\n          color: #fff;\n        }\n      ",group:"\n        color: #a12622;\n      "}},flex:{container:"\n      display: flex;\n    ",group:"\n      margin: auto 0.5rem;\n    "}},{defaultProps:{variant:"info",size:"medium",flex:!0},staticProps:[]},{group:{align:{left:"\n        margin-right: auto;\n    ",right:"\n        margin-left: auto;\n    "}}}),ez=function(e){switch(e){case"success":return eE.CheckCircle;case"info":return eE.InfoCircle;case"warning":return eE.ExclamationTriangle;default:return eE.ExclamationCircle}};function eq(e){return(0,eT.jsxs)(eG,eA(eA({},e),{},{children:[(0,eT.jsx)(eG.Group,{style:{marginTop:"1px"},children:(0,eT.jsx)(eE.FaSVG,{children:(0,eT.jsx)("path",{fill:"currentColor",d:ez(e.variant)})})}),(0,eT.jsx)(eG.Content,{children:e.content?e.content:e.children}),e.closable&&(0,eT.jsx)(eG.Group,{align:"right",children:(0,eT.jsx)(eG.Close,{children:"x"})})]}))}var eU=t(16835),eL=t(99603),eK=t(59417),eM=t(64735),eH=t(42894),eV=t(21963),e_=(r=(0,eS.Z)(eO().mark(function e(n,t){var r;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eV.e.post("installation",{requestId:n,environment:t}).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return r.apply(this,arguments)}),eW=(i=(0,eS.Z)(eO().mark(function e(n,t){var r;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eV.e.put("installation",{requestId:n,environment:t}).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return i.apply(this,arguments)}),eY=(a=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,o,s;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.idp,i=n.property,a=n.searchKey,o=n.integrationId,e.prev=1,e.next=4,eV.e.post("keycloak/users",{environment:t,idp:r,property:i,searchKey:a,integrationId:o}).then(function(e){return e.data});case 4:return s=e.sent,e.abrupt("return",[s,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return a.apply(this,arguments)}),e$=(o=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,o;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,a=void 0===(i=n.search)?"":i,e.prev=1,e.next=4,eV.e.post("keycloak/roles",{environment:t,integrationId:r,search:a}).then(function(e){return e.data});case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return o.apply(this,arguments)}),eJ=(s=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,o;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,a=n.compositeRoleNames,e.prev=1,e.next=4,eV.e.post("keycloak/set-composite-roles",{environment:t,integrationId:r,roleName:i,compositeRoleNames:a}).then(function(e){return e.data});case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return s.apply(this,arguments)}),eQ=(c=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,e.prev=1,e.next=4,eV.e.post("keycloak/get-composite-roles",{environment:t,integrationId:r,roleName:i}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return c.apply(this,arguments)}),eX=(l=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,o,s,c,l;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,o=void 0===(a=n.first)?0:a,c=void 0===(s=n.max)?50:s,e.prev=1,e.next=4,eV.e.post("keycloak/user-roles",{environment:t,integrationId:r,username:i,first:o,max:c}).then(function(e){return e.data});case 4:return l=e.sent,e.abrupt("return",[l,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return l.apply(this,arguments)}),e0=(u=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,o,s;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,a=n.roleName,o=n.mode,e.prev=1,e.next=4,eV.e.put("keycloak/user-role",{environment:t,integrationId:r,username:i,roleName:a,mode:o}).then(function(e){return e.data});case 4:return s=e.sent,e.abrupt("return",[s,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return u.apply(this,arguments)}),e1=(d=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,o;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,a=n.roleNames,e.prev=1,e.next=4,eV.e.put("keycloak/user-roles",{environment:t,integrationId:r,username:i,roleNames:a}).then(function(e){return e.data});case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return d.apply(this,arguments)}),e2=(p=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,o,s,c,l;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,o=void 0===(a=n.first)?0:a,c=void 0===(s=n.max)?50:s,e.prev=1,e.next=4,eV.e.post("keycloak/role-users",{environment:t,integrationId:r,roleName:i,first:o,max:c}).then(function(e){return e.data});case 4:return l=e.sent,e.abrupt("return",[l,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return p.apply(this,arguments)}),e3=(h=(0,eS.Z)(eO().mark(function e(n){var t,r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.integrationId,r=n.roles,e.prev=1,e.next=4,eV.e.post("keycloak/bulk-roles",{integrationId:t,roles:r}).then(function(e){return e.data});case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return h.apply(this,arguments)}),e4=(f=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,e.prev=1,e.next=4,eV.e.post("keycloak/delete-role",{environment:t,integrationId:r,roleName:i}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return f.apply(this,arguments)}),e8=t(71057),e5=t(73923),e7=t(31513),e6=t(63055),e9=t(15812),ne=t(44e3),nn=t(63005),nt=t(74150),nr=eD.ZP.div(g||(g=(0,eC.Z)(["\n  text-align: center;\n"]))),ni=eD.ZP.div(b||(b=(0,eC.Z)(["\n  color: #000;\n  font-size: ",";\n  font-weight: bold;\n"])),e6.n5),na=eD.ZP.span(j||(j=(0,eC.Z)(["\n  color: #3e3e3e;\n  font-size: 14px;\n  font-weight: 700;\n"]))),no=eD.ZP.div(y||(y=(0,eC.Z)(["\n  height: var(--field-top-spacing);\n"]))),ns=eD.ZP.div(w||(w=(0,eC.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),nc=(0,e9.hU)(function(e){var n,t,r,i=e.integration,a=e.alert,o=(0,eN.useState)(!1),s=o[0],c=o[1],l=(n=(0,eS.Z)(eO().mark(function e(n){var t,r;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,e_(i.id,n);case 3:return t=e.sent,r=(0,eU.Z)(t,1)[0],c(!1),e.abrupt("return",r);case 8:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),u=(t=(0,eS.Z)(eO().mark(function e(n){var t,r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:t=e.sent,(0,e5.TE)((0,e5.ON)(t)),r=t?"success":"danger",i=t?"Installation copied to clipboard":"Failed to download installation",a.show({variant:r,fadeOut:1e4,closable:!0,content:i});case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),d=(r=(0,eS.Z)(eO().mark(function e(n){var t;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:t=e.sent,(0,e5.Di)((0,e5.ON)(t),"".concat(i.projectName,"-installation-").concat(n,".json"));case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return s?(0,eT.jsxs)(nr,{children:[(0,eT.jsx)(no,{}),(0,eT.jsx)(eH.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(no,{}),(0,eT.jsx)(ns,{children:"Installation JSONs"}),(0,eT.jsx)("br",{}),(0,eT.jsx)(eM.ZP,{cols:3,children:(0,e7.Dy)(i).map(function(e){if("service-account"!==i.authType&&0===e.idps.length)return null;var n=e.idps.length>0?"(".concat(e.idps.map(function(e){return nn.S[e]}).join(", "),")"):"";return(0,eT.jsxs)(eN.Fragment,{children:[(0,eT.jsx)(eM.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,eT.jsx)(eM.ZP.Col,{span:1,style:{width:"100%",height:"30px"},children:(0,eT.jsxs)(ni,{children:[e.display," ",n]})})}),(0,eT.jsx)(eM.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,eT.jsxs)(eM.ZP.Col,{span:3,children:[(0,eT.jsx)(e8.Z,{size:"medium",variant:"grey",onClick:function(){return u(e.name)},children:"Copy"}),"\xa0",(0,eT.jsx)(e8.Z,{size:"medium",variant:"grey",onClick:function(){return d(e.name)},children:"Download"}),"\xa0\xa0",(0,eT.jsx)(eL.G,{color:"green",icon:eK.f8k,title:"Ready"}),"\xa0",(0,eT.jsx)(na,{children:"Ready"})]})}),(0,eT.jsx)("br",{})]},e.name)})}),(0,eT.jsxs)(ne.$,{children:["For more information on how to use these details, or for the public endpoints associated to your client,"," ",(0,eT.jsx)(nt.default,{href:"https://bcgov.github.io/sso-docs/integrating-your-application/installation-json",external:!0,children:"click to learn more on our wiki page"}),"."]})]})}),nl=t(4826),nu=t(61165),nd=eD.ZP.div(Z||(Z=(0,eC.Z)(["\n  height: var(--field-top-spacing);\n"]))),np=eD.ZP.span(P||(P=(0,eC.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"])));(0,eD.ZP)(eL.G)(k||(k=(0,eC.Z)(["\n  margin-right: 20px;\n"])));var nh=eD.ZP.div(S||(S=(0,eC.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"])));eD.ZP.hr(C||(C=(0,eC.Z)(["\n  background-color: black;\n"])));var nf=(0,e9.hU)(function(e){var n,t=e.selectedRequest,r=e.alert,i=(0,eN.useState)(null),a=i[0],o=i[1],s=(0,e7.Dy)(t),c=function(e){o(e),window.location.hash="confirm-new-secret"},l=(n=(0,eS.Z)(eO().mark(function e(){var n,i,o,s,c,l;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eW(t.id,(null==a?void 0:a.name)||null);case 2:n=e.sent,o=(i=(0,eU.Z)(n,2))[0],c=(s=i[1])?"danger":"success",l=s?"Failed to regenerate secret":"Client Secret Successfully Updated",r.show({variant:c,fadeOut:1e4,closable:!0,content:l}),window.location.hash="#",console.error(o,s);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),u=(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsxs)(nh,{children:[(0,eT.jsxs)("strong",{children:["You are about to change your client secret for your ",null==a?void 0:a.display," environment."]})," "]}),(0,eT.jsx)("br",{}),(0,eT.jsx)("p",{children:"Once you change your secret, your previous secret will no longer be valid for any applications using it."}),(0,eT.jsx)("p",{children:"This means you will need to update any applications using this client with the new JSON details before they are functional again."})]});return(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(nd,{}),s.map(function(e){return(0,eT.jsxs)(eN.Fragment,{children:[(0,eT.jsxs)(np,{children:[e.display,": "]}),!t.publicAccess&&(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)("br",{}),(0,eT.jsx)(nl.default,{type:"button",onClick:function(){return c(e)},children:"Change your client secret"})]}),(0,eT.jsx)("br",{}),(0,eT.jsx)("br",{})]},e.name)})]}),(0,eT.jsx)(nu.Z,{id:"confirm-new-secret",content:u,onConfirm:l,icon:eK.eHv,buttonStyle:"custom",title:"You are about to change your client secret",closable:!0})]})}),nx=t(20070),nv=t.n(nx),nm=t(30233),ng=t(85330),nb=t(74379),nj=t(11915),ny=t(43590),nw=t.n(ny);function nZ(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nP(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nZ(Object(t),!0).forEach(function(n){(0,eR.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nZ(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nk=eD.ZP.table(I||(I=(0,eC.Z)(["\n  .env {\n    width: 300px;\n  }\n"]))),nS=eD.ZP.span(O||(O=(0,eC.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),nC=eD.ZP.div(N||(N=(0,eC.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),nI=eD.ZP.div(D||(D=(0,eC.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),nO=eD.ZP.div(R||(R=(0,eC.Z)(["\n  color: #ff0000;\n"]))),nN={name:"",envs:["dev"]},nD=(0,eN.forwardRef)(function(e,n){var t,r=e.integrationId,i=e.environments,a=void 0===i?["dev"]:i,o=(0,eN.useState)(!1),s=o[0],c=o[1],l=(0,eN.useState)({}),u=l[0],d=l[1],p=(0,eN.useState)({}),h=p[0],f=p[1],x=(0,eN.useState)([nN]),v=x[0],m=x[1];(0,eN.useImperativeHandle)(n,function(){var e;return{submit:(e=(0,eS.Z)(eO().mark(function e(){var n,t,i,a,o,l,p,h;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v,s&&(n=[],nw()(u,function(e,t){n.push({name:t,envs:e})})),e.next=4,e3({integrationId:r,roles:n});case 4:return t=e.sent,a=(i=(0,eU.Z)(t,2))[0],i[1],o={},l={},p=!1,h=!1,nw()(a,function(e){e.failure.length>0&&nw()(e.failure,function(n){o[n]||(o[n]=[]),o[n].push(e.env),p=!0}),e.duplicate.length>0&&nw()(e.duplicate,function(n){l[n]||(l[n]=[]),l[n].push(e.env),h=!0})}),d(o),f(l),c(!0),e.abrupt("return",[p,h]);case 17:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),reset:function(){m([nN]),d({}),f({}),c(!1)}}});var g=function(e){m(v.filter(function(n,t){return t!==e}))},b=function(e,n){m(v.map(function(t,r){return r===e?{name:n,envs:t.envs}:t}))},j=(t=(0,eS.Z)(eO().mark(function e(n,t,r){return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m(v.map(function(e,r){return r===n?{name:e.name,envs:t.map(function(e){return e.value})}:e}));case 2:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),y=null;if(s){var w=null,Z=null;Object.keys(h).length>0&&(w=(0,eT.jsx)("tr",{children:(0,eT.jsx)("td",{colSpan:3,children:(0,eT.jsxs)(nC,{children:[(0,eT.jsx)(nI,{children:(0,eT.jsx)(eL.G,{icon:eK.sqG,color:"#17a2b8",title:"duplicated roles",size:"lg"})}),(0,eT.jsx)(nI,{children:"There are duplicated roles and we've skipped adding them."})]})})})),Object.keys(u).length>0&&(Z=(0,eT.jsx)("tr",{children:(0,eT.jsx)("td",{colSpan:3,children:(0,eT.jsxs)(nC,{children:[(0,eT.jsx)(nI,{children:(0,eT.jsx)(eL.G,{icon:eK.eHv,color:"#dc3545",title:"failed roles",size:"lg"})}),(0,eT.jsxs)(nI,{children:["We were unable to save some of your changes.",(0,eT.jsx)("br",{}),(0,eT.jsx)("div",{className:"fw-bold",children:"Please try submitting again."})]})]})})})),y=(0,eT.jsxs)(eT.Fragment,{children:[w,Z]})}else y=(0,eT.jsx)("tr",{children:(0,eT.jsx)("td",{colSpan:3,children:v.length<20?(0,eT.jsxs)(nS,{onClick:function(){m(v.concat(nN))},children:[(0,eT.jsx)(eL.G,{style:{color:"#006fc4"},icon:eK.KtF,title:"Add Role"}),(0,eT.jsx)("span",{children:"Add another role"})]}):(0,eT.jsx)(nO,{children:"You can only create 20 roles at a time. Please save before creating any new roles."})})});return(0,eT.jsx)("div",{children:(0,eT.jsxs)(nk,{children:[(0,eT.jsx)("thead",{children:(0,eT.jsxs)("tr",{children:[(0,eT.jsx)("th",{className:"role",children:"Role Name"}),(0,eT.jsx)("th",{className:"env",children:"Environments"}),(0,eT.jsx)("th",{})]})}),(0,eT.jsxs)("tbody",{children:[v.length>0?v.map(function(e,n){var t=function(n,t){return u[e.name]&&u[e.name].includes(t.children)?nP(nP({},n),{},{color:"#fff",backgroundColor:"#dc3545"}):h[e.name]&&h[e.name].includes(t.children)?nP(nP({},n),{},{color:"#fff",backgroundColor:"#17a2b8"}):n};return(0,eT.jsxs)("tr",{children:[(0,eT.jsx)("td",{className:"role",children:(0,eT.jsx)(nj.default,{size:"small","data-testid":"role-name-input-field",minLength:"2",maxLength:"100",value:e.name,disabled:s,onChange:function(e){return b(n,e.target.value)}})}),(0,eT.jsx)("td",{className:"env",children:(0,eT.jsx)(nb.ZP,{value:e.envs.map(function(e){return{value:e,label:e}}),options:a.map(function(e){return{value:e,label:e}}),isMulti:!0,isDisabled:s,placeholder:"Select...",noOptionsMessage:function(){return"You selected all environments"},onChange:function(e,t){return j(n,e,t)},styles:{multiValueLabel:t,multiValue:t}})}),(0,eT.jsx)("td",{children:!s&&v.length>1&&(0,eT.jsx)(nS,{onClick:function(){return g(n)},children:(0,eT.jsx)(eL.G,{style:{color:"#FF0303"},icon:eK.uMC,title:"Remove Role"})})})]})}):(0,eT.jsx)("tr",{children:(0,eT.jsx)("td",{colSpan:3,children:"No roles added."})}),y]})]})})}),nR=t(20353),nF=t(27812),nE=t(93096),nT=t.n(nE),nB=t(29208),nA=t.n(nB),nG=t(34766),nz=t.n(nG),nq=t(76691),nU=t(53442),nL=t(75780),nK=t(80820),nM=t.n(nK),nH=t(99503),nV=t.n(nH),n_=t(99245),nW=t.n(n_),nY=t(96486),n$=eD.ZP.label(F||(F=(0,eC.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),nJ=eD.ZP.div(E||(E=(0,eC.Z)(["\n  display: flex;\n  & > div:first-child {\n    margin-right: 20px;\n  }\n"]))),nQ=eD.ZP.div(T||(T=(0,eC.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"}),nX=eD.ZP.div(B||(B=(0,eC.Z)(["\n  font-size: 0.9rem;\n  ","\n"])),function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"}),n0=function(e){var n=e.children,t=e.width;return(0,eT.jsx)(nQ,{width:t,children:(0,eT.jsx)(eM.ZP,{cols:6,children:(0,eT.jsxs)(eM.ZP.Row,{gutter:[],children:[(0,eT.jsx)(eM.ZP.Col,{span:5,children:n}),(0,eT.jsx)(eM.ZP.Col,{span:1,style:{textAlign:"right"},children:(0,eT.jsx)(eL.G,{icon:eK.byT,color:"#9F9F9F",size:"lg"})})]})})})},n1=function(e){var n=e.modalRef;return(0,eT.jsx)(nm.Z,{ref:n,id:"additiona-user-info",title:"Additional User Info",icon:null,cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){if(!e)return(0,eT.jsx)(eT.Fragment,{});var n=nV()(e.attributes,nW());return n=(0,nY.mapKeys)(n,function(e,n){return nv()(n)}),(0,eT.jsxs)("div",{children:[(0,eT.jsx)(n$,{children:"GUID"}),(0,eT.jsx)(n0,{width:"400px",children:e.guid}),(0,eT.jsx)("br",{}),(0,eT.jsx)(n$,{children:"Attributes"}),(0,eT.jsxs)(nJ,{children:[(0,eT.jsx)(nX,{width:"200px",children:"Key"}),(0,eT.jsx)(nX,{width:"700px",children:"Value"})]}),nM()(n,function(e,n){return(0,eT.jsxs)(nJ,{children:[(0,eT.jsx)(n0,{width:"200px",children:n}),(0,eT.jsx)(n0,{width:"700px",children:e})]})})]})}})},n2=t(37226),n3=function(e){return"service-account-".concat(e)},n4=t(34798),n8=t.n(n4);function n5(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function n7(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n5(Object(t),!0).forEach(function(n){(0,eR.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n5(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var n6=eD.ZP.label(A||(A=(0,eC.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),n9=eD.ZP.div(G||(G=(0,eC.Z)(["\n  text-align: center;\n"]))),te=eD.ZP.div(z||(z=(0,eC.Z)(["\n  text-align: right;\n"]))),tn=eD.ZP.span(q||(q=(0,eC.Z)(["\n  float: right;\n  padding-right: 2.5em;\n"]))),tt=eD.ZP.span(U||(U=(0,eC.Z)(["\n  float: right;\n  padding-right: 1.6em;\n"]))),tr=eD.ZP.div(L||(L=(0,eC.Z)(["\n  height: var(--field-top-spacing);\n"])));function ti(){return(0,eT.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}function ta(){return(0,eT.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var to=[{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"email",label:"Email"}],ts=[{value:"firstName",label:"Display Name"},{value:"lastName",label:"Username"},{value:"email",label:"Email"}],tc=[{value:"firstName",label:"Name"},{value:"lastName",label:"Login"},{value:"email",label:"Email"}],tl={idir:to,azureidir:to,bceidbasic:ts,bceidbusiness:ts,bceidboth:ts,githubpublic:tc,githubbcgov:tc},tu=function(e){return{label:e,value:e}},td=function(){return(0,eT.jsxs)(n9,{children:[(0,eT.jsx)(tr,{}),(0,eT.jsx)(eH.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},tp=(0,e9.hU)(function(e){var n,t,r,i,a,o,s,c,l=e.environment,u=e.integration,d=e.alert,p=(0,eN.useRef)(nm.V),h=(0,eN.useRef)(nm.V),f=(0,eN.useRef)(nm.V),x=(0,eN.useRef)(nm.V),v=(0,eN.useState)(!1),m=v[0],g=v[1],b=(0,eN.useState)(!1),j=b[0],y=b[1],w=(0,eN.useState)(!1),Z=w[0],P=w[1],k=(0,eN.useState)(!1),S=k[0],C=k[1],I=(0,eN.useState)(""),O=I[0],N=I[1],D=(0,eN.useState)(""),R=D[0],F=D[1],E=(0,eN.useState)(0),T=E[0],B=E[1],A=(0,eN.useState)(20),G=A[0];A[1];var z=(0,eN.useState)(!0),q=z[0],U=z[1],L=(0,eN.useState)([]),K=L[0],M=L[1],H=(0,eN.useState)([]),V=H[0],_=H[1],W=(0,eN.useState)(null),Y=W[0],$=W[1],J=(0,eN.useState)([]),Q=J[0],X=J[1],ee=(0,eN.useState)([]),en=ee[0],et=ee[1],er=(0,eN.useState)([]),ei=er[0],ea=er[1],eo=(0,eN.useState)(),es=eo[0],ec=eo[1],el=(0,eN.useState)(!1),eu=el[0],ed=el[1],ep=(0,eN.useState)(""),eh=ep[0],ef=ep[1],ex=(0,eN.useState)([]),ev=ex[0],em=ex[1],eg=function(){"service-account"===u.authType?(ea(["Service Accounts","Composite Roles"]),ef("Service Accounts")):"browser-login"===u.authType?(ea(["Users","Composite Roles"]),ef("Users")):(ea(["Users","Service Accounts","Composite Roles"]),ef("Users"))},eb=(0,eN.useCallback)(nT()((n=(0,eS.Z)(eO().mark(function e(n){var t;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,C(!0);case 4:return e.next=6,eJ({environment:l,integrationId:u.id,roleName:Y,compositeRoleNames:n.map(function(e){return e.value})});case 6:return t=e.sent,(0,eU.Z)(t,2)[1]||N("Last saved at ".concat(new Date().toLocaleString())),e.next=12,C(!1);case 12:return e.next=14,ew();case 14:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[Y]),ej=function(){ew(),_([]),M([]),$(null),ed((0,nR.Yr)(u))};(0,eN.useEffect)(function(){em([]),eg(),ec(u.id),u.id!==es&&ej()},[u]),(0,eN.useEffect)(function(){em([]),Y&&(eZ(!0,Y),eP(Y),C(!1),N(""))},[Y]);var ey=(0,eN.useMemo)(function(){return K.map(tu)},[K]),ew=(t=(0,eS.Z)(eO().mark(function e(){var n,t,r,i,a;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.next=5,e$({environment:l,integrationId:u.id,search:R});case 5:n=e.sent,r=(t=(0,eU.Z)(n,2))[0],i=t[1],a=null==r?[]:r.map(function(e){return e.name}),(i||!r)&&d.show({variant:"danger",fadeOut:5e3,closable:!0,content:(null==i?void 0:i.message)||"failed to fetch roles"}),M(a),et(null==r?[]:r.map(function(e){return e.composite})),g(!1),1===a.length&&$(a[0]);case 15:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),eZ=(r=(0,eS.Z)(eO().mark(function e(n,t){var r,i,a,o,s,c;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:if(!(t.length<2)){e.next=4;break}return e.abrupt("return");case 4:return r=0,i=[],y(!0),n?B(r):(r=T,i=V),e.next=10,e2({environment:l,integrationId:u.id,roleName:t,first:r,max:G});case 10:a=e.sent,s=(o=(0,eU.Z)(a,2))[0],o[1],(c=s||[]).length>0?c.map(function(){var e=(0,eS.Z)(eO().mark(function e(n){var t,r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.username.startsWith("service-account-")){e.next=8;break}return t=n.username.split("-"),e.next=4,(0,n2.A_)(t[t.length-1]);case 4:r=e.sent,i=(0,eU.Z)(r,1)[0],em([].concat((0,nF.Z)(ev),[{username:n.username,integration:i}]));case 8:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()):em([]),U(c.length===G),_(i.concat(c)),B(r+G),$(t),y(!1);case 21:case"end":return e.stop()}},e)})),function(e,n){return r.apply(this,arguments)}),eP=(i=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=2;break}return e.abrupt("return");case 2:return P(!0),e.next=5,eQ({environment:l,integrationId:u.id,roleName:n});case 5:if(t=e.sent,i=(r=(0,eU.Z)(t,2))[0],!((a=r[1])||!i)){e.next=12;break}return d.show({variant:"danger",fadeOut:5e3,closable:!0,content:a||"failed to fetch composite roles"}),e.abrupt("return");case 12:X(i.map(function(e){return{label:e,value:e}})),P(!1);case 14:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),ek=(a=(0,eS.Z)(eO().mark(function e(n){return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.current.open(n);case 1:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),eC=null;if(0===T&&j)eC=(0,eT.jsx)(td,{});else if(Y){var eI=V.filter(function(e){return!e.username.startsWith("service-account-")}),eD=V.filter(function(e){return e.username.startsWith("service-account-")});eC="Users"===eh?(0,eT.jsx)(nU.Z,{variant:"mini",headers:[{accessor:"idp",Header:"IDP"},{accessor:"guid",Header:"GUID"},{accessor:"email",Header:"Email"},{accessor:"actions",Header:(0,eT.jsx)(ti,{}),disableSortBy:!0}],data:eI.length>0?eI.map(function(e){var n=e.username.split("@");if(n.length<2)return[];var t=(0,eU.Z)(n,2),r=t[0],i=t[1],a=tl[i];return{idp:nn.S[i],guid:r,email:e.email,actions:(0,eT.jsxs)(tt,{children:[(0,eT.jsx)("span",{onClick:function(n){n.stopPropagation(),p.current.open({guid:e.username.split("@")[0],attributes:n7(n7({},nz()(a,function(n,t){return n[t.label]=nA()(e,t.value),n},{})),e.attributes)})},children:(0,eT.jsx)(eL.G,{style:{color:"#000"},icon:eK.Mdf,size:"lg",title:"User Detail"})}),"\xa0\xa0",(0,eT.jsx)("span",{onClick:function(){return f.current.open(e)},children:(0,eT.jsx)(eL.G,{style:{color:"#FF0303"},icon:eK.uMC,size:"lg",title:"Remove User"})})]})}}):[],loadMoreItem:function(){return eZ(!1,Y)},hasMoreItem:q,loader:(0,eT.jsx)(td,{}),colfilters:[],activateRow:n8(),rowSelectorKey:"guid",noDataFoundElement:(0,eT.jsx)("td",{colSpan:5,children:"No users found."})}):"Service Accounts"===eh?(0,eT.jsx)(nU.Z,{variant:"mini",headers:[{accessor:"projectName",Header:"Project Name"},{accessor:"actions",Header:(0,eT.jsx)(ta,{}),disableSortBy:!0}],data:eD.length>0?eD.map(function(e){var n,t;return{projectName:null===(n=ev.find(function(n){return n.username==e.username}))||void 0===n?void 0:null===(t=n.integration)||void 0===t?void 0:t.projectName,actions:(0,eT.jsx)("span",{onClick:function(){return x.current.open(e)},children:(0,eT.jsx)(tn,{children:(0,eT.jsx)(eL.G,{style:{color:"#FF0303"},icon:eK.uMC,size:"lg",title:"Remove Service Account"})})})}}):[],colfilters:[],activateRow:n8(),rowSelectorKey:"projectName",noDataFoundElement:(0,eT.jsx)("td",{colSpan:5,children:"No service accounts found."})}):Z?(0,eT.jsx)(td,{}):(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsxs)(n6,{children:["Select the roles to be nested under the Parent role"," ",(0,eT.jsx)(nL.Z,{content:"Composite roles associate (nest) one or more additional roles within it."})]}),(0,eT.jsx)(nb.ZP,{value:Q,options:ey.filter(function(e){return e.value!==Y}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:function(e){X(e),eb(e)},isDisabled:!eu}),(0,eT.jsx)(ng.Ad,{saving:S,content:O})]})}var eR=(0,eT.jsx)(nU.Z,{headers:[{accessor:"role",Header:"Role Name"},{accessor:"actions",Header:"",disableSortBy:!0}],noDataFoundElement:(0,eT.jsx)("td",{children:"No roles found."}),activateRow:function(e){var n=e.cells[0].value;if(n.endsWith(" (Composite role)")){var t=e.cells[0].value.length;$(n.substr(0,t-17))}else $(n)},rowSelectorKey:"role",data:K.map(function(e,n){return{role:!0==en[n]?"".concat(e," (Composite role)"):e,actions:(0,eT.jsx)(te,{children:(0,eT.jsx)(nq.Kk,{disabled:!eu,icon:eK.$aW,role:"button","aria-label":"delete",onClick:function(n){eu&&(n.stopPropagation(),ek(e))},title:"Delete",size:"lg",style:{marginRight:"1rem"}})})}}),colfilters:[]});return(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(eM.ZP,{cols:10,children:(0,eT.jsxs)(eM.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eT.jsx)(eM.ZP.Col,{span:4,children:(0,eT.jsxs)("div",{style:{display:"flex",float:"left"},children:[(0,eT.jsx)(ng.E1,{type:"text",maxLength:"1000",placeholder:"Search existing roles",value:R,onChange:function(e){F(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&ew()}}),(0,eT.jsx)(ng.zx,{type:"button",size:"small",variant:"bcPrimary",onClick:ew,children:"Search"})]})}),(0,eT.jsx)(eM.ZP.Col,{span:6,children:Y&&(0,eT.jsx)(ng.mQ,{onChange:function(e){ef(e)},activeKey:eh,tabBarGutter:30,children:ei.map(function(e){return(0,eT.jsx)(ng.OK,{tab:e},e)})})})]})}),(0,eT.jsx)(tr,{}),m?(0,eT.jsx)(td,{}):(0,eT.jsx)(eM.ZP,{cols:10,children:(0,eT.jsxs)(eM.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eT.jsx)(eM.ZP.Col,{span:4,children:eR}),(0,eT.jsx)(eM.ZP.Col,{span:6,children:eC})]})}),(0,eT.jsx)(nm.Z,{ref:h,title:"Delete Role",icon:eK.eHv,onConfirm:(o=(0,eS.Z)(eO().mark(function e(n,t){return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,e4({environment:l,integrationId:u.id,roleName:t});case 2:return e.next=4,ej();case 4:case"end":return e.stop()}},e)})),function(e,n){return o.apply(this,arguments)}),confirmButtonText:"Delete",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,eT.jsx)("div",{children:"Are you sure you want to delete this role?"})}),(0,eT.jsx)(nm.Z,{id:"remove-user",ref:f,title:"Remove User from Role",icon:eK.eHv,onConfirm:(s=(0,eS.Z)(eO().mark(function e(n,t){var r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,e0({environment:l,integrationId:u.id,username:t.username,roleName:Y,mode:"del"});case 4:r=e.sent,(i=(0,eU.Z)(r,2)[1])&&d.show({variant:"danger",fadeOut:5e3,closable:!0,content:i}),eZ(!0,Y);case 9:case"end":return e.stop()}},e)})),function(e,n){return s.apply(this,arguments)}),confirmButtonText:"Remove",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,eT.jsx)("div",{children:"Are you sure you want to remove this user from this role?"})}),(0,eT.jsx)(nm.Z,{id:"remove-service-account",ref:x,title:"Remove Service Account from Role",icon:eK.eHv,onConfirm:(c=(0,eS.Z)(eO().mark(function e(n,t){var r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,e0({environment:l,integrationId:u.id,username:t.username,roleName:Y,mode:"del"});case 4:r=e.sent,(i=(0,eU.Z)(r,2)[1])&&d.show({variant:"danger",fadeOut:5e3,closable:!0,content:i}),eZ(!0,Y);case 9:case"end":return e.stop()}},e)})),function(e,n){return c.apply(this,arguments)}),confirmButtonText:"Remove",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,eT.jsx)("div",{children:"Are you sure you want to remove this service account from this role?"})}),(0,eT.jsx)(n1,{modalRef:p})]})}),th=t(36089),tf=eD.ZP.div(K||(K=(0,eC.Z)(["\n  height: var(--field-top-spacing);\n"]))),tx=function(e){var n,t=e.integration,r=(0,eN.useRef)(nm.V),i=(0,eN.useState)("dev"),a=i[0],o=i[1],s=(0,eN.useState)(!1),c=s[0],l=s[1],u=(0,eN.useState)(0),d=u[0],p=u[1],h=(0,eN.useContext)(th.SurveyContext);(0,eN.useEffect)(function(){o("dev"),l((0,nR.Yr)(t))},[t.id]);var f=(null==t?void 0:t.environments)||[];return(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(tf,{}),(0,eT.jsx)(ng.zx,{disabled:!c,size:"medium",variant:"primary",onClick:function(){r.current.open()},"data-testid":"create-role-button",children:"+ Create a New Role"}),(0,eT.jsx)(tf,{}),(0,eT.jsxs)(ng.mQ,{onChange:function(e){o(e)},activeKey:a,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eT.jsx)("br",{}),f.map(function(e){return(0,eT.jsx)(ng.OK,{tab:nv()(e),children:(0,eT.jsx)(tp,{environment:e,integration:t},d)},e)})]}),(0,eT.jsx)(nm.Z,{ref:r,title:"Create New Role",icon:null,onConfirm:(n=(0,eS.Z)(eO().mark(function e(n){var t,i,a,o;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.submit();case 2:if(t=e.sent,a=(i=(0,eU.Z)(t,2))[0],o=i[1],!a){e.next=11;break}return r.current.updateConfig({confirmButtonText:"Try Again"}),e.abrupt("return",!1);case 11:if(!o){e.next=17;break}return r.current.updateConfig({showConfirmButton:!1,cancelButtonText:"Close",buttonAlign:"right"}),p(function(e){return e+1}),e.abrupt("return",!1);case 17:return e.next=19,n.current.reset();case 19:p(function(e){return e+1}),null==h||h.setShowSurvey(!0,"createRole");case 21:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),onCancel:function(e){e.current.reset()},confirmButtonText:"Save",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:(0,eT.jsx)(nD,{integrationId:t.id,environments:f})})]})},tv=(x=(0,eS.Z)(eO().mark(function e(n){var t,r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,r=n.search,e.prev=1,e.next=4,eV.e.post("bceid-webservice/idir/search",{field:t,search:r}).then(function(e){return e.data});case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return x.apply(this,arguments)}),tm=(v=(0,eS.Z)(eO().mark(function e(n){var t,r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.guid,r=n.userId,e.prev=1,e.next=4,eV.e.post("bceid-webservice/idir/import",{guid:t,userId:r}).then(function(e){return e.data});case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return v.apply(this,arguments)}),tg=[{value:"idir",label:"IDIR"}],tb=[{value:"firstName",label:"First Name",allowed:["idir"]},{value:"lastName",label:"Last Name",allowed:["idir"]},{value:"email",label:"Email",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"userId",label:"Username",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"guid",label:"IDP GUID",allowed:["bceidbasic","bceidbusiness"]}],tj=(0,eN.forwardRef)(function(e,n){e.key;var t,r,i=e.idp,a=e.property,o=e.search,s=e.infoModalRef,c=e.parentModalRef,l=(0,eN.useState)(!1),u=(l[0],l[1]),d=(0,eN.useState)(!1),p=d[0],h=d[1],f=(0,eN.useState)([]),x=f[0],v=f[1],m=(0,eN.useState)(""),g=m[0],b=m[1],j=(0,eN.useState)(a),y=j[0],w=j[1],Z=(0,eN.useState)(o),P=Z[0],k=Z[1];(0,eN.useEffect)(function(){b(i)},[i]),(0,eN.useEffect)(function(){if(g){var e=tb.find(function(e){return e.value===y});if(null==e?void 0:e.allowed.includes(g))S(P,y);else{var n=tb.find(function(e){return e.allowed.includes(g)});w((null==n?void 0:n.value)||""),k("")}}},[g]);var S=(t=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,o=arguments;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>1&&void 0!==o[1]?o[1]:y,!(n.length<2)){e.next=3;break}return e.abrupt("return");case 3:return h(!0),v([]),u(!0),e.next=8,tv({field:t,search:n});case 8:r=e.sent,a=(i=(0,eU.Z)(r,2))[0],i[1],a&&v(a),h(!1);case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),C=(r=(0,eS.Z)(eO().mark(function e(n){return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tm({guid:n.guid,userId:n.userId});case 2:c.current.close({idp:g,guid:n.guid});case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return(0,eT.jsx)(nU.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",headers:[{accessor:"firstName",Header:"First name"},{accessor:"lastName",Header:"Last Name"},{accessor:"email",Header:"Email"},{accessor:"idirUsername",Header:"IDIR username"},{accessor:"actions",Header:"",disableSortBy:!0}],rowSelectorKey:"guid",data:x.map(function(e){return{guid:e.guid,firstName:e.individualIdentity.name.firstname,lastName:e.individualIdentity.name.surname,email:e.contact.email,idirUsername:e.userId,actions:(0,eT.jsxs)(nq.c4,{children:[(0,eT.jsx)(nq.Kk,{icon:eK.Mdf,role:"button","aria-label":"view",onClick:function(){s.current.open({guid:e.guid,attributes:{username:e.userId,displayName:e.displayName,firstName:e.individualIdentity.name.firstname,middleName:e.individualIdentity.name.middleName,lastName:e.individualIdentity.name.surname,initials:e.individualIdentity.name.initials,email:e.contact.email,telephone:e.contact.telephone,company:e.internalIdentity.company,department:e.internalIdentity.department,title:e.internalIdentity.title},_hash:c.current.getId()})},title:"View",size:"lg"}),(0,eT.jsx)(nq.Kk,{icon:eK.q7m,role:"button","aria-label":"import",onClick:function(){return C(e)},title:"Import",size:"lg"})]})}}),colfilters:[{value:g,multiselect:!1,onChange:b,options:tg},{value:y,multiselect:!1,onChange:w,options:tb.filter(function(e){return e.allowed.includes(g)})}],showFilters:!0,loading:p,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:P,searchLocation:"right",onSearch:S,onEnter:S,noDataFoundElement:(0,eT.jsx)("p",{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})})});function ty(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tw(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ty(Object(t),!0).forEach(function(n){(0,eR.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ty(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tZ=eD.ZP.label(M||(M=(0,eC.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),tP=eD.ZP.div(H||(H=(0,eC.Z)(["\n  text-align: center;\n"]))),tk=eD.ZP.div(V||(V=(0,eC.Z)(["\n  height: var(--field-top-spacing);\n"]))),tS=eD.ZP.div(_||(_=(0,eC.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),tC=eD.ZP.div(W||(W=(0,eC.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),tI=eD.ZP.div(Y||(Y=(0,eC.Z)(["\n  text-align: center;\n"]))),tO=function(){return(0,eT.jsxs)(tP,{children:[(0,eT.jsx)(tk,{}),(0,eT.jsx)(eH.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},tN=[{value:"firstName",label:"First Name",search:!0,result:!0},{value:"lastName",label:"Last Name",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],tD=[{value:"firstName",label:"Display Name",search:!0,result:!0},{value:"lastName",label:"Username",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],tR=[{value:"firstName",label:"Name",search:!0,result:!0},{value:"lastName",label:"Login",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],tF={idir:tN,azureidir:tN,bceidbasic:tD,bceidbusiness:tD,bceidboth:tD,githubpublic:tR,githubbcgov:tR},tE=(0,e9.hU)(function(e){var n,t,r,i,a,o=e.selectedRequest;e.alert;var s=(0,eN.useRef)(nm.V),c=(0,eN.useRef)(nm.V),l=(0,eN.useState)(!1),u=l[0],d=l[1],p=(0,eN.useState)(1),h=p[0],f=p[1],x=(0,eN.useState)(0),v=x[0],m=x[1],g=(0,eN.useState)(15),b=g[0],j=g[1],y=(0,eN.useState)(!1),w=y[0],Z=y[1],P=(0,eN.useState)(!1),k=P[0],S=P[1],C=(0,eN.useState)(!1),I=C[0],O=C[1],N=(0,eN.useState)(""),D=N[0],R=N[1],F=(0,eN.useState)([]),E=F[0],T=F[1],B=(0,eN.useState)([]),A=B[0],G=B[1],z=(0,eN.useState)([]),q=z[0],U=z[1],L=(0,eN.useState)([]),K=L[0],M=L[1],H=(0,eN.useState)("dev"),V=H[0],_=H[1],W=(0,eN.useState)(o.devIdps[0]),Y=W[0],$=W[1],J=(0,eN.useState)(""),Q=J[0],X=J[1],ee=(0,eN.useState)(""),en=ee[0],et=ee[1],er=(0,eN.useState)(void 0),ei=er[0],ea=er[1],eo=(0,eN.useContext)(th.SurveyContext),es=(0,eN.useCallback)(nT()((n=(0,eS.Z)(eO().mark(function e(n){var t;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(!0);case 2:return e.next=4,e1({environment:V,integrationId:o.id,username:ei,roleNames:n});case 4:return t=e.sent,(0,eU.Z)(t,2)[1]||(R("Last saved at ".concat(new Date().toLocaleString())),null==eo||eo.setShowSurvey(!0,"addUserToRole")),e.next=10,O(!1);case 10:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==o?void 0:o.id,V,ei,eo]),ec=(t=(0,eS.Z)(eO().mark(function e(){var n,t,r;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Z(!0);case 4:return e.next=6,e$({environment:V,integrationId:o.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,eU.Z)(n,2))[0],t[1],G(null==r?[]:r.map(function(e){return e.name})),M(null==r?[]:r.map(function(e){return e.composite})),Z(!1);case 14:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),el=function(){T([]),U([]),f(1),m(0),ea(void 0),d(!1)},eu=function(){if(et(""),_("dev"),o.devIdps){var e=o.devIdps.length>0?o.devIdps[0]:"";$(e);var n=tF[e]||[];n.length>0&&X(n[0].value)}},ed=(r=(0,eS.Z)(eO().mark(function e(n){var t,r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(!0);case 2:return e.next=4,eX({environment:V,integrationId:o.id,username:n});case 4:return t=e.sent,i=(r=(0,eU.Z)(t,2))[0],r[1],e.next=10,U(i||[]);case 10:S(!1);case 11:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});(0,eN.useEffect)(function(){el(),eu(),G([])},[o.id]),(0,eN.useEffect)(function(){ep(en,void 0,h)},[h]),(0,eN.useEffect)(function(){ep(en,void 0,1)},[b]),(0,eN.useEffect)(function(){el(),ec(),o.devIdps&&$(o.devIdps.length>0?o.devIdps[0]:"")},[V]),(0,eN.useEffect)(function(){el();var e=tF[Y]||[];!e.find(function(e){return e.search&&e.value===Q})&&e.length>0&&X(e[0].value)},[Y]),(0,eN.useEffect)(function(){R(""),ei&&ed(ei)},[ei]);var ep=(i=(0,eS.Z)(eO().mark(function e(n){var t,r,i,a,s,c=arguments;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>1&&void 0!==c[1]?c[1]:Q,r=c.length>2&&void 0!==c[2]?c[2]:h,!(n.length<2)){e.next=4;break}return e.abrupt("return");case 4:return Z(!0),et(n),f(r),X(t),T([]),U([]),ea(void 0),d(!0),e.next=14,eY({environment:V,idp:Y,property:t,searchKey:n,integrationId:o.id||-1});case 14:if(i=e.sent,s=(a=(0,eU.Z)(i,2))[0],a[1],s){var l;T((l=r,s.rows.slice((l-1)*15,15*l))),m(s.count)}Z(!1);case 20:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),eh=function(e){return ep(e,void 0,1)},ef=(a=(0,eS.Z)(eO().mark(function e(n,t){var r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],"clear"===t.action||(r="remove-value"===t.action?q.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,nF.Z)(q.slice(0,-1)):[].concat((0,nF.Z)(q),[null===(i=t.option)||void 0===i?void 0:i.value])),r.length!==q.length&&(es(r),U(r));case 3:case"end":return e.stop()}},e)})),function(e,n){return a.apply(this,arguments)}),ex=null;k?ex=(0,eT.jsx)(tO,{}):ei&&(ex=(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(tZ,{children:"2. Assign User to a Role"}),(0,eT.jsx)(nb.ZP,{value:q.map(function(e){return{value:e,label:e}}),options:A.map(function(e,n){return{value:e,label:!0==K[n]?"".concat(e," (Composite role)"):e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:ef,"data-testid":"user-role-select"}),(0,eT.jsx)(ng.Ad,{saving:I,content:D})]}));var ev="idir"===Y,em=tF[Y]||[],eg=em.length>0?em.filter(function(e){return e.result}):[],eb=null;u&&ev&&(eb=(0,eT.jsxs)(eT.Fragment,{children:[E.length>0&&(0,eT.jsx)(ng.XU,{italic:!0,children:"If you did not find the user you were looking for, you can try searching for the user in our IDIM Web Service Lookup tool. This tool uses a webservice to find IDIR users. so you will need to import the user that is found."}),(0,eT.jsx)(nl.default,{type:"button",size:"small","data-testid":"idim-search-button",onClick:function(){return c.current.open({key:new Date().getTime().toString(),idp:"idir",property:Q,search:en})},children:"Search in IDIM Web Service Lookup"})]}));var ej=(null==o?void 0:o.environments)||[],ey=(null==o?void 0:o.devIdps)||[],ew="guid"===Q||Y.startsWith("bceid")?"Exact text match results will be displayed":"Partial text match results will be displayed",eZ=function(e){var n=em.find(function(n){return n.value===e});return null==n?void 0:n.label.toString()};return(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(tk,{}),(0,eT.jsx)(eM.ZP,{cols:10,children:(0,eT.jsxs)(eM.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eT.jsxs)(eM.ZP.Col,{span:6,children:[(0,eT.jsxs)(ng.h4,{variant:"dark",size:"sm",children:["1. Search for a user based on the selection criteria below \xa0",(0,eT.jsx)(nL.Z,{title:"",content:"When searching BCeID GUID, please ensure your end users has logged in via your app (and indirectly our IDP) for this search to be successful.",hide:200})]}),(0,eT.jsx)(nU.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",rowSelectorKey:"username",headers:[{accessor:"firstName",Header:eZ("firstName")||""},{accessor:"lastName",Header:eZ("lastName")||""},{accessor:"email",Header:"Email"},{accessor:"actions",Header:"",disableSortBy:!0}],data:E.map(function(e){return{username:nA()(e,"username"),firstName:nA()(e,"firstName"),lastName:nA()(e,"lastName"),email:nA()(e,"email"),actions:(0,eT.jsx)(nq.c4,{children:(0,eT.jsx)(nq.Kk,{icon:eK.Mdf,role:"button","aria-label":"view",onClick:function(n){n.stopPropagation(),s.current.open({guid:e.username.split("@")[0],attributes:tw(tw({},nz()(eg,function(n,t){return n[t.label]=nA()(e,t.value),n},{})),e.attributes)})},title:"View",size:"lg"})})}}),colfilters:[{key:"user-role-filter-env",value:V,multiselect:!1,onChange:_,options:ej.map(function(e){return{value:e,label:nv()(e)}})},{key:"user-role-filter-idp",value:Y,multiselect:!1,onChange:$,options:ey.filter(function(e){return"digitalcredential"!==e}).map(function(e){return{value:e,label:nn.S[e]}})},{key:"user-role-filter-prop",value:Q,multiselect:!1,onChange:X,options:em.filter(function(e){return e.search})}],showFilters:!0,loading:w,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:en,searchLocation:"right",onSearch:eh,onEnter:eh,noDataFoundElement:u?(0,eT.jsxs)(tS,{children:[(0,eT.jsx)(tC,{children:(0,eT.jsx)(eL.G,{icon:eK.RLE,color:"#D44331",title:"Edit",size:"lg"})}),ev?(0,eT.jsx)(tC,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria or try using our IDIM Web Service Lookup tool."}):(0,eT.jsx)(tC,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})]}):(0,eT.jsx)(tI,{children:"You have not searched for any users yet."}),pagination:!0,pageLimits:[15],onPage:f,rowCount:v,limit:b,onLimit:function(e){j(e)},activateRow:function(e){ea(e.original.username)},searchTooltip:ew}),eb]}),(0,eT.jsx)(eM.ZP.Col,{span:4,children:ex})]})}),(0,eT.jsx)(n1,{modalRef:s}),(0,eT.jsx)(nm.Z,{ref:c,id:"idim-webservice-lookup",title:"IDIM Web Service Lookup",icon:null,onClose:function(e,n,t){ep(t.guid,"guid",1)},cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{minWidth:"800px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){return e?(0,eT.jsx)(tj,{idp:e.idp,property:e.property,search:e.search,infoModalRef:s,parentModalRef:c},e.key):(0,eT.jsx)(eT.Fragment,{})}})]})}),tT=t(62248),tB=t(42050),tA=eD.ZP.h3($||($=(0,eC.Z)(["\n  color: #777777;\n  font-size: ",";\n  font-weight: bold;\n  min-height: 30px;\n  border-bottom: 1px solid #707070;\n  margin-bottom: 5px;\n  overflow: wrap;\n"])),e6.CA),tG=eD.ZP.p(J||(J=(0,eC.Z)(["\n  font-size: ",";\n  color: "," !important;\n"])),e6.KN,e6.we),tz=t(11752),tq=t.n(tz),tU=eD.ZP.ul(Q||(Q=(0,eC.Z)(["\n  list-style-type: none;\n  margin: 0;\n  position: relative;\n\n  & li {\n    border-bottom: 1px solid #d4d4d4;\n    & svg.svg-inline--fa {\n      position: absolute;\n      right: 0;\n    }\n\n    & div.icon {\n      position: absolute;\n      right: 0;\n      bottom: 5px;\n    }\n  }\n"]))),tL=(tq()()||{}).publicRuntimeConfig,tK=(void 0===tL?{}:tL).app_env,tM=(0,eD.ZP)(tA)(X||(X=(0,eC.Z)(["\n  border-bottom: none;\n  margin-top: 10px;\n"]))),tH=(0,eD.ZP)(tM)(ee||(ee=(0,eC.Z)(["\n  font-size: 14px;\n"]))),tV=eD.ZP.a(en||(en=(0,eC.Z)(["\n  color: ",";\n"])),e6.nc),t_=(0,eD.ZP)(tB.Z)(et||(et=(0,eC.Z)(["\n  margin-bottom: 10px;\n"]))),tW=function(e){switch(e){case"submitted":return 0;case"pr":return 33;case"planned":return 66;default:return 100}},tY=function(e){switch(e){case"submitted":return"Process request submitted...";case"pr":return"Pull request created...";case"planned":return"Terraform plan succeeded...";case"prFailed":case"planFailed":case"applyFailed":return"An error has occurred";default:return""}},t$=function(e){switch(e){case"prFailed":case"planFailed":case"applyFailed":return!0;default:return!1}},tJ=function(e){switch(e){case"submitted":default:return 0;case"pr":return 1;case"prFailed":return 2;case"planned":return 3;case"planFailed":return 4;case"applied":return 5;case"applyFailed":return 6}};function tQ(e){var n=e.integration,t=n.status,r=n.updatedAt,i=t$(t),a=new Date(r||"").toLocaleString();return(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(t_,{now:tW(t),animated:!0,variant:i?"danger":void 0}),(0,eT.jsxs)(tG,{children:["Last updated at ",a]})]})}(0,e9.hU)(function(e){var n=e.integration,t=e.title,r=e.alert,i=n.id,a=n.status,o=n.updatedAt,s=n.prNumber,c=(0,eN.useState)(!1),l=c[0],u=c[1],d=t$(a),p=tY(a),h=new Date(o||"");(0,eN.useEffect)(function(){u(12e5<new Date().getTime()-h.getTime())},[n]);var f=[(0,eT.jsxs)("li",{children:["Process request submitted",(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#00C45B"})]},"1")],x=tJ(a);x<1?f.push((0,eT.jsxs)("li",{children:["Pull request created",(0,eT.jsx)(eL.G,{icon:eK.LM3,color:"#B2B2B2",spin:!0})]},"2")):2===x?f.push((0,eT.jsxs)("li",{children:["Pull request creation failed",(0,eT.jsx)(eL.G,{icon:eK.nYk,color:"#FF0000"})]},"2")):f.push((0,eT.jsxs)("li",{children:["Pull request created (",(0,eT.jsx)(nt.default,{external:!0,href:"production"===tK?"https://github.com/bcgov/sso-terraform/pull/".concat(s):"https://github.com/bcgov/sso-terraform-dev/pull/".concat(s),children:"link"}),")",(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#00C45B"})]},"2")),x<3?f.push((0,eT.jsxs)("li",{children:["Terraform plan succeeded",(0,eT.jsx)(eL.G,{icon:eK.LM3,color:"#B2B2B2",spin:!0})]},"3")):4===x?f.push((0,eT.jsxs)("li",{children:["Terraform plan failed",(0,eT.jsx)(eL.G,{icon:eK.nYk,color:"#FF0000"})]},"3")):f.push((0,eT.jsxs)("li",{children:["Terraform plan succeeded",(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#00C45B"})]},"3")),x<5?f.push((0,eT.jsxs)("li",{children:["Request processed",(0,eT.jsx)(eL.G,{icon:eK.LM3,color:"#B2B2B2",spin:!0})]},"4")):6===x?f.push((0,eT.jsxs)("li",{children:["Request failed",(0,eT.jsx)(eL.G,{icon:eK.nYk,color:"#FF0000"})]},"4")):f.push((0,eT.jsxs)("li",{children:["Request processed",(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#00C45B"})]},"4"));var v=null;return d?v=(0,eT.jsxs)(ne.B,{children:["You have an unexpected error. Please contact our SSO support team by"," ",(0,eT.jsx)(tV,{href:"https://chat.developer.gov.bc.ca/channel/sso",target:"_blank",title:"Rocket Chat",children:"Rocket.Chat"})," ","or"," ",(0,eT.jsx)(tV,{href:"mailto:bcgov.sso@gov.bc.ca",title:"Pathfinder SSO",target:"blank",children:"Email us"})," "]}):l&&(v=(0,eT.jsxs)(ne.$,{children:[(0,eT.jsx)("div",{children:"Your integration submission is taking longer than expected, please select resubmit."}),(0,eT.jsx)(ng.zx,{variant:"bcPrimary",size:"small",type:"button",onClick:(0,eS.Z)(eO().mark(function e(){var n,t,a,o,s;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n2.ct)(i);case 2:n=e.sent,(t=(0,eU.Z)(n,2))[0],o=(a=t[1])?"danger":"success",s=a?"failed to resubmit the request":"resubmitted the request successfully",r.show({variant:o,fadeOut:1e4,closable:!0,content:s}),u(!1);case 10:case"end":return e.stop()}},e)})),children:"Resubmit"})]})),(0,eT.jsxs)(eT.Fragment,{children:[t&&(0,eT.jsx)(tM,{children:t}),(0,eT.jsx)(tH,{children:p}),(0,eT.jsx)(tQ,{integration:n}),(0,eT.jsx)(tU,{children:f}),v]})});var tX=t(76944),t0=t(31637),t1=t(83333);function t2(e){var n,t=e.requestId,r=(0,eN.useState)(!1),i=r[0],a=r[1],o=(0,eN.useState)(!1),s=o[0],c=o[1],l=(0,eN.useState)([]),u=l[0],d=l[1],p=(n=(0,eS.Z)(eO().mark(function e(){var n,r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a(!0),e.next=5,(0,tX.v)({requestId:t,eventCode:"request-update-success",clearNotifications:!0});case 5:n=e.sent,i=(r=(0,eU.Z)(n,2))[0],r[1]?c(!0):i&&d(i.rows),a(!1);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return((0,eN.useEffect)(function(){p()},[t]),s)?(0,eT.jsx)(eq,{variant:"warning",content:"Failed to load details."}):i?(0,eT.jsx)(t0.Z,{}):(0,eT.jsx)(eT.Fragment,{children:(0,eT.jsx)(t1.Z,{events:u})})}var t3=t(99154),t4=t(71431),t8=t.n(t4),t5=eD.ZP.div(er||(er=(0,eC.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),t7=eD.ZP.div(ei||(ei=(0,eC.Z)(["\n  display: flex;\n  justify-content: flex-start;\n\n  & > *:nth-child(1) {\n    margin-right: 5px;\n  }\n"]))),t6="15px",t9=eD.ZP.div(ea||(ea=(0,eC.Z)(["\n  height: ",";\n  width: ",";\n  border-radius: ",";\n  margin: ",";\n  margin-left: 0;\n  border: 2px solid #b3b3b3;\n"])),t6,t6,t6,"0"),re=eD.ZP.li(eo||(eo=(0,eC.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0;\n\n  & p {\n    max-width: 90%;\n    margin: 5px 0;\n  }\n"]))),rn=function(e){var n=e.integration;return(0,eT.jsxs)(t7,{children:[(0,eT.jsx)("div",{children:(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#2E8540"})}),(0,eT.jsxs)("div",{children:[(0,eT.jsx)("span",{children:"Your integration has been approved. Please wait approx. 10 min to get access to your installation information access again."}),(0,eT.jsx)(t5,{children:"Progress Update"}),(0,eT.jsx)(tQ,{integration:n})]})]})},rt=function(){return(0,eT.jsxs)(t7,{children:[(0,eT.jsx)("div",{children:(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#2E8540"})}),(0,eT.jsx)("div",{children:(0,eT.jsx)("span",{children:"Your integration is approved and available."})})]})};function rr(e){return e.integration,(0,eT.jsx)(eT.Fragment,{children:(0,eT.jsxs)(tU,{children:[(0,eT.jsxs)(re,{children:["Requirements email sent to IDIM",(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#00C45B"})]}),(0,eT.jsxs)(re,{children:[(0,eT.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,eT.jsx)(nt.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,eT.jsx)(eL.G,{icon:eK.FU$,color:"#b3b3b3"})]}),(0,eT.jsxs)(re,{children:[(0,eT.jsx)("p",{children:"Access to prod"}),(0,eT.jsx)(t9,{})]})]})})}var ri=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,i=t.hasBceid,a=t.awaitingBceidProd,o=t.bceidProdApplying,s=t.bceidApproved;if(!r||!i)return null;var c=null;return o?c=(0,eT.jsx)(rn,{integration:n}):s?c=(0,eT.jsx)(rt,{}):a&&(c=(0,eT.jsx)(rr,{integration:n})),(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)("br",{}),(0,eT.jsx)(t5,{children:"Access to BCeID Prod"}),(0,eT.jsx)("br",{}),c]})};function ra(e){return e.integration,(0,eT.jsx)(eT.Fragment,{children:(0,eT.jsxs)(tU,{children:[(0,eT.jsxs)(re,{children:["Requirements email sent to GCIO",(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#00C45B"})]}),(0,eT.jsxs)(re,{children:[(0,eT.jsx)("p",{children:"Access to prod"}),(0,eT.jsx)(t9,{})]})]})})}var ro=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,i=t.hasGithub,a=t.awaitingGithubProd,o=t.githubProdApplying,s=t.githubApproved;if(!r||!i)return null;var c=null;return o?c=(0,eT.jsx)(rn,{integration:n}):s?c=(0,eT.jsx)(rt,{}):a&&(c=(0,eT.jsx)(ra,{integration:n})),(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)("br",{}),(0,eT.jsx)(t5,{children:"Access to GitHub Prod"}),(0,eT.jsx)("br",{}),c]})},rs=t(19287),rc=eD.ZP.label(es||(es=(0,eC.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"])));eD.ZP.div(ec||(ec=(0,eC.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"});var rl=eD.ZP.div(el||(el=(0,eC.Z)(["\n  text-align: center;\n"]))),ru=eD.ZP.div(eu||(eu=(0,eC.Z)(["\n  height: var(--field-top-spacing);\n"]))),rd=function(){return(0,eT.jsxs)(rl,{children:[(0,eT.jsx)(ru,{}),(0,eT.jsx)(eH.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},rp=(0,e9.hU)(function(e){var n,t,r,i,a=e.selectedRequest;e.alert;var o=(0,eN.useState)(!1),s=(o[0],o[1]),c=(0,eN.useState)(!1),l=c[0],u=c[1],d=(0,eN.useState)(!1),p=d[0],h=d[1],f=(0,eN.useState)(""),x=f[0],v=f[1],m=(0,eN.useState)([]),g=m[0],b=m[1],j=(0,eN.useState)([]),y=j[0],w=j[1],Z=(0,eN.useState)(void 0),P=Z[0];Z[1];var k=(0,eN.useState)("dev"),S=k[0],C=k[1],I=(null==a?void 0:a.environments)||[],O=(0,eN.useCallback)(nT()((n=(0,eS.Z)(eO().mark(function e(n){var t;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(!0);case 2:return e.next=4,e1({environment:S,integrationId:a.id,username:n3(a.clientId),roleNames:n});case 4:return t=e.sent,(0,eU.Z)(t,2)[1]||v("Last saved at ".concat(new Date().toLocaleString())),e.next=10,h(!1);case 10:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==a?void 0:a.id,S,P]),N=(t=(0,eS.Z)(eO().mark(function e(n,t){var r,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],"clear"===t.action||(r="remove-value"===t.action?y.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):[].concat((0,nF.Z)(y),[null===(i=t.option)||void 0===i?void 0:i.value])),O(r),w(r);case 4:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),D=(r=(0,eS.Z)(eO().mark(function e(){var n,t,r;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,s(!0);case 4:return e.next=6,e$({environment:S,integrationId:a.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,eU.Z)(n,2))[0],t[1],b(null==r?[]:r.map(function(e){return e.name})),s(!1);case 13:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),R=(i=(0,eS.Z)(eO().mark(function e(n){var t,r;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(!0);case 2:return e.next=4,eX({environment:S,integrationId:a.id,username:n});case 4:return t=e.sent,r=(0,eU.Z)(t,1)[0],e.next=9,w(r||[]);case 9:u(!1);case 10:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)});return(0,eN.useEffect)(function(){D(),v(""),R(n3(a.clientId))},[S]),(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(rs.Z,{children:(0,eT.jsx)(ng.bZ,{variant:"info",closable:!1,"data-testid":"assign-svc-acct-role-risk-alert",children:(0,eT.jsxs)("span",{className:"normal",children:["There may be a security risk if you rely on client roles of a service account,"," ",(0,eT.jsx)(nt.default,{external:!0,href:"https://github.com/bcgov/sso-keycloak/wiki/Creating-a-Role#service-account-role-management",children:"click to visit our wiki page"})]})})}),(0,eT.jsxs)(ng.mQ,{onChange:function(e){C(e)},activeKey:S,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eT.jsx)("br",{}),I.map(function(e){return(0,eT.jsx)(ng.OK,{tab:nv()(e),children:(0,eT.jsx)(eM.ZP,{cols:10,children:(0,eT.jsxs)(eM.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eT.jsx)(eM.ZP.Col,{span:5,children:(0,eT.jsx)(nU.Z,{headers:[{accessor:"projectName",Header:"Service Account"}],data:[{projectName:a.projectName}],colfilters:[],activateRow:n8(),rowSelectorKey:"projectName"})}),(0,eT.jsx)(eM.ZP.Col,{span:5,children:l?(0,eT.jsx)(rd,{}):(0,eT.jsxs)("div",{children:[(0,eT.jsx)(rc,{children:"Assign Service Account to a Role"}),(0,eT.jsx)("div",{"data-testid":"assign-svc-acct-to-role-select",children:(0,eT.jsx)(nb.ZP,{value:y.map(function(e){return{value:e,label:e}}),options:g.map(function(e){return{value:e,label:e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:N})}),(0,eT.jsx)(ng.Ad,{saving:p,content:x})]})})]})})},e)})]})]})});function rh(){return(0,eT.jsxs)(tU,{children:[(0,eT.jsxs)(re,{children:["Requirements email sent to DIT",(0,eT.jsx)(eL.G,{icon:eK.f8k,color:"#00C45B"})]}),(0,eT.jsxs)(re,{children:[(0,eT.jsxs)("p",{children:["Please reach out to DIT if you do not hear back within the next 2-3 business days (",(0,eT.jsx)(nt.default,{href:"mailto:ditp.support@gov.bc.ca",children:"ditp.support@gov.bc.ca"}),")."]}),(0,eT.jsx)(eL.G,{icon:eK.FU$,color:"#b3b3b3"})]}),(0,eT.jsxs)(re,{children:[(0,eT.jsx)("p",{children:"Access to prod"}),(0,eT.jsx)(t9,{})]})]})}var rf=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,i=t.hasDigitalCredential,a=t.awaitingDigitalCredentialProd,o=t.digitalCredentialProdApplying,s=t.digitalCredentialApproved;if(!r||!i)return null;var c=null;return o?c=(0,eT.jsx)(rn,{integration:n}):s?c=(0,eT.jsx)(rt,{}):a&&(c=(0,eT.jsx)(rh,{})),(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)("br",{}),(0,eT.jsx)(t5,{children:"Access to Digital Credential Prod"}),(0,eT.jsx)("br",{}),c]})},rx=t(29009),rv=t(41087),rm=t(14195),rg=t(3023),rb=t(75358),rj=t(26050),ry=t(33558),rw=t(18242),rZ=t(84642),rP=(m=(0,eS.Z)(eO().mark(function e(n,t,r,i){var a;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eV.e.get("requests/".concat(n,"/metrics?env=").concat(t,"&fromDate=").concat(r,"&toDate=").concat(i)).then(function(e){return null==e?void 0:e.data});case 3:return a=e.sent,e.abrupt("return",[a,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r){return m.apply(this,arguments)}),rk=t(9198),rS=t.n(rk);t(24394);var rC=t(31879);function rI(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rO(e){return(0,eT.jsx)(eT.Fragment,{children:(0,eT.jsx)(rS(),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rI(Object(t),!0).forEach(function(n){(0,eR.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({dateFormat:"yyyy-MM-dd",customInput:(0,eT.jsx)(rN,{label:e.label}),enableTabLoop:!1,popperPlacement:"bottom-start",maxDate:new Date},e))})}function rN(e){var n=e.value,t=e.onClick,r=e.label;return(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(rC.Z,{style:{fontWeight:"bold"},children:r}),(0,eT.jsxs)("div",{className:"input-group",children:[(0,eT.jsx)("input",{type:"text",className:"form-control",value:n,onClick:t,readOnly:!0}),(0,eT.jsx)("div",{className:"input-group-append",children:(0,eT.jsx)("span",{className:"input-group-text",style:{height:"100%"},children:(0,eT.jsx)(eL.G,{icon:eK.fT7})})})]})]})}var rD=t(9206),rR=eD.ZP.div(ed||(ed=(0,eC.Z)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  padding-right: 15px;\n  & > * {\n    margin-left: 15px;\n  }\n"])));eD.ZP.label(ep||(ep=(0,eC.Z)(["\n  margin-bottom: 2px;\n"])));var rF=eD.ZP.div(eh||(eh=(0,eC.Z)(["\n  height: var(--field-top-spacing);\n"])));eD.ZP.span(ef||(ef=(0,eC.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"]))),(0,eD.ZP)(eL.G)(ex||(ex=(0,eC.Z)(["\n  margin-right: 20px;\n"]))),eD.ZP.div(ev||(ev=(0,eC.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"]))),eD.ZP.hr(em||(em=(0,eC.Z)(["\n  background-color: black;\n"])));var rE=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},rT="December 01, 2023",rB=(0,e9.hU)(function(e){var n,t=e.integration,r=(0,eN.useState)("dev"),i=r[0],a=r[1],o=(null==t?void 0:t.environments)||[],s=(0,eN.useState)([]),c=s[0],l=s[1],u=(0,eN.useState)(!1);u[0],u[1];var d=(0,eN.useState)((0,e7.F3)(14)),p=d[0],h=d[1],f=(0,eN.useState)(new Date),x=f[0],v=f[1],m=function(e){h(e)},g=function(e){v(e)},b=(0,eN.useCallback)(nT()((n=(0,eS.Z)(eO().mark(function e(n,r,i){var a,o,s;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rP(null==t?void 0:t.id,i,n,r);case 2:a=e.sent,s=(o=(0,eU.Z)(a,2))[0],o[1]||0===s.length?l([]):l(s);case 7:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)})),[null==t?void 0:t.clientId,i,p,x]);return(0,eN.useEffect)(function(){b(rE(p),rE(x),i)},[null==t?void 0:t.clientId,i,p,x]),(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(rF,{}),(0,eT.jsx)("div",{children:(0,eT.jsxs)(rR,{children:[(0,eT.jsx)(rO,{placeholderText:"Start Date",selected:new Date(p),onChange:function(e){return m(e)},minDate:new Date(rT),maxDate:x,label:"Start Date"}),(0,eT.jsx)(rO,{placeholderText:"End Date",selected:new Date(x),onChange:function(e){return g(e)},minDate:p,label:"End Date"})]})}),(0,eT.jsxs)(ng.mQ,{onChange:function(e){a(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eT.jsx)("br",{}),o.map(function(e){return(0,eT.jsx)(ng.OK,{tab:nv()(e),children:(0,eT.jsx)("div",{style:{width:"100%",height:300},children:(null==c?void 0:c.length)>0?(0,eT.jsx)(rx.h,{children:(0,eT.jsxs)(rv.v,{data:c,margin:{top:20,right:20,bottom:30,left:20},children:[(0,eT.jsx)(rm.q,{strokeDasharray:"3 3"}),(0,eT.jsx)(rg.K,{dataKey:"event",tick:{fontSize:10},label:{value:"Events",position:"insideBottomRight"}}),(0,eT.jsx)(rb.B,{dataKey:"count",label:{value:"Count",angle:-90,position:"insideLeft"}}),(0,eT.jsx)(rj.u,{}),(0,eT.jsx)(ry.D,{}),(0,eT.jsx)(rw.$,{dataKey:"count",fill:"#0d6efd",barSize:30,label:{fill:"#0d6efd",fontSize:20,position:"top"},background:{fill:"#eee"}})]})}):(0,eT.jsx)("div",{style:{textAlign:"center"},children:(0,eT.jsx)(rZ.x,{children:"No data available yet!"})})})},e)})]}),(0,eT.jsxs)(ne.$,{children:["This tab was released ",rT,". Please refer to"," ",(0,eT.jsx)(rD.rU,{href:"https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html/server_administration_guide/auditing_and_events#event_types",external:!0,children:"here"})," ","for event type details."]})]})}),rA=eD.ZP.div(eg||(eg=(0,eC.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  ","\n"])),function(e){return e.short?"max-width: 800px;":""});eD.ZP.div(eb||(eb=(0,eC.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  margin-bottom: 1rem;\n"])));var rG=eD.ZP.div(ej||(ej=(0,eC.Z)(["\n  text-align: center;\n"]))),rz=eD.ZP.div(ey||(ey=(0,eC.Z)(["\n  height: var(--field-top-spacing);\n"]))),rq=eD.ZP.div(ew||(ew=(0,eC.Z)(["\n  margin-bottom: 60px;\n"]))),rU="tech-details",rL="role-management",rK="user-role-management",rM="service-account-role-management",rH="secret",rV="history",r_="metrics",rW=function(e){var n=e.integration,t=e.children;return(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsxs)("h2",{children:["INTEGRATION DETAILS - ",t8()(String(n.id),8,"0")]}),(0,eT.jsx)(ng.OC,{children:t})]})},rY=function(e){var n=e.integration,t=e.approvalContext;return(0,eT.jsx)(ng.OK,{tab:"Technical Details",children:(0,eT.jsx)(rA,{short:!1,children:(0,eT.jsx)(eM.ZP,{cols:15,children:(0,eT.jsxs)(eM.ZP.Row,{gutter:[],children:[(0,eT.jsx)(eM.ZP.Col,{span:7,children:(0,eT.jsx)(nc,{integration:n})}),(0,eT.jsx)(eM.ZP.Col,{span:1}),(0,eT.jsxs)(eM.ZP.Col,{span:7,children:[(0,eT.jsx)(ri,{integration:n,approvalContext:t}),(0,eT.jsx)(ro,{integration:n,approvalContext:t}),(0,eT.jsx)(rf,{integration:n,approvalContext:t})]})]})})})},rU)},r$=function(e){var n=e.integration;return(0,eT.jsx)(ng.OK,{tab:"Role Management",children:(0,eT.jsxs)(rA,{children:[(0,eT.jsx)("br",{}),(0,eT.jsxs)("div",{children:["Please visit our"," ",(0,eT.jsx)(nt.default,{external:!0,href:"https://github.com/bcgov/sso-keycloak/wiki/Creating-a-Role",children:"wiki page"})," ","for more information on roles."]}),(0,eT.jsx)(tx,{integration:n})]})},rL)},rJ=function(e){var n=e.integration;return(0,eT.jsx)(ng.OK,{tab:"Assign Users to Roles",children:(0,eT.jsx)(rA,{children:(0,eT.jsx)(tE,{selectedRequest:n})})},rK)},rQ=function(e){var n=e.integration;return(0,eT.jsx)(ng.OK,{tab:"Assign Service Account to Roles",children:(0,eT.jsx)(rA,{children:(0,eT.jsx)(rp,{selectedRequest:n})})},rM)},rX=function(e){var n=e.integration;return(0,eT.jsx)(ng.OK,{tab:"Secrets",children:(0,eT.jsx)(rA,{short:!0,children:(0,eT.jsx)(nf,{selectedRequest:n})})},rH)},r0=function(e){var n=e.integration;return(0,eT.jsx)(ng.OK,{tab:"Metrics",children:(0,eT.jsx)(rA,{short:!1,children:(0,eT.jsx)(rB,{integration:n})})},r_)},r1=function(e){var n=e.integration;return(0,eT.jsx)(ng.OK,{tab:"Change History",children:(0,eT.jsx)(rA,{short:!0,children:(0,eT.jsx)(t2,{requestId:n.id})})},rV)},r2=function(e){var n,t,r=e.integration,i=(0,eN.useState)(rU),a=i[0],o=i[1];if(!r)return null;var s=r.status,c=r.environments,l=r.bceidApproved,u=void 0!==l&&l,d=r.githubApproved,p=void 0!==d&&d,h=r.digitalCredentialApproved,f=void 0!==h&&h,x=(0,tT.n)(s||"draft"),v=(void 0===c?[]:c).includes("prod"),m=(0,t3.Jx)(r),g=(0,t3.dV)(r),b=(0,t3.S3)(r),j=(0,e7.he)(r),y=(0,e7.R5)(r),w=(0,e7.jt)(r),Z="gold"===r.serviceType,P="service-account"!==r.authType,k="both"===r.authType;if("In Draft"===x)return(0,eT.jsx)(rW,{integration:r,children:(0,eT.jsxs)(eq,{variant:"info",children:[(0,eT.jsx)("div",{children:(0,eT.jsx)("strong",{children:"Your request has not been submitted."})}),(0,eT.jsx)("div",{children:'To complete your request, click "Edit" button.'})]})});var S=[],C=[],I=(null===(n=r.devIdps)||void 0===n?void 0:n.length)&&(null===(t=r.devIdps)||void 0===t?void 0:t.every(function(e){return"digitalcredential"===e}));"Submitted"===x?["planFailed","applyFailed"].includes(r.status)?(S.push((0,eT.jsx)(ng.OK,{tab:"Technical Details",children:(0,eT.jsx)(rA,{short:!1,children:(0,eT.jsx)("div",{style:{display:"inline-flex",margin:"20px 0 20px 0",background:"#FFCCCB",borderRadius:"5px"},children:(0,eT.jsx)("div",{style:{padding:5},children:(0,eT.jsxs)(ne.B,{children:["Your request for an integration could not be completed. Please"," ",(0,eT.jsx)(nt.default,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})})})},rU)),C.push(rU)):(S.push((0,eT.jsx)(ng.OK,{tab:"Technical Details",children:(0,eT.jsx)(rA,{short:!1,children:(0,eT.jsxs)(eM.ZP,{cols:15,children:[(0,eT.jsx)("br",{}),(0,eT.jsxs)(rG,{children:[(0,eT.jsx)(rz,{}),(0,eT.jsx)(eH.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0}),(0,eT.jsx)(rq,{})]})]})})},rU)),C.push(rU)):"Completed"===x&&(S.push(rY({integration:r,approvalContext:{hasProd:v,hasBceid:m,hasGithub:g,hasDigitalCredential:b,bceidApproved:u,githubApproved:p,digitalCredentialApproved:f,awaitingBceidProd:m&&v&&!u,awaitingGithubProd:g&&v&&!p,awaitingDigitalCredentialProd:b&&v&&!f,bceidProdApplying:j,githubProdApplying:y,digitalCredentialProdApplying:w}})),C.push(rU),I||(S.push(r$({integration:r})),C.push(rL)),Z&&P&&!I&&(S.push(rJ({integration:r})),C.push(rK)),Z&&(!P||k)&&(S.push(rQ({integration:r})),C.push(rM)),r.publicAccess||(S.push(rX({integration:r})),C.push(rH)),S.push(r1({integration:r})),C.push(rV),S.push(r0({integration:r})),C.push(r_));var O=a;return C.includes(a)||(O=C[0]),(0,eT.jsx)(rW,{integration:r,children:(0,eT.jsx)(ng.mQ,{activeKey:O,onChange:function(e){o(e)},tabBarGutter:30,destroyInactiveTabPane:!0,children:S})})},r3=t(11163),r4=t(77740),r8=t(48398),r5=eD.ZP.tr(eZ||(eZ=(0,eC.Z)(["\n  float: right;\n  padding-right: 0.5em;\n"]))),r7=eD.ZP.p(eP||(eP=(0,eC.Z)(["\n  margin: 0;\n"])));function r6(){return(0,eT.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var r9=function(e){return t8()(String(e),8,"0")},ie=function(e){var n=e.handleNewIntegrationClick,t=e.integrations;return t&&(null==t?void 0:t.length)!=0?(0,eT.jsx)(ng.zx,{size:"medium","data-testid":"request-integration",onClick:n,variant:"callout",children:"+ Request SSO Integration"}):(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)("p",{children:(0,eT.jsx)("b",{children:"To request an integration for a Standard Realm, you’ll need the following information:"})}),(0,eT.jsxs)("div",{style:{background:"#D9EDFD",textAlign:"center",padding:"16px"},children:[(0,eT.jsxs)(eM.ZP,{cols:2,style:{textAlign:"left"},children:[(0,eT.jsxs)(eM.ZP.Row,{collapse:"992",gutter:[],align:"top",children:[(0,eT.jsxs)(eM.ZP.Col,{span:1,children:[(0,eT.jsx)(ng.wk,{number:1,title:"Project Information",children:null}),(0,eT.jsxs)(r7,{children:[(0,eT.jsx)(eL.G,{icon:eK.LEp})," Project Name"]}),(0,eT.jsxs)(r7,{children:[(0,eT.jsx)(eL.G,{icon:eK.LEp})," Project Team Members (Optional)"]}),(0,eT.jsxs)(r7,{children:[(0,eT.jsx)(eL.G,{icon:eK.LEp})," Product Owner or Technical Contact"]})]}),(0,eT.jsxs)(eM.ZP.Col,{span:1,children:[(0,eT.jsx)(ng.wk,{number:2,title:"Technical Info",children:null}),(0,eT.jsxs)(r7,{children:[(0,eT.jsx)(eL.G,{icon:eK.LEp})," Client type (",(0,eT.jsx)(nt.default,{href:"https://github.com/bcgov/sso-keycloak/wiki/Using-Your-SSO-Client#confidential-vs-private-client",children:"Public or Confidential, learn more"}),")"]}),(0,eT.jsxs)(r7,{children:[(0,eT.jsx)(eL.G,{icon:eK.LEp})," Identity Provider (IDIR, Azure, BCeID or Basic)"]}),(0,eT.jsxs)(r7,{children:[(0,eT.jsx)(eL.G,{icon:eK.LEp})," Environments (Development, Test, Production)"]}),(0,eT.jsxs)(r7,{children:[(0,eT.jsx)(eL.G,{icon:eK.LEp})," Redirect URIs for selected environments"]})]})]}),(0,eT.jsx)("p",{style:{marginTop:"1.25rem"},children:"*You’ll be able to save and return your integration request, anytime throughout the request form."})]}),(0,eT.jsx)(ng.zx,{size:"medium","data-testid":"request-integration",onClick:n,variant:"callout",children:"+ Request SSO Integration"})]})]})};function it(e){var n,t,r,i=e.setIntegration,a=e.setIntegrationCount,o=(0,r3.useRouter)(),s=o.query.integr,c=(0,eN.useState)(!0),l=c[0],u=c[1],d=(0,eN.useState)(!1),p=d[0],h=d[1],f=(0,eN.useState)([]),x=f[0],v=f[1],m=(0,eN.useState)(s&&Number(s)||void 0),g=m[0],b=m[1],j=(n=(0,eS.Z)(eO().mark(function e(){return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.push("/request");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),y=function(e){b(e.id),i(e)},w=function(e){var n=e||[];if(v(n),a(n.length),g){var t=e.find(function(e){return(null==e?void 0:e.id)===g});t?y(t):(null==e?void 0:e.length)>0&&y(e[0])}else(null==e?void 0:e.length)>0&&y(e[0])},Z=(t=(0,eS.Z)(eO().mark(function e(){var n,t,r;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,(0,n2.XJ)();case 3:n=e.sent,r=(t=(0,eU.Z)(n,2))[0],h(!!t[1]),w(r||[]),u(!1);case 10:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,eN.useEffect)(function(){Z(),o.replace("/my-dashboard/integrations")},[]),(0,eN.useEffect)(function(){return(0,e7.rn)(x||[])&&(clearInterval(r),r=setInterval((0,eS.Z)(eO().mark(function e(){var n,t,i;return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n2.XJ)();case 2:n=e.sent,i=(t=(0,eU.Z)(n,2))[0],t[1]?clearInterval(r):w(i||[]);case 7:case"end":return e.stop()}},e)})),5e3)),function(){r&&clearInterval(r)}},[x,g]);var P=p?(0,eT.jsx)(r8.q,{}):x&&0!==x.length?(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(ng.h4,{size:"lg",children:"INTEGRATIONS"}),(0,eT.jsx)(nU.Z,{headers:[{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"status",Header:"Status"},{accessor:"authType",Header:"Usecase"},{accessor:"serviceType",Header:"Service Type"},{accessor:"actions",Header:(0,eT.jsx)(r6,{}),disableSortBy:!0}],data:null==x?void 0:x.map(function(e){return{id:r9(e.id),projectName:e.projectName,status:(0,tT.n)(e.status||"draft"),authType:r4.F[e.authType||"browser-login"],serviceType:"Gold",actions:(0,eT.jsx)(r5,{children:(0,eT.jsx)(nq.ZP,{request:e,onDelete:function(){Z()},defaultActiveColor:"#fff",delIconStyle:{marginLeft:"7px"}})})}}),activateRow:function(e){var n=e.cells[0].value;x.forEach(function(e){e.id==n&&y(e)})},activeSelector:g&&r9(g),rowSelectorKey:"id",colfilters:[]})]}):(0,eT.jsx)(r8.V,{message:"No Requests Submitted"});return l?(0,eT.jsx)(t0.Z,{}):(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)("br",{}),(0,eT.jsx)(ie,{handleNewIntegrationClick:j,integrations:x}),(0,eT.jsx)("br",{}),(0,eT.jsx)("br",{}),P]})}var ir=t(6178),ii=eD.ZP.div(ek||(ek=(0,eC.Z)(["\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n  flex: 1;\n"]))),ia=function(e){e.session;var n,t=(0,r3.useRouter)(),r=(0,eN.useState)(null),i=r[0],a=r[1],o=(0,eN.useState)(1),s=o[0],c=o[1],l=(0,eN.useState)(!1),u=(l[0],l[1]),d="integration-failed-modal",p=(n=(0,eS.Z)(eO().mark(function e(){return eO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.location.hash=d);case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),h=(0,eN.useState)(""),f=h[0],x=h[1];return(0,eN.useEffect)(function(){var e;x(t.query.requestId),(null==t?void 0:null===(e=t.query)||void 0===e?void 0:e.integrationFailedMessageModal)==="true"&&(u(!0),p())},[t.query.showModal]),(0,eT.jsxs)(eT.Fragment,{children:[(0,eT.jsx)(ir.Z,{tab:"integrations",leftPanel:function(){return(0,eT.jsx)(it,{setIntegration:a,setIntegrationCount:c})},rightPanel:function(){return i&&(0,eT.jsx)(r2,{integration:i})},showResizable:s>0}),(0,eT.jsx)(nu.Z,{title:"".concat(f," - Integration request failed"),icon:eK.eHv,id:d,content:(0,eT.jsxs)("div",{children:[(0,eT.jsx)("div",{children:(0,eT.jsx)("p",{children:"The integration request could not be completed. Please contact the Pathfinder SSO Team."})}),(0,eT.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},children:[(0,eT.jsx)(ii,{children:(0,eT.jsx)("div",{children:(0,eT.jsxs)("a",{href:"https://chat.developer.gov.bc.ca/channel/sso",target:"_blank",title:"Rocket Chat",style:{color:"#0d6efd"},children:[(0,eT.jsx)(eL.G,{size:"1x",icon:eK.Z6I,color:"#0d6efd"})," Rocketchat"]})})}),(0,eT.jsx)(ii,{children:(0,eT.jsx)("div",{children:(0,eT.jsxs)("a",{href:"mailto:bcgov.sso@gov.bc.ca",title:"Pathfinder SSO",style:{color:"#0d6efd"},children:[(0,eT.jsx)(eL.G,{size:"1x",icon:eK.FU$,color:"#0d6efd"})," Email"]})})})]})]}),showCancel:!1,showConfirm:!1,closable:!0})]})}},76944:function(e,n,t){"use strict";t.d(n,{v:function(){return c}});var r,i=t(50029),a=t(87794),o=t.n(a),s=t(21963),c=(r=(0,i.Z)(o().mark(function e(n){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.e.post("events",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return r.apply(this,arguments)})},73923:function(e,n,t){"use strict";t.d(n,{Di:function(){return a},ON:function(){return r},TE:function(){return i}});var r=function(e){return JSON.stringify(e,void 0,2)},i=function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{return document.execCommand("copy"),document.body.removeChild(n),!0}catch(e){return document.body.removeChild(n),!1}},a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:t})),i=document.createElement("a");i.href=r,i.setAttribute("download",n),document.body.appendChild(i),i.click(),document.body.removeChild(i)}},80382:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/integrations",function(){return t(74480)}])}},function(e){e.O(0,[662,693,634,936,977,832,872,691,568,774,888,179],function(){return e(e.s=80382)}),_N_E=e.O()}]);