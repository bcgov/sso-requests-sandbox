(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{62325:function(e,n,t){"use strict";var r=t(83024),a=t(12183),i={shared:{button:"\n      border-radius: 0.222em;\n      border-width: 0;\n      padding: 0.6em 1.1em;\n      text-align: center;\n      text-decoration: none;\n      font-weight: 700;\n      letter-spacing: 1px;\n      display: inline-block;\n      cursor: pointer;\n      box-shadow: 0px 0px 0px 2px transparent inset, 0px 0em 0px 0px rgba(34, 36, 38, 0.15) inset;\n    "},size:{xsmall:{button:"\n        font-size: 0.7rem;\n      "},small:{button:"\n        font-size: 0.8rem;\n      "},medium:{button:"\n        font-size: ".concat(a.n5,";\n      ")},large:{button:"\n        font-size: ".concat(a.zA,";\n      ")}},variant:{primary:{button:"\n        background-color: #D5EDFF;\n        box-shadow: 0px 0px 0px 2px #D5EDFF inset !important;\n        color: #3E3E3E;\n\n        &:hover {\n          text-decoration: underline;\n          background-color: #FFF7D5;\n          box-shadow: 0px 0px 0px 2px #FFF7D5 inset !important;\n          opacity: 0.80;\n        }\n\n        &:active {\n          opacity: 1;\n        }\n      "},grey:{button:"\n        background-color: #B2B2B2;\n        box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        color: #F8F8F8;\n        min-width: 110px;\n\n        &:hover {\n          background-color: ".concat(a.TU,";\n          box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        }\n      ")}}},s=(0,r.applyTheme)(i,{defaultProps:{variant:"primary",size:"medium"},breakProps:[],staticProps:["fullHeight","fullWidth"]});n.Z=s},49936:function(e,n,t){"use strict";var r,a=t(71383);t(67294);var i=t(11163),s=t(46312),o=t(71893),c=t(85330),l=t(4256),u=t(22280),d=t(85893),p=o.ZP.div(r||(r=(0,a.Z)(["\n  height: 100%;\n  overflow: auto;\n"])));n.Z=function(e){var n=e.tab,t=e.leftPanel,r=e.rightPanel,a=e.showResizable;e.children;var o=(0,i.useRouter)(),h=(0,d.jsxs)(c.mQ,{onChange:function(e){o.replace("/my-dashboard/".concat(e))},activeKey:n,tabBarGutter:30,children:[(0,d.jsx)(c.OK,{tab:"My Projects"},"integrations"),(0,d.jsx)(c.OK,{tab:"My Teams"},"teams")]});return(0,d.jsxs)(l.Z,{rules:u.F,children:[h,void 0===a||a?(0,d.jsx)(s.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,d.jsx)(p,{children:t&&t()})}):t&&t(),(0,d.jsx)("br",{}),r&&r()]})}},13817:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return rP}});var r,a,i,s,o,c,l,u,d,p,h,f,x,v,g,m,b,j,y,w,Z,P,S,C,k,O,D,I,F,E,N,T,R,A,B,z,G,q,L,U,M,K,H,_,Y,W,V,$,J,Q,X,ee,en,et,er,ea,ei,es,eo,ec=t(50029),el=t(71383),eu=t(87794),ed=t.n(eu),ep=t(67294),eh=t(71893),ef=t(59499),ex=t(16530),ev=t(69829),eg=t(85893);function em(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eb(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?em(Object(t),!0).forEach(function(n){(0,ef.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):em(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ej=(0,ex.applyTheme)({shared:{container:"\n      line-height: 1.5em;\n      border: 1px solid transparent;\n      border-radius: 0.2222em;\n      padding: 1em 0.5em;\n\n      & a {\n        text-decoration: underline;\n      }\n\n      & .pg-notification-content>svg {\n        overflow: initial;\n      }\n    ",close:"\n      cursor: pointer !important;\n      text-align: center;\n      text-decoration: none;\n      border-radius: 0.2222em;\n      padding: 0.4em 0.5em;\n      margin-right: 20px;\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},variant:{success:{container:"\n        background-color: #dff0d8;\n        border-color: #d6e9c6;\n        color: #2d4821;\n\n        & a {\n          color: #2b542c;\n        }\n      ",content:"\n        color: #2d4821;\n      ",close:"\n        color: #2d4821;\n        border: 1px solid #2d4821;\n\n        &:hover {\n          background: #2d4821;\n          color: #fff;\n        }\n      ",group:"\n        color: #2d4821;\n      "},info:{container:"\n        background-color: #d9eaf7;\n        border-color: #afd3ee;\n        color: #313132;\n\n        & a {\n          color: #1a5a96;\n        }\n      ",content:"\n        color: #313132;\n      ",close:"\n        color: #313132;\n        border: 1px solid #313132;\n\n        &:hover {\n          background: #313132;\n          color: #fff;\n        }\n      ",group:"\n        color: #313132;\n      "},warning:{container:"\n        background-color: #f9f1c6;\n        border-color: #faebcc;\n        color: #6c4a00;\n\n        & a {\n          color: #66512c;\n        }\n      ",content:"\n        color: #66512c;\n      ",close:"\n        color: #66512c;\n        border: 1px solid #66512c;\n\n        &:hover {\n          background: #66512c;\n          color: #fff;\n        }\n      ",group:"\n        color: #66512c;\n      "},danger:{container:"\n        background-color: #f2dede;\n        border-color: #ebccd1;\n        color: #a12622;\n\n        & a {\n          color: #843534;\n        }\n      ",content:"\n        color: #a12622;\n      ",close:"\n        color: #a12622;\n        border: 1px solid #a12622;\n\n        &:hover {\n          background: #a12622;\n          color: #fff;\n        }\n      ",group:"\n        color: #a12622;\n      "}},flex:{container:"\n      display: flex;\n    ",group:"\n      margin: auto 0.5rem;\n    "}},{defaultProps:{variant:"info",size:"medium",flex:!0},staticProps:[]},{group:{align:{left:"\n        margin-right: auto;\n    ",right:"\n        margin-left: auto;\n    "}}}),ey=function(e){switch(e){case"success":return ev.CheckCircle;case"info":return ev.InfoCircle;case"warning":return ev.ExclamationTriangle;default:return ev.ExclamationCircle}};function ew(e){return(0,eg.jsxs)(ej,eb(eb({},e),{},{children:[(0,eg.jsx)(ej.Group,{style:{marginTop:"1px"},children:(0,eg.jsx)(ev.FaSVG,{children:(0,eg.jsx)("path",{fill:"currentColor",d:ey(e.variant)})})}),(0,eg.jsx)(ej.Content,{children:e.content?e.content:e.children}),e.closable&&(0,eg.jsx)(ej.Group,{align:"right",children:(0,eg.jsx)(ej.Close,{children:"x"})})]}))}var eZ=t(16835),eP=t(99603),eS=t(59417),eC=t(64735),ek=t(42894),eO=t(7790),eD=t(62325),eI=t(9595),eF=t(58766),eE=t(12183),eN=t(36063),eT=t(32098),eR=t(4602),eA=t(74150),eB=t(18269),ez=eh.ZP.div(o||(o=(0,el.Z)(["\n  text-align: center;\n"]))),eG=eh.ZP.div(c||(c=(0,el.Z)(["\n  color: #000;\n  font-size: ",";\n  font-weight: bold;\n"])),eE.n5),eq=eh.ZP.span(l||(l=(0,el.Z)(["\n  color: #3e3e3e;\n  font-size: 14px;\n  font-weight: 700;\n"]))),eL=eh.ZP.div(u||(u=(0,el.Z)(["\n  height: var(--field-top-spacing);\n"]))),eU=eh.ZP.div(d||(d=(0,el.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),eM=(0,eN.hU)(function(e){var n,t,r,a=e.integration,i=e.alert,s=(0,ep.useState)(!1),o=s[0],c=s[1],l=(n=(0,ec.Z)(ed().mark(function e(n){var t,r,s,o;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,(0,eO.OV)(a.id,n);case 3:if(t=e.sent,s=(r=(0,eZ.Z)(t,2))[0],o=r[1],c(!1),!o){e.next=11;break}return i.show({variant:"danger",content:"Failed to download installation"}),e.abrupt("return",null);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),u=(t=(0,ec.Z)(ed().mark(function e(n){var t;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:(t=e.sent)&&(0,eI.TE)((0,eI.ON)(t));case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),d=(r=(0,ec.Z)(ed().mark(function e(n){var t;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:(t=e.sent)&&(0,eI.Di)((0,eI.ON)(t),"".concat(a.projectName,"-installation-").concat(n,".json"));case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return o?(0,eg.jsxs)(ez,{children:[(0,eg.jsx)(eL,{}),(0,eg.jsx)(ek.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(eL,{}),(0,eg.jsx)(eU,{children:"Installation JSONs"}),(0,eg.jsx)("br",{}),(0,eg.jsx)(eC.ZP,{cols:3,children:(0,eF.Dy)(a).map(function(e){if("service-account"!==a.authType&&0===e.idps.length)return null;var n=e.idps.length>0?"(".concat(e.idps.map(function(e){return eR.S[e]}).join(", "),")"):"";return(0,eg.jsxs)(ep.Fragment,{children:[(0,eg.jsx)(eC.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,eg.jsx)(eC.ZP.Col,{span:1,style:{width:"100%",height:"30px"},children:(0,eg.jsxs)(eG,{children:[e.display," ",n]})})}),(0,eg.jsx)(eC.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,eg.jsxs)(eC.ZP.Col,{span:3,children:[(0,eg.jsx)(eD.Z,{size:"medium",variant:"grey",onClick:function(){return u(e.name)},children:"Copy"}),"\xa0",(0,eg.jsx)(eD.Z,{size:"medium",variant:"grey",onClick:function(){return d(e.name)},children:"Download"}),"\xa0\xa0",(0,eg.jsx)(eP.G,{color:"green",icon:eS.f8k,title:"Ready"}),"\xa0",(0,eg.jsx)(eq,{children:"Ready"})]})}),(0,eg.jsx)("br",{})]},e.name)})}),(0,eg.jsxs)(eT.$,{children:["For more information on how to use these details, or for the public endpoints associated to your client,"," ",(0,eg.jsx)(eA.default,{href:"".concat(eB.UN,"/integrating-your-application/installation-json"),external:!0,children:"click to learn more on our wiki page"}),"."]})]})}),eK=t(4826),eH=t(35166),e_=eh.ZP.div(p||(p=(0,el.Z)(["\n  height: var(--field-top-spacing);\n"]))),eY=eh.ZP.span(h||(h=(0,el.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"])));(0,eh.ZP)(eP.G)(f||(f=(0,el.Z)(["\n  margin-right: 20px;\n"])));var eW=eh.ZP.div(x||(x=(0,el.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"])));eh.ZP.hr(v||(v=(0,el.Z)(["\n  background-color: black;\n"])));var eV=(0,eN.hU)(function(e){var n,t=e.selectedRequest,r=e.alert,a=(0,ep.useState)(null),i=a[0],s=a[1],o=(0,eF.Dy)(t),c=(0,ep.useState)(!1),l=c[0],u=c[1],d=function(e){s(e),u(!0)},p=(n=(0,ec.Z)(ed().mark(function e(){var n,a,s,o,c,l;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,eO.hU)(t.id,(null==i?void 0:i.name)||null);case 2:n=e.sent,s=(a=(0,eZ.Z)(n,2))[0],c=(o=a[1])?"danger":"success",l=o?"Failed to regenerate secret":"Client Secret Successfully Updated",r.show({variant:c,fadeOut:1e4,closable:!0,content:l}),window.location.hash="#",console.error(s,o);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),h=(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsxs)(eW,{children:[(0,eg.jsxs)("strong",{children:["You are about to change your client secret for your ",null==i?void 0:i.display," environment."]})," "]}),(0,eg.jsx)("br",{}),(0,eg.jsx)("p",{children:"Once you change your secret, your previous secret will no longer be valid for any applications using it."}),(0,eg.jsx)("p",{children:"This means you will need to update any applications using this client with the new JSON details before they are functional again."})]});return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(e_,{}),o.map(function(e){return(0,eg.jsxs)(ep.Fragment,{children:[(0,eg.jsxs)(eY,{children:[e.display,": "]}),!t.publicAccess&&(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)("br",{}),(0,eg.jsx)(eK.default,{type:"button",onClick:function(){return d(e)},children:"Change your client secret"})]}),(0,eg.jsx)("br",{}),(0,eg.jsx)("br",{})]},e.name)})]}),(0,eg.jsx)(eH.Z,{id:"confirm-new-secret",content:h,onConfirm:p,icon:eS.eHv,buttonStyle:"custom",title:"You are about to change your client secret",openModal:l,handleClose:function(){return u(!1)},closable:!0})]})}),e$=t(20070),eJ=t.n(e$),eQ=t(35124),eX=t(85330),e0=t(23157),e1=t(11915),e2=t(43590),e3=t.n(e2);function e5(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function e4(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e5(Object(t),!0).forEach(function(n){(0,ef.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e5(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e7=eh.ZP.table(g||(g=(0,el.Z)(["\n  .env {\n    width: 300px;\n  }\n"]))),e8=eh.ZP.span(m||(m=(0,el.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),e6=eh.ZP.div(b||(b=(0,el.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),e9=eh.ZP.div(j||(j=(0,el.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),ne=eh.ZP.div(y||(y=(0,el.Z)(["\n  color: #ff0000;\n"]))),nn={name:"",envs:["dev"]},nt=(0,ep.forwardRef)(function(e,n){var t,r=e.integrationId,a=e.environments,i=void 0===a?["dev"]:a,s=(0,ep.useState)(!1),o=s[0],c=s[1],l=(0,ep.useState)({}),u=l[0],d=l[1],p=(0,ep.useState)({}),h=p[0],f=p[1],x=(0,ep.useState)([nn]),v=x[0],g=x[1];(0,ep.useImperativeHandle)(n,function(){var e;return{submit:(e=(0,ec.Z)(ed().mark(function e(){var n,t,a,i,s,l,p,h;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v,o&&(n=[],e3()(u,function(e,t){n.push({name:t,envs:e})})),e.next=4,(0,eO.tK)({integrationId:r,roles:n});case 4:if(t=e.sent,i=(a=(0,eZ.Z)(t,2))[0],!a[1]){e.next=10;break}return e.abrupt("return",[!0,!1]);case 10:return s={},l={},p=!1,h=!1,e3()(i,function(e){e.failure.length>0&&e3()(e.failure,function(n){s[n]||(s[n]=[]),s[n].push(e.env),p=!0}),e.duplicate.length>0&&e3()(e.duplicate,function(n){l[n]||(l[n]=[]),l[n].push(e.env),h=!0})}),d(s),f(l),c(!0),e.abrupt("return",[p,h]);case 19:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),reset:function(){g([nn]),d({}),f({}),c(!1)}}});var m=function(e){g(v.filter(function(n,t){return t!==e}))},b=function(e,n){g(v.map(function(t,r){return r===e?{name:n,envs:t.envs}:t}))},j=(t=(0,ec.Z)(ed().mark(function e(n,t,r){return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g(v.map(function(e,r){return r===n?{name:e.name,envs:t.map(function(e){return e.value})}:e}));case 2:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),y=null;if(o){var w=null,Z=null;Object.keys(h).length>0&&(w=(0,eg.jsx)("tr",{children:(0,eg.jsx)("td",{colSpan:3,children:(0,eg.jsxs)(e6,{children:[(0,eg.jsx)(e9,{children:(0,eg.jsx)(eP.G,{icon:eS.sqG,color:"#17a2b8",title:"duplicated roles",size:"lg"})}),(0,eg.jsx)(e9,{children:"There are duplicated roles and we've skipped adding them."})]})})})),Object.keys(u).length>0&&(Z=(0,eg.jsx)("tr",{children:(0,eg.jsx)("td",{colSpan:3,children:(0,eg.jsxs)(e6,{children:[(0,eg.jsx)(e9,{children:(0,eg.jsx)(eP.G,{icon:eS.eHv,color:"#dc3545",title:"failed roles",size:"lg"})}),(0,eg.jsxs)(e9,{children:["We were unable to save some of your changes.",(0,eg.jsx)("br",{}),(0,eg.jsx)("div",{className:"fw-bold",children:"Please try submitting again."})]})]})})})),y=(0,eg.jsxs)(eg.Fragment,{children:[w,Z]})}else y=(0,eg.jsx)("tr",{children:(0,eg.jsx)("td",{colSpan:3,children:v.length<20?(0,eg.jsxs)(e8,{onClick:function(){g(v.concat(nn))},children:[(0,eg.jsx)(eP.G,{style:{color:"#006fc4"},icon:eS.KtF,title:"Add Role"}),(0,eg.jsx)("span",{children:"Add another role"})]}):(0,eg.jsx)(ne,{children:"You can only create 20 roles at a time. Please save before creating any new roles."})})});return(0,eg.jsx)("div",{children:(0,eg.jsxs)(e7,{children:[(0,eg.jsx)("thead",{children:(0,eg.jsxs)("tr",{children:[(0,eg.jsx)("th",{className:"role",children:"Role Name"}),(0,eg.jsx)("th",{className:"env",children:"Environments"}),(0,eg.jsx)("th",{})]})}),(0,eg.jsxs)("tbody",{children:[v.length>0?v.map(function(e,n){var t=function(n,t){return u[e.name]&&u[e.name].includes(t.children)?e4(e4({},n),{},{color:"#fff",backgroundColor:"#dc3545"}):h[e.name]&&h[e.name].includes(t.children)?e4(e4({},n),{},{color:"#fff",backgroundColor:"#17a2b8"}):n};return(0,eg.jsxs)("tr",{children:[(0,eg.jsx)("td",{className:"role",children:(0,eg.jsx)(e1.default,{size:"small","data-testid":"role-name-input-field",minLength:"2",maxLength:"100",value:e.name,disabled:o,onChange:function(e){return b(n,e.target.value)}})}),(0,eg.jsx)("td",{className:"env",children:(0,eg.jsx)(e0.ZP,{value:e.envs.map(function(e){return{value:e,label:e}}),options:i.map(function(e){return{value:e,label:e}}),isMulti:!0,isDisabled:o,placeholder:"Select...",noOptionsMessage:function(){return"You selected all environments"},onChange:function(e,t){return j(n,e,t)},styles:{multiValueLabel:t,multiValue:t}})}),(0,eg.jsx)("td",{children:!o&&v.length>1&&(0,eg.jsx)(e8,{onClick:function(){return m(n)},children:(0,eg.jsx)(eP.G,{style:{color:"#FF0303"},icon:eS.uMC,title:"Remove Role"})})})]},n)}):(0,eg.jsx)("tr",{children:(0,eg.jsx)("td",{colSpan:3,children:"No roles added."})}),y]})]})})}),nr=t(30274),na=t(78258),ni=t(66708),ns=eh.ZP.div(w||(w=(0,el.Z)(["\n  height: var(--field-top-spacing);\n"]))),no=function(e){var n,t=e.integration,r=(0,ep.useRef)(eQ.V),a=(0,ep.useState)("dev"),i=a[0],s=a[1],o=(0,ep.useState)(!1),c=o[0],l=o[1],u=(0,ep.useState)(0),d=u[0],p=u[1],h=(0,ep.useContext)(ni.SurveyContext);(0,ep.useEffect)(function(){s("dev"),l((0,nr.Yr)(t))},[t.id]);var f=(null==t?void 0:t.environments)||[];return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(ns,{}),(0,eg.jsx)(eX.zx,{disabled:!c,size:"medium",variant:"primary",onClick:function(){r.current.open()},"data-testid":"create-role-button",children:"+ Create a New Role"}),(0,eg.jsx)(ns,{}),(0,eg.jsxs)(eX.mQ,{onChange:function(e){s(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eg.jsx)("br",{}),f.map(function(e){return(0,eg.jsx)(eX.OK,{tab:eJ()(e),children:(0,eg.jsx)(na.Z,{environment:e,integration:t},d)},e)})]}),(0,eg.jsx)(eQ.Z,{ref:r,title:"Create New Role",icon:null,onConfirm:(n=(0,ec.Z)(ed().mark(function e(n){var t,a,i,s;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.submit();case 2:if(t=e.sent,i=(a=(0,eZ.Z)(t,2))[0],s=a[1],!i){e.next=11;break}return r.current.updateConfig({confirmButtonText:"Try Again"}),e.abrupt("return",!1);case 11:if(!s){e.next=17;break}return r.current.updateConfig({showConfirmButton:!1,cancelButtonText:"Close",buttonAlign:"right"}),p(function(e){return e+1}),e.abrupt("return",!1);case 17:return e.next=19,n.current.reset();case 19:p(function(e){return e+1}),null==h||h.setShowSurvey(!0,"createRole");case 21:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),onCancel:function(e){e.current.reset()},confirmButtonText:"Save",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:(0,eg.jsx)(nt,{integrationId:t.id,environments:f})})]})},nc=t(27812),nl=t(29208),nu=t.n(nl),nd=t(93096),np=t.n(nd),nh=t(34766),nf=t.n(nh),nx=t(47755),nv=t(63916),ng=t(94637),nm=t(10433),nb=(r=(0,ec.Z)(ed().mark(function e(n){var t,r,a;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,r=n.search,e.prev=1,e.next=4,nm.e.post("bceid-webservice/idir/search",{field:t,search:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return r.apply(this,arguments)}),nj=(a=(0,ec.Z)(ed().mark(function e(n){var t,r,a;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.guid,r=n.userId,e.prev=1,e.next=4,nm.e.post("bceid-webservice/idir/import",{guid:t,userId:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return a.apply(this,arguments)}),ny=[{value:"idir",label:"IDIR"}],nw=[{value:"givenName",label:"First Name",allowed:["idir"]},{value:"surname",label:"Last Name",allowed:["idir"]},{value:"mail",label:"Email",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"mailNickname",label:"Username",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"guid",label:"IDP GUID",allowed:["bceidbasic","bceidbusiness"]}],nZ=(0,ep.forwardRef)(function(e,n){e.key;var t,r,a=e.idp,i=e.property,s=e.search,o=e.infoModalRef,c=e.parentModalRef,l=(0,ep.useState)(!1),u=(l[0],l[1]),d=(0,ep.useState)(!1),p=d[0],h=d[1],f=(0,ep.useState)([]),x=f[0],v=f[1],g=(0,ep.useState)(""),m=g[0],b=g[1],j=(0,ep.useState)(i),y=j[0],w=j[1],Z=(0,ep.useState)(s),P=Z[0],S=Z[1],C=(0,ep.useState)(!1),k=C[0],O=C[1];(0,ep.useEffect)(function(){b(a)},[a]),(0,ep.useEffect)(function(){if(m){var e=nw.find(function(e){return e.value===y});if(null==e?void 0:e.allowed.includes(m))D(P,y);else{var n=nw.find(function(e){return e.allowed.includes(m)});w((null==n?void 0:n.value)||""),S("")}}},[m]);var D=(t=(0,ec.Z)(ed().mark(function e(n){var t,r,a,i,s=arguments;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:y,!(n.length<2)){e.next=3;break}return e.abrupt("return");case 3:return h(!0),v([]),u(!0),e.next=8,nb({field:t,search:n});case 8:r=e.sent,i=(a=(0,eZ.Z)(r,2))[0],a[1],i&&v(i),h(!1);case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),I=(r=(0,ec.Z)(ed().mark(function e(n){var t,r;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!1),e.next=3,nj({guid:n.guid,userId:n.userId});case 3:t=e.sent,(r=(0,eZ.Z)(t,2))[0],r[1]?O(!0):c.current.close({idp:m,guid:n.guid});case 8:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(nx.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",headers:[{accessor:"firstName",Header:"First name"},{accessor:"lastName",Header:"Last Name"},{accessor:"email",Header:"Email"},{accessor:"idirUsername",Header:"IDIR username"},{accessor:"actions",Header:"",disableSortBy:!0}],rowSelectorKey:"guid",data:x.map(function(e){return{guid:e.guid,firstName:e.firstName,lastName:e.lastName,email:e.email,idirUsername:e.userId,actions:(0,eg.jsxs)(nv.c4,{children:[(0,eg.jsx)(nv.Kk,{icon:eS.Mdf,role:"button","aria-label":"view",onClick:function(){o.current.open({guid:e.guid,attributes:{username:e.userId,displayName:e.displayName,firstName:e.firstName,lastName:e.lastName,email:e.email,telephone:e.phone,company:e.company,department:e.department,title:e.jobTitle},_hash:c.current.getId()})},title:"View",size:"lg"}),(0,eg.jsx)(nv.Kk,{icon:eS.q7m,role:"button","aria-label":"import",onClick:function(){return I(e)},title:"Import",size:"lg"})]})}}),colfilters:[{value:m,multiselect:!1,onChange:b,options:ny},{value:y,multiselect:!1,onChange:w,options:nw.filter(function(e){return e.allowed.includes(m)})}],showFilters:!0,loading:p,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:P,searchLocation:"right",onSearch:D,onEnter:D,noDataFoundElement:(0,eg.jsx)("p",{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})}),k&&(0,eg.jsx)("p",{className:"text-danger",children:"Failed to import the user. Please try again."})]})}),nP=t(11058);function nS(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nC(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nS(Object(t),!0).forEach(function(n){(0,ef.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nk=eh.ZP.label(Z||(Z=(0,el.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),nO=eh.ZP.div(P||(P=(0,el.Z)(["\n  text-align: center;\n"]))),nD=eh.ZP.div(S||(S=(0,el.Z)(["\n  height: var(--field-top-spacing);\n"]))),nI=eh.ZP.div(C||(C=(0,el.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),nF=eh.ZP.div(k||(k=(0,el.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),nE=eh.ZP.div(O||(O=(0,el.Z)(["\n  text-align: center;\n"]))),nN=function(){return(0,eg.jsxs)(nO,{children:[(0,eg.jsx)(nD,{}),(0,eg.jsx)(ek.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},nT=[{value:"firstName",label:"First Name",search:!0,result:!0},{value:"lastName",label:"Last Name",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],nR=[{value:"firstName",label:"Display Name",search:!0,result:!0},{value:"lastName",label:"Username",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],nA=[{value:"firstName",label:"Name",search:!0,result:!0},{value:"lastName",label:"Login",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],nB={idir:nT,azureidir:nT,bceidbasic:nR,bceidbusiness:nR,bceidboth:nR,githubpublic:nA,githubbcgov:nA},nz=(0,eN.hU)(function(e){var n,t,r,a,i,s=e.selectedRequest,o=e.alert,c=(0,ep.useRef)(eQ.V),l=(0,ep.useRef)(eQ.V),u=(0,ep.useState)(!1),d=u[0],p=u[1],h=(0,ep.useState)(1),f=h[0],x=h[1],v=(0,ep.useState)(0),g=v[0],m=v[1],b=(0,ep.useState)(15),j=b[0],y=b[1],w=(0,ep.useState)(!1),Z=w[0],P=w[1],S=(0,ep.useState)(!1),C=S[0],k=S[1],O=(0,ep.useState)(!1),D=O[0],I=O[1],F=(0,ep.useState)(""),E=F[0],N=F[1],T=(0,ep.useState)([]),R=T[0],A=T[1],B=(0,ep.useState)([]),z=B[0],G=B[1],q=(0,ep.useState)([]),L=q[0],U=q[1],M=(0,ep.useState)([]),K=M[0],H=M[1],_=(0,ep.useState)("dev"),Y=_[0],W=_[1],V=(0,ep.useState)(s.devIdps[0]),$=V[0],J=V[1],Q=(0,ep.useState)(""),X=Q[0],ee=Q[1],en=(0,ep.useState)(""),et=en[0],er=en[1],ea=(0,ep.useState)(void 0),ei=ea[0],es=ea[1],eo=(0,ep.useState)(!1),el=eo[0],eu=eo[1],eh=(0,ep.useContext)(ni.SurveyContext),ef=(0,ep.useCallback)(np()((n=(0,ec.Z)(ed().mark(function e(n){var t,r;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(!0);case 2:return N("Assigning role..."),eu(!1),e.next=6,(0,eO.$C)({environment:Y,integrationId:s.id,username:ei,roleNames:n});case 6:if(t=e.sent,r=(0,eZ.Z)(t,2)[1],I(!1),r){e.next=16;break}return N("Last saved at ".concat(new Date().toLocaleString())),null==eh||eh.setShowSurvey(!0,"addUserToRole"),e.abrupt("return",!0);case 16:return eu(!0),N("Failed to update roles."),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==s?void 0:s.id,Y,ei,eh]),ex=(t=(0,ec.Z)(ed().mark(function e(){var n,t,r;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P(!0);case 4:return e.next=6,(0,eO.gE)({environment:Y,integrationId:s.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,eZ.Z)(n,2))[0],t[1]&&o.show({variant:"danger",content:"Failed to fetch roles."}),G(null===r?[]:r.map(function(e){return e.name})),H(null===r?[]:r.map(function(e){return e.composite})),P(!1);case 15:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),ev=function(){A([]),U([]),x(1),m(0),es(void 0),p(!1)},em=function(){if(er(""),W("dev"),s.devIdps){var e=s.devIdps.length>0?s.devIdps[0]:"";J(e);var n=nB[e]||[];n.length>0&&ee(n[0].value)}},eb=(r=(0,ec.Z)(ed().mark(function e(n){var t,r,a;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(!0);case 2:return e.next=4,(0,eO.nu)({environment:Y,integrationId:s.id,username:n});case 4:if(t=e.sent,a=(r=(0,eZ.Z)(t,2))[0],!r[1]){e.next=12;break}return o.show({variant:"danger",content:"Failed to fetch user roles."}),k(!1),e.abrupt("return");case 12:return e.next=14,U(a||[]);case 14:k(!1);case 15:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});(0,ep.useEffect)(function(){ev(),em(),G([])},[s.id]),(0,ep.useEffect)(function(){ej(et,void 0,f)},[f]),(0,ep.useEffect)(function(){ej(et,void 0,1)},[j]),(0,ep.useEffect)(function(){ev(),ex(),s.devIdps&&J(s.devIdps.length>0?s.devIdps[0]:"")},[Y]),(0,ep.useEffect)(function(){ev();var e=nB[$]||[];!e.find(function(e){return e.search&&e.value===X})&&e.length>0&&ee(e[0].value)},[$]),(0,ep.useEffect)(function(){N(""),ei&&eb(ei)},[ei]);var ej=(a=(0,ec.Z)(ed().mark(function e(n){var t,r,a,i,c,l=arguments;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>1&&void 0!==l[1]?l[1]:X,r=l.length>2&&void 0!==l[2]?l[2]:f,!(n.length<2)){e.next=4;break}return e.abrupt("return");case 4:return P(!0),er(n),x(r),ee(t),A([]),U([]),es(void 0),e.next=13,(0,eO.sp)({environment:Y,idp:$,property:t,searchKey:n,integrationId:s.id||-1});case 13:if(a=e.sent,c=(i=(0,eZ.Z)(a,2))[0],i[1]&&o.show({variant:"danger",content:"Failed to fetch users."}),c){var u;p(!0),A((u=r,c.rows.slice((u-1)*15,15*u))),m(c.count)}P(!1);case 20:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),ey=function(e){return ej(e,void 0,1)},ew=(i=(0,ec.Z)(ed().mark(function e(n,t){var r,a;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"clear"===t.action||(r="remove-value"===t.action?L.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,nc.Z)(L.slice(0,-1)):[].concat((0,nc.Z)(L),[null===(a=t.option)||void 0===a?void 0:a.value])),!(r.length!==L.length)){e.next=7;break}return e.next=5,ef(r);case 5:e.sent&&U(r);case 7:case"end":return e.stop()}},e)})),function(e,n){return i.apply(this,arguments)}),ek=null;C?ek=(0,eg.jsx)(nN,{}):ei&&(ek=(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(nk,{children:"2. Assign User to a Role"}),(0,eg.jsx)(e0.ZP,{value:L.map(function(e){return{value:e,label:e}}),options:z.map(function(e,n){return{value:e,label:!0==K[n]?"".concat(e," (Composite role)"):e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:ew,"data-testid":"user-role-select"}),(0,eg.jsx)(eX.Ad,{saving:D,content:E,variant:el?"error":"success"})]}));var eD="idir"===$,eI=nB[$]||[],eF=eI.length>0?eI.filter(function(e){return e.result}):[],eE=null;d&&eD&&(eE=(0,eg.jsxs)(eg.Fragment,{children:[R.length>0&&(0,eg.jsx)(eX.XU,{italic:!0,children:"If you did not find the user you were looking for, you can try searching for the user in our IDIM Web Service Lookup tool. This tool uses a webservice to find IDIR users. so you will need to import the user that is found."}),(0,eg.jsx)(eK.default,{type:"button",size:"small","data-testid":"idim-search-button",onClick:function(){return l.current.open({key:new Date().getTime().toString(),idp:"idir",property:X,search:et})},children:"Search in IDIM Web Service Lookup"})]}));var eN=(null==s?void 0:s.environments)||[],eT=(null==s?void 0:s.devIdps)||[],eA="guid"===X||null!=$&&$.startsWith("bceid")?"Exact text match results will be displayed":"Partial text match results will be displayed",eB=function(e){var n=eI.find(function(n){return n.value===e});return null==n?void 0:n.label.toString()};return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(nD,{}),(0,eg.jsx)(eC.ZP,{cols:10,children:(0,eg.jsxs)(eC.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eg.jsxs)(eC.ZP.Col,{span:6,children:[(0,eg.jsxs)(eX.h4,{variant:"dark",size:"sm",children:["1. Search for a user based on the selection criteria below \xa0",(0,eg.jsx)(nP.Z,{title:"",content:"When searching BCeID GUID, please ensure your end users has logged in via your app (and indirectly our IDP) for this search to be successful.",hide:200})]}),(0,eg.jsx)("div",{"data-testid":"role-search-table",children:(0,eg.jsx)(nx.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",rowSelectorKey:"username",headers:[{accessor:"firstName",Header:eB("firstName")||""},{accessor:"lastName",Header:eB("lastName")||""},{accessor:"email",Header:"Email"},{accessor:"actions",Header:"",disableSortBy:!0}],data:R.map(function(e){return{username:nu()(e,"username"),firstName:nu()(e,"firstName"),lastName:nu()(e,"lastName"),email:nu()(e,"email"),actions:(0,eg.jsx)(nv.c4,{children:(0,eg.jsx)(nv.Kk,{icon:eS.Mdf,role:"button","aria-label":"view",onClick:function(n){n.stopPropagation(),c.current.open({guid:e.username.split("@")[0],attributes:nC(nC({},nf()(eF,function(n,t){return n[t.label]=nu()(e,t.value),n},{})),e.attributes)})},title:"View",size:"lg"})})}}),colfilters:[{key:"user-role-filter-env",value:Y,multiselect:!1,onChange:W,options:eN.map(function(e){return{value:e,label:eJ()(e)}})},{key:"user-role-filter-idp",value:$,multiselect:!1,onChange:J,options:eT.filter(function(e){return!["digitalcredential","bcservicescard"].includes(e)}).map(function(e){return{value:e,label:eR.S[e]}})},{key:"user-role-filter-prop",value:X,multiselect:!1,onChange:ee,options:eI.filter(function(e){return e.search})}],showFilters:!0,loading:Z,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:et,searchLocation:"right",onSearch:ey,onEnter:ey,noDataFoundElement:d?(0,eg.jsxs)(nI,{children:[(0,eg.jsx)(nF,{children:(0,eg.jsx)(eP.G,{icon:eS.RLE,color:"#D44331",title:"Edit",size:"lg"})}),eD?(0,eg.jsx)(nF,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria or try using our IDIM Web Service Lookup tool."}):(0,eg.jsx)(nF,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})]}):(0,eg.jsx)(nE,{children:"You have not searched for any users yet."}),pagination:!0,pageLimits:[15],onPage:x,rowCount:g,limit:j,onLimit:function(e){y(e)},activateRow:function(e){es(e.original.username)},searchTooltip:eA})}),eE]}),(0,eg.jsx)(eC.ZP.Col,{span:4,children:ek})]})}),(0,eg.jsx)(ng.Z,{modalRef:c}),(0,eg.jsx)(eQ.Z,{ref:l,id:"idim-webservice-lookup",title:"IDIM Web Service Lookup",icon:null,onClose:function(e,n,t){ej(t.guid,"guid",1)},cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{minWidth:"800px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){return e?(0,eg.jsx)(nZ,{idp:e.idp,property:e.property,search:e.search,infoModalRef:c,parentModalRef:l},e.key):(0,eg.jsx)(eg.Fragment,{})}})]})}),nG=t(58292),nq=t(42050),nL=eh.ZP.h3(D||(D=(0,el.Z)(["\n  color: #777777;\n  font-size: ",";\n  font-weight: bold;\n  min-height: 30px;\n  border-bottom: 1px solid #707070;\n  margin-bottom: 5px;\n  overflow: wrap;\n"])),eE.CA),nU=eh.ZP.p(I||(I=(0,el.Z)(["\n  font-size: ",";\n  color: "," !important;\n"])),eE.KN,eE.we),nM=t(11752),nK=t.n(nM),nH=eh.ZP.ul(F||(F=(0,el.Z)(["\n  list-style-type: none;\n  margin: 0;\n  position: relative;\n\n  & li {\n    border-bottom: 1px solid #d4d4d4;\n    & svg.svg-inline--fa {\n      position: absolute;\n      right: 0;\n    }\n\n    & div.icon {\n      position: absolute;\n      right: 0;\n      bottom: 5px;\n    }\n  }\n"]))),n_=t(27008),nY=(nK()()||{}).publicRuntimeConfig,nW=(void 0===nY?{}:nY).app_env,nV=(0,eh.ZP)(nL)(E||(E=(0,el.Z)(["\n  border-bottom: none;\n  margin-top: 10px;\n"]))),n$=(0,eh.ZP)(nV)(N||(N=(0,el.Z)(["\n  font-size: 14px;\n"]))),nJ=eh.ZP.a(T||(T=(0,el.Z)(["\n  color: ",";\n"])),eE.nc),nQ=(0,eh.ZP)(nq.Z)(R||(R=(0,el.Z)(["\n  margin-bottom: 10px;\n"]))),nX=function(e){switch(e){case"submitted":return 0;case"pr":return 33;case"planned":return 66;default:return 100}},n0=function(e){switch(e){case"submitted":return"Process request submitted...";case"pr":return"Pull request created...";case"planned":return"Terraform plan succeeded...";case"prFailed":case"planFailed":case"applyFailed":return"An error has occurred";default:return""}},n1=function(e){switch(e){case"prFailed":case"planFailed":case"applyFailed":return!0;default:return!1}},n2=function(e){switch(e){case"submitted":default:return 0;case"pr":return 1;case"prFailed":return 2;case"planned":return 3;case"planFailed":return 4;case"applied":return 5;case"applyFailed":return 6}};function n3(e){var n=e.integration,t=n.status,r=n.updatedAt,a=n1(t),i=new Date(r||"").toLocaleString();return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(nQ,{now:nX(t),animated:!0,variant:a?"danger":void 0}),(0,eg.jsxs)(nU,{children:["Last updated at ",i]})]})}(0,eN.hU)(function(e){var n=e.integration,t=e.title,r=e.alert,a=n.id,i=n.status,s=n.updatedAt,o=n.prNumber,c=(0,ep.useState)(!1),l=c[0],u=c[1],d=n1(i),p=n0(i),h=new Date(s||"");(0,ep.useEffect)(function(){u(12e5<new Date().getTime()-h.getTime())},[n]);var f=[(0,eg.jsxs)("li",{children:["Process request submitted",(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#00C45B"})]},"1")],x=n2(i);x<1?f.push((0,eg.jsxs)("li",{children:["Pull request created",(0,eg.jsx)(eP.G,{icon:eS.LM3,color:"#B2B2B2",spin:!0})]},"2")):2===x?f.push((0,eg.jsxs)("li",{children:["Pull request creation failed",(0,eg.jsx)(eP.G,{icon:eS.nYk,color:"#FF0000"})]},"2")):f.push((0,eg.jsxs)("li",{children:["Pull request created (",(0,eg.jsx)(eA.default,{external:!0,href:"production"===nW?"https://github.com/bcgov/sso-terraform/pull/".concat(o):"https://github.com/bcgov/sso-terraform-dev/pull/".concat(o),children:"link"}),")",(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#00C45B"})]},"2")),x<3?f.push((0,eg.jsxs)("li",{children:["Terraform plan succeeded",(0,eg.jsx)(eP.G,{icon:eS.LM3,color:"#B2B2B2",spin:!0})]},"3")):4===x?f.push((0,eg.jsxs)("li",{children:["Terraform plan failed",(0,eg.jsx)(eP.G,{icon:eS.nYk,color:"#FF0000"})]},"3")):f.push((0,eg.jsxs)("li",{children:["Terraform plan succeeded",(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#00C45B"})]},"3")),x<5?f.push((0,eg.jsxs)("li",{children:["Request processed",(0,eg.jsx)(eP.G,{icon:eS.LM3,color:"#B2B2B2",spin:!0})]},"4")):6===x?f.push((0,eg.jsxs)("li",{children:["Request failed",(0,eg.jsx)(eP.G,{icon:eS.nYk,color:"#FF0000"})]},"4")):f.push((0,eg.jsxs)("li",{children:["Request processed",(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#00C45B"})]},"4"));var v=null;return d?v=(0,eg.jsxs)(eT.B,{children:["You have an unexpected error. Please contact our SSO support team by"," ",(0,eg.jsx)(nJ,{href:"https://chat.developer.gov.bc.ca/channel/sso",target:"_blank",title:"Rocket Chat",children:"Rocket.Chat"})," ","or"," ",(0,eg.jsx)(nJ,{href:"mailto:bcgov.sso@gov.bc.ca",title:"Pathfinder SSO",target:"blank",children:"Email us"})," "]}):l&&(v=(0,eg.jsxs)(eT.$,{children:[(0,eg.jsx)("div",{children:"Your integration submission is taking longer than expected, please select resubmit."}),(0,eg.jsx)(eX.zx,{variant:"bcPrimary",size:"small",type:"button",onClick:(0,ec.Z)(ed().mark(function e(){var n,t,i,s,o;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n_.ct)(a);case 2:n=e.sent,(t=(0,eZ.Z)(n,2))[0],s=(i=t[1])?"danger":"success",o=i?"failed to resubmit the request":"resubmitted the request successfully",r.show({variant:s,fadeOut:1e4,closable:!0,content:o}),u(!1);case 10:case"end":return e.stop()}},e)})),children:"Resubmit"})]})),(0,eg.jsxs)(eg.Fragment,{children:[t&&(0,eg.jsx)(nV,{children:t}),(0,eg.jsx)(n$,{children:p}),(0,eg.jsx)(n3,{integration:n}),(0,eg.jsx)(nH,{children:f}),v]})});var n5=t(87414),n4=t(5845),n7=t(96270);function n8(e){var n,t=e.requestId,r=(0,ep.useState)(!1),a=r[0],i=r[1],s=(0,ep.useState)(!1),o=s[0],c=s[1],l=(0,ep.useState)([]),u=l[0],d=l[1],p=(n=(0,ec.Z)(ed().mark(function e(){var n,r,a;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return i(!0),e.next=5,(0,n5.v)({requestId:t,eventCode:"request-update-success",clearNotifications:!0});case 5:n=e.sent,a=(r=(0,eZ.Z)(n,2))[0],r[1]?c(!0):a&&d(a.rows),i(!1);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return((0,ep.useEffect)(function(){p()},[t]),o)?(0,eg.jsx)(ew,{variant:"warning",content:"Failed to load details."}):a?(0,eg.jsx)(n4.Z,{}):(0,eg.jsx)(eg.Fragment,{children:(0,eg.jsx)(n7.Z,{events:u})})}var n6=t(4136),n9=t(71431),te=t.n(n9),tn=eh.ZP.div(A||(A=(0,el.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),tt=eh.ZP.div(B||(B=(0,el.Z)(["\n  display: flex;\n  justify-content: flex-start;\n\n  & > *:nth-child(1) {\n    margin-right: 5px;\n  }\n"]))),tr="15px",ta=eh.ZP.div(z||(z=(0,el.Z)(["\n  height: ",";\n  width: ",";\n  border-radius: ",";\n  margin: ",";\n  margin-left: 0;\n  border: 2px solid #b3b3b3;\n"])),tr,tr,tr,"0"),ti=eh.ZP.li(G||(G=(0,el.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0;\n\n  & p {\n    max-width: 90%;\n    margin: 5px 0;\n  }\n"]))),ts=function(e){var n=e.integration;return(0,eg.jsxs)(tt,{children:[(0,eg.jsx)("div",{children:(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#2E8540"})}),(0,eg.jsxs)("div",{children:[(0,eg.jsx)("span",{children:"Your integration has been approved. Please wait approx. 10 min to get access to your installation information access again."}),(0,eg.jsx)(tn,{children:"Progress Update"}),(0,eg.jsx)(n3,{integration:n})]})]})},to=function(){return(0,eg.jsxs)(tt,{children:[(0,eg.jsx)("div",{children:(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#2E8540"})}),(0,eg.jsx)("div",{children:(0,eg.jsx)("span",{children:"Your integration is approved and available."})})]})};function tc(e){return e.integration,(0,eg.jsx)(eg.Fragment,{children:(0,eg.jsxs)(nH,{children:[(0,eg.jsxs)(ti,{children:["Requirements email sent to IDIM",(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#00C45B"})]}),(0,eg.jsxs)(ti,{children:[(0,eg.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,eg.jsx)(eA.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,eg.jsx)(eP.G,{icon:eS.FU$,color:"#b3b3b3"})]}),(0,eg.jsxs)(ti,{children:[(0,eg.jsx)("p",{children:"Access to prod"}),(0,eg.jsx)(ta,{})]})]})})}var tl=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,a=t.hasBceid,i=t.awaitingBceidProd,s=t.bceidProdApplying,o=t.bceidApproved;if(!r||!a)return null;var c=null;return s?c=(0,eg.jsx)(ts,{integration:n}):o?c=(0,eg.jsx)(to,{}):i&&(c=(0,eg.jsx)(tc,{integration:n})),(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)("br",{}),(0,eg.jsx)(tn,{children:"Access to BCeID Prod"}),(0,eg.jsx)("br",{}),c]})};function tu(e){return e.integration,(0,eg.jsx)(eg.Fragment,{children:(0,eg.jsxs)(nH,{children:[(0,eg.jsxs)(ti,{children:["Requirements email sent to GCIO",(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#00C45B"})]}),(0,eg.jsxs)(ti,{children:[(0,eg.jsx)("p",{children:"Access to prod"}),(0,eg.jsx)(ta,{})]})]})})}var td=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,a=t.hasGithub,i=t.awaitingGithubProd,s=t.githubProdApplying,o=t.githubApproved;if(!r||!a)return null;var c=null;return s?c=(0,eg.jsx)(ts,{integration:n}):o?c=(0,eg.jsx)(to,{}):i&&(c=(0,eg.jsx)(tu,{integration:n})),(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)("br",{}),(0,eg.jsx)(tn,{children:"Access to GitHub Prod"}),(0,eg.jsx)("br",{}),c]})},tp=t(67302),th=t(64306),tf=t(34798),tx=t.n(tf),tv=eh.ZP.label(q||(q=(0,el.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"])));eh.ZP.div(L||(L=(0,el.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"});var tg=eh.ZP.div(U||(U=(0,el.Z)(["\n  text-align: center;\n"]))),tm=eh.ZP.div(M||(M=(0,el.Z)(["\n  height: var(--field-top-spacing);\n"]))),tb=function(){return(0,eg.jsxs)(tg,{children:[(0,eg.jsx)(tm,{}),(0,eg.jsx)(ek.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},tj=(0,eN.hU)(function(e){var n,t,r,a,i=e.selectedRequest,s=e.alert,o=(0,ep.useState)(!1),c=(o[0],o[1]),l=(0,ep.useState)(!1),u=l[0],d=l[1],p=(0,ep.useState)(!1),h=p[0],f=p[1],x=(0,ep.useState)(""),v=x[0],g=x[1],m=(0,ep.useState)([]),b=m[0],j=m[1],y=(0,ep.useState)([]),w=y[0],Z=y[1],P=(0,ep.useState)(void 0),S=P[0];P[1];var C=(0,ep.useState)("dev"),k=C[0],O=C[1],D=(0,ep.useState)(!1),I=D[0],F=D[1],E=(null==i?void 0:i.environments)||[],N=(0,ep.useCallback)(np()((n=(0,ec.Z)(ed().mark(function e(n){var t,r;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),g("Assigning role..."),F(!1),e.next=5,(0,eO.$C)({environment:k,integrationId:i.id,username:(0,th.Sf)(i.clientId),roleNames:n});case 5:if(t=e.sent,r=(0,eZ.Z)(t,2)[1],f(!1),!r){e.next=15;break}return F(!0),g("Failed to update roles."),e.abrupt("return",!1);case 15:return g("Last saved at ".concat(new Date().toLocaleString())),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==i?void 0:i.id,k,S]),T=(t=(0,ec.Z)(ed().mark(function e(n,t){var r,a;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"clear"===t.action||(r="remove-value"===t.action?w.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,nc.Z)(w.slice(0,-1)):[].concat((0,nc.Z)(w),[null===(a=t.option)||void 0===a?void 0:a.value])),!(w.length!==r.length)){e.next=7;break}return e.next=5,N(r);case 5:e.sent&&Z(r);case 7:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),R=(r=(0,ec.Z)(ed().mark(function e(){var n,t,r;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c(!0);case 4:return e.next=6,(0,eO.gE)({environment:k,integrationId:i.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,eZ.Z)(n,2))[0],t[1]&&s.show({variant:"danger",content:"Failed to fetch roles."}),j(null===r?[]:r.map(function(e){return e.name})),c(!1);case 14:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),A=(a=(0,ec.Z)(ed().mark(function e(n){var t,r,a;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(!0);case 2:return e.next=4,(0,eO.nu)({environment:k,integrationId:i.id,username:n});case 4:if(t=e.sent,a=(r=(0,eZ.Z)(t,2))[0],!r[1]){e.next=12;break}return s.show({variant:"danger",content:"Failed to fetch roles."}),d(!1),e.abrupt("return");case 12:return e.next=14,Z(a||[]);case 14:d(!1);case 15:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});return(0,ep.useEffect)(function(){R(),g(""),A((0,th.Sf)(i.clientId))},[k]),(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(tp.Z,{children:(0,eg.jsx)(eX.bZ,{variant:"info",closable:!1,"data-testid":"assign-svc-acct-role-risk-alert",children:(0,eg.jsxs)("span",{className:"normal",children:["There may be a security risk if you rely on client roles of a service account,"," ",(0,eg.jsx)(eA.default,{external:!0,href:(0,eB.eO)("Creating-a-Role#service-account-role-management"),children:"click to visit our wiki page"})]})})}),(0,eg.jsxs)(eX.mQ,{onChange:function(e){O(e)},activeKey:k,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eg.jsx)("br",{}),E.map(function(e){return(0,eg.jsx)(eX.OK,{tab:eJ()(e),children:(0,eg.jsx)(eC.ZP,{cols:10,children:(0,eg.jsxs)(eC.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,eg.jsx)(eC.ZP.Col,{span:5,children:(0,eg.jsx)(nx.Z,{headers:[{accessor:"projectName",Header:"Service Account"}],data:[{projectName:i.projectName}],colfilters:[],activateRow:tx(),rowSelectorKey:"projectName"})}),(0,eg.jsx)(eC.ZP.Col,{span:5,children:u?(0,eg.jsx)(tb,{}):(0,eg.jsxs)("div",{children:[(0,eg.jsx)(tv,{children:"Assign Service Account to a Role"}),(0,eg.jsx)("div",{"data-testid":"assign-svc-acct-to-role-select",children:(0,eg.jsx)(e0.ZP,{value:w.map(function(e){return{value:e,label:e}}),options:b.map(function(e){return{value:e,label:e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:T})}),(0,eg.jsx)(eX.Ad,{saving:h,content:v,variant:I?"error":"success"})]})})]})})},e)})]})]})});function ty(){return(0,eg.jsxs)(nH,{children:[(0,eg.jsxs)(ti,{children:["Requirements email sent to DIT",(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#00C45B"})]}),(0,eg.jsxs)(ti,{children:[(0,eg.jsxs)("p",{children:["Please reach out to DIT if you do not hear back within the next 2-3 business days (",(0,eg.jsx)(eA.default,{href:"mailto:ditp.support@gov.bc.ca",children:"ditp.support@gov.bc.ca"}),")."]}),(0,eg.jsx)(eP.G,{icon:eS.FU$,color:"#b3b3b3"})]}),(0,eg.jsxs)(ti,{children:[(0,eg.jsx)("p",{children:"Access to prod"}),(0,eg.jsx)(ta,{})]})]})}var tw=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,a=t.hasDigitalCredential,i=t.awaitingDigitalCredentialProd,s=t.digitalCredentialProdApplying,o=t.digitalCredentialApproved;if(!r||!a)return null;var c=null;return s?c=(0,eg.jsx)(ts,{integration:n}):o?c=(0,eg.jsx)(to,{}):i&&(c=(0,eg.jsx)(ty,{})),(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)("br",{}),(0,eg.jsx)(tn,{children:"Access to Digital Credential Prod"}),(0,eg.jsx)("br",{}),c]})};function tZ(e){return e.integration,(0,eg.jsx)(eg.Fragment,{children:(0,eg.jsxs)(nH,{children:[(0,eg.jsxs)(ti,{children:["Requirements email sent to IDIM",(0,eg.jsx)(eP.G,{icon:eS.f8k,color:"#00C45B"})]}),(0,eg.jsxs)(ti,{children:[(0,eg.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,eg.jsx)(eA.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,eg.jsx)(eP.G,{icon:eS.FU$,color:"#b3b3b3"})]}),(0,eg.jsxs)(ti,{children:[(0,eg.jsx)("p",{children:"Access to prod"}),(0,eg.jsx)(ta,{})]})]})})}var tP=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,a=t.hasBcServicesCard,i=t.awaitingBcServicesCardProd,s=t.bcServicesCardProdApplying,o=t.bcServicesCardApproved;if(!r||!a)return null;var c=null;return s?c=(0,eg.jsx)(ts,{integration:n}):o?c=(0,eg.jsx)(to,{}):i&&(c=(0,eg.jsx)(tZ,{integration:n})),(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)("br",{}),(0,eg.jsx)(tn,{children:"Access to BC Services Card Prod"}),(0,eg.jsx)("br",{}),c]})},tS=t(29009),tC=t(41087),tk=t(14195),tO=t(3023),tD=t(75358),tI=t(26050),tF=t(33558),tE=t(18242),tN=t(84642),tT=(i=(0,ec.Z)(ed().mark(function e(n,t,r,a){var i;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nm.e.get("requests/".concat(n,"/metrics?env=").concat(t,"&fromDate=").concat(r,"&toDate=").concat(a)).then(function(e){return null==e?void 0:e.data});case 3:return i=e.sent,e.abrupt("return",[i,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r){return i.apply(this,arguments)}),tR=(s=(0,ec.Z)(ed().mark(function e(n,t,r,a,i,s){var o;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,nm.e)({url:"requests/".concat(n,"/logs?env=").concat(t,"&start=").concat(r,"&end=").concat(a),method:"GET",responseType:"blob",onDownloadProgress:i,signal:null==s?void 0:s.signal}).then(function(e){return null==e?void 0:e.data});case 3:return o=e.sent,e.abrupt("return",[o,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r,a,i){return s.apply(this,arguments)}),tA=t(9198),tB=t.n(tA);t(459);var tz=t(31879);function tG(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tq(e){return(0,eg.jsx)(eg.Fragment,{children:(0,eg.jsx)(tB(),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tG(Object(t),!0).forEach(function(n){(0,ef.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tG(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({dateFormat:"yyyy-MM-dd",customInput:(0,eg.jsx)(tL,{label:e.label}),enableTabLoop:!1,popperPlacement:"bottom-start",maxDate:new Date},e))})}function tL(e){var n=e.value,t=e.onClick,r=e.label;return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(tz.Z,{style:{fontWeight:"bold"},children:r}),(0,eg.jsxs)("div",{className:"input-group",children:[(0,eg.jsx)("input",{type:"text",className:"form-control",value:n,onClick:t,readOnly:!0}),(0,eg.jsx)("div",{className:"input-group-append",children:(0,eg.jsx)("span",{className:"input-group-text",style:{height:"100%"},children:(0,eg.jsx)(eP.G,{icon:eS.fT7})})})]})]})}var tU=t(9206),tM=eh.ZP.div(K||(K=(0,el.Z)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  padding-right: 15px;\n  & > * {\n    margin-left: 15px;\n  }\n"])));eh.ZP.label(H||(H=(0,el.Z)(["\n  margin-bottom: 2px;\n"])));var tK=eh.ZP.div(_||(_=(0,el.Z)(["\n  height: var(--field-top-spacing);\n"])));eh.ZP.span(Y||(Y=(0,el.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"]))),(0,eh.ZP)(eP.G)(W||(W=(0,el.Z)(["\n  margin-right: 20px;\n"]))),eh.ZP.div(V||(V=(0,el.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"]))),eh.ZP.hr($||($=(0,el.Z)(["\n  background-color: black;\n"])));var tH=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},t_="December 01, 2023",tY=(0,eN.hU)(function(e){var n,t=e.integration,r=e.alert,a=(0,ep.useState)("dev"),i=a[0],s=a[1],o=(null==t?void 0:t.environments)||[],c=(0,ep.useState)([]),l=c[0],u=c[1],d=(0,ep.useState)(!1);d[0],d[1];var p=(0,ep.useState)((0,eF.F3)(14)),h=p[0],f=p[1],x=(0,ep.useState)(new Date),v=x[0],g=x[1],m=(0,ep.useContext)(ni.SurveyContext),b=function(e){f(e)},j=function(e){g(e)},y=(0,ep.useCallback)(np()((n=(0,ec.Z)(ed().mark(function e(n,a,i){var s,o,c;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tT(null==t?void 0:t.id,i,n,a);case 2:s=e.sent,c=(o=(0,eZ.Z)(s,2))[0],o[1]?r.show({variant:"danger",content:"Failed to fetch metrics"}):(u(c),c.length>0&&(null==m||m.setShowSurvey(!0,"viewMetrics")));case 7:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)})),[null==t?void 0:t.clientId,i,h,v]);return(0,ep.useEffect)(function(){y(tH(h),tH(v),i)},[null==t?void 0:t.clientId,i,h,v]),(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(tK,{}),(0,eg.jsx)("div",{children:(0,eg.jsxs)(tM,{children:[(0,eg.jsx)(tq,{placeholderText:"Start Date",selected:new Date(h),onChange:function(e){return b(e)},minDate:new Date(t_),maxDate:v,label:"Start Date"}),(0,eg.jsx)(tq,{placeholderText:"End Date",selected:new Date(v),onChange:function(e){return j(e)},minDate:h,label:"End Date"})]})}),(0,eg.jsxs)(eX.mQ,{onChange:function(e){s(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,eg.jsx)("br",{}),o.map(function(e){return(0,eg.jsx)(eX.OK,{tab:eJ()(e),children:(0,eg.jsx)("div",{style:{width:"100%",height:300},children:(null==l?void 0:l.length)>0?(0,eg.jsx)(tS.h,{children:(0,eg.jsxs)(tC.v,{data:l,margin:{top:20,right:20,bottom:30,left:20},children:[(0,eg.jsx)(tk.q,{strokeDasharray:"3 3"}),(0,eg.jsx)(tO.K,{dataKey:"event",tick:{fontSize:10},label:{value:"Events",position:"insideBottomRight"}}),(0,eg.jsx)(tD.B,{dataKey:"count",label:{value:"Count",angle:-90,position:"insideLeft"}}),(0,eg.jsx)(tI.u,{}),(0,eg.jsx)(tF.D,{}),(0,eg.jsx)(tE.$,{dataKey:"count",fill:"#0d6efd",barSize:30,label:{fill:"#0d6efd",fontSize:20,position:"top"},background:{fill:"#eee"}})]})}):(0,eg.jsx)("div",{style:{textAlign:"center"},children:(0,eg.jsx)(tN.x,{children:"No data available yet!"})})})},e)})]}),(0,eg.jsxs)(eT.$,{children:["This tab was released ",t_,". Please refer to"," ",(0,eg.jsx)(tU.rU,{href:"https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html/server_administration_guide/auditing_and_events#event_types",external:!0,children:"Redhat's definition"})," ","for event type details."]})]})}),tW=eh.ZP.div(J||(J=(0,el.Z)(["\n  display: flex;\n  flex-direction: row;\n  column-gap: 1.5em;\n  justify-content: center;\n  min-width: 20em;\n  margin: 0;\n  padding: 0;\n"]))),tV=(0,eh.ZP)(eK.default)(Q||(Q=(0,el.Z)(["\n  width: 150px;\n  text-align: center;\n"]))),t$=eh.ZP.form(X||(X=(0,el.Z)(["\n  display: flex;\n  flex-direction: column;\n  row-gap: 1.5em;\n\n  .header {\n    margin-top: 1em;\n    display: flex;\n    align-items: center;\n    p {\n      font-weight: bold;\n      padding-right: 0.4em;\n      margin: 0;\n      font-size: 18px;\n    }\n  }\n\n  .bold {\n    font-weight: bold;\n  }\n\n  .env-controls {\n    margin: 0;\n    legend {\n      font-size: unset;\n      font-weight: bold;\n    }\n\n    input {\n      margin-right: 0.2em;\n    }\n\n    label {\n      margin-right: 1em;\n    }\n  }\n\n  .date-picker-container {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    column-gap: 1em;\n  }\n\n  select {\n    margin-left: 0.5em;\n    width: 200px;\n  }\n\n  .button-container {\n    display: flex;\n    flex-diretion: row;\n    align-items: center;\n\n    p {\n      margin: 0;\n      margin-left: 1em;\n    }\n  }\n\n  .error-text {\n    font-size: 14px;\n    color: red;\n    margin: 0;\n    height: 1em;\n  }\n"]))),tJ=function(e,n){var t=new Blob([JSON.stringify(n)],{type:"text/json"}),r=document.createElement("a");r.download=e,r.href=window.URL.createObjectURL(t),r.dataset.downloadurl=["text/json",r.download,r.href].join(":");var a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});r.dispatchEvent(a),r.remove()},tQ={dev:"Development",test:"Test",prod:"Production"},tX=new Date("February 13, 2024"),t0=(0,eN.hU)(function(e){var n,t=e.integration,r=e.alert,a=(0,ep.useState)("dev"),i=a[0],s=a[1],o=(null==t?void 0:t.environments)||[],c=(0,ep.useState)(!1),l=c[0],u=c[1],d=(0,ep.useState)((0,eF.F3)(1)),p=d[0],h=d[1],f=(0,ep.useState)(new Date),x=f[0],v=f[1],g=(0,ep.useState)(""),m=g[0],b=g[1],j=(0,ep.useState)(0),y=j[0],w=j[1],Z=(0,ep.useState)(new Date),P=Z[0],S=Z[1],C=(0,ep.useState)(),k=C[0],O=C[1],D=(0,ep.useContext)(ni.SurveyContext),I=(0,ep.useState)(!1),F=I[0],E=I[1];(0,ep.useEffect)(function(){p&&(Date.now()-p.getTime()>1728e5?S(new Date(p.getTime()+1728e5)):S(new Date),x&&(x.getTime()<p.getTime()||x.getTime()-p.getTime()>1728e5)&&v(null))},[p]),(0,ep.useEffect)(function(){x&&p&&x.getTime()<p.getTime()&&b("Please ensure your end date is later than your start date.")},[x]);var N=function(e){b(""),h(e)},T=function(e){b(""),v(e)},R=function(e){var n=Math.floor(e.loaded/e.total*100);n!==y&&w(n)},A=function(){s("dev"),h((0,eF.F3)(1)),v(new Date)};(0,ep.useEffect)(function(){A()},[t.clientId]);var B=(n=(0,ec.Z)(ed().mark(function e(n){var a,s,o,c,l,d,h,f,v,g;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),null==k||k.abort(),O(a=new AbortController),E(!0),e.prev=5,!(!p||!x)){e.next=9;break}return b("Please select a date range."),e.abrupt("return");case 9:return u(!0),e.next=12,tR(t.id,i,p,x,R,a);case 12:if(s=e.sent,c=(o=(0,eZ.Z)(s,2))[0],!(l=o[1])){e.next=22;break}if("ERR_CANCELED"!==l.code){e.next=19;break}return e.abrupt("return");case 19:r.show({variant:"danger",fadeOut:1e4,closable:!0,content:null!==(d=null==l?void 0:null===(h=l.response)||void 0===h?void 0:null===(f=h.data)||void 0===f?void 0:f.message)&&void 0!==d?d:"Error fetching logs."}),e.next=28;break;case 22:return r.show({variant:"success",fadeOut:1e4,closable:!0,content:null!==(v=null==c?void 0:c.message)&&void 0!==v?v:"Downloaded logs."}),e.next=25,c.text();case 25:g=e.sent,tJ("".concat(t.clientId,"-").concat(p.toLocaleString(),"-").concat(x.toLocaleString(),".json"),JSON.parse(g)),null==D||D.setShowSurvey(!0,"downloadLogs");case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(5),console.error("Exception parsing file");case 33:return e.prev=33,u(!1),w(0),E(!1),e.finish(33);case 38:case"end":return e.stop()}},e,null,[[5,30,33,38]])})),function(e){return n.apply(this,arguments)}),z=function(e){s(e.target.value)};return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsxs)(t$,{onSubmit:B,children:[(0,eg.jsxs)("div",{className:"header",children:[(0,eg.jsx)("p",{children:"Download Logs"}),(0,eg.jsx)(nP.Z,{content:"You can download upto 25,000 logs at a time. Result will indicate if all logs in the selected time interval were retrieved or a smaller time interval is required."})]}),(0,eg.jsxs)("fieldset",{className:"env-controls",disabled:l,children:[(0,eg.jsx)("legend",{children:"Select an Environment"}),o.map(function(e){return(0,eg.jsxs)("span",{children:[(0,eg.jsx)("input",{id:"radio-".concat(e),type:"radio",name:"environmentSelection",value:e,checked:i===e,onChange:z}),(0,eg.jsx)("label",{htmlFor:"radio-".concat(e),children:tQ[e]})]},e)})]}),(0,eg.jsxs)("div",{children:[(0,eg.jsxs)("div",{className:"date-picker-container",children:[(0,eg.jsx)(tq,{placeholderText:"Start Date",selected:p,onChange:function(e){return N(e)},minDate:tX,shouldCloseOnSelect:!1,label:"Start Date",showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",disabled:l}),(0,eg.jsx)(tq,{placeholderText:"End Date",selected:x,onChange:function(e){return T(e)},minDate:p,maxDate:P,label:"End Date",shouldCloseOnSelect:!1,showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",disabled:l})]}),(0,eg.jsx)("p",{className:"error-text",children:m})]}),(0,eg.jsx)("div",{className:"button-container",children:(0,eg.jsx)(tV,{type:"submit",disabled:m||l,children:"Download"})})]}),(0,eg.jsx)(eH.Z,{id:"logs-modal",showConfirm:!1,title:"Downloading Logs",onClose:function(){null==k||k.abort(),u(!1),w(0)},content:(0,eg.jsxs)(tW,{children:[(0,eg.jsx)(ek.rj,{color:"black",visible:l,height:25,width:25,wrapperStyle:{justifyContent:"center"}}),l&&0===y&&(0,eg.jsx)("p",{children:"Querying logs..."}),l&&0!==y?(0,eg.jsxs)("p",{children:[y,"% downloaded."]}):null]}),openModal:F,handleClose:function(){return E(!1)}})]})}),t1=eh.ZP.div(ee||(ee=(0,el.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  ","\n"])),function(e){return e.short?"max-width: 800px;":""});eh.ZP.div(en||(en=(0,el.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  margin-bottom: 1rem;\n"])));var t2=eh.ZP.div(et||(et=(0,el.Z)(["\n  text-align: center;\n"]))),t3=eh.ZP.div(er||(er=(0,el.Z)(["\n  height: var(--field-top-spacing);\n"]))),t5=eh.ZP.div(ea||(ea=(0,el.Z)(["\n  margin-bottom: 60px;\n"]))),t4="tech-details",t7="role-management",t8="user-role-management",t6="service-account-role-management",t9="secret",re="history",rn="metrics",rt="Logs",rr=function(e){var n=e.integration,t=e.children;return(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsxs)("h2",{children:["INTEGRATION DETAILS - ",te()(String(n.id),8,"0")]}),(0,eg.jsx)(eX.OC,{children:t})]})},ra=function(e){var n=e.integration,t=e.approvalContext;return(0,eg.jsx)(eX.OK,{tab:"Technical Details",children:(0,eg.jsx)(t1,{short:!1,children:(0,eg.jsx)(eC.ZP,{cols:15,children:(0,eg.jsxs)(eC.ZP.Row,{gutter:[],children:[(0,eg.jsx)(eC.ZP.Col,{span:7,children:(0,eg.jsx)(eM,{integration:n})}),(0,eg.jsx)(eC.ZP.Col,{span:1}),(0,eg.jsxs)(eC.ZP.Col,{span:7,children:[(0,eg.jsx)(tl,{integration:n,approvalContext:t}),(0,eg.jsx)(td,{integration:n,approvalContext:t}),(0,eg.jsx)(tw,{integration:n,approvalContext:t}),(0,eg.jsx)(tP,{integration:n,approvalContext:t})]})]})})})},t4)},ri=function(e){var n=e.integration;return(0,eg.jsx)(eX.OK,{tab:"Role Management",children:(0,eg.jsxs)(t1,{children:[(0,eg.jsx)("br",{}),(0,eg.jsxs)("div",{children:["Please visit our"," ",(0,eg.jsx)(eA.default,{external:!0,href:(0,eB.eO)("Creating-a-Role"),children:"wiki page"})," ","for more information on roles."]}),(0,eg.jsx)(no,{integration:n})]})},t7)},rs=function(e){var n=e.integration;return(0,eg.jsx)(eX.OK,{tab:"Assign Users to Roles",children:(0,eg.jsx)(t1,{children:(0,eg.jsx)(nz,{selectedRequest:n})})},t8)},ro=function(e){var n=e.integration;return(0,eg.jsx)(eX.OK,{tab:"Assign Service Account to Roles",children:(0,eg.jsx)(t1,{children:(0,eg.jsx)(tj,{selectedRequest:n})})},t6)},rc=function(e){var n=e.integration;return(0,eg.jsx)(eX.OK,{tab:"Secrets",children:(0,eg.jsx)(t1,{short:!0,children:(0,eg.jsx)(eV,{selectedRequest:n})})},t9)},rl=function(e){var n=e.integration;return(0,eg.jsx)(eX.OK,{tab:"Metrics",children:(0,eg.jsx)(t1,{short:!1,children:(0,eg.jsx)(tY,{integration:n})})},rn)},ru=function(e){var n=e.integration;return(0,eg.jsx)(eX.OK,{tab:"Logs",children:(0,eg.jsx)(t1,{short:!1,children:(0,eg.jsx)(t0,{integration:n})})},rt)},rd=function(e){var n=e.integration;return(0,eg.jsx)(eX.OK,{tab:"Change History",children:(0,eg.jsx)(t1,{short:!0,children:(0,eg.jsx)(n8,{requestId:n.id})})},re)},rp=function(e){var n,t,r=e.integration,a=(0,ep.useState)(t4),i=a[0],s=a[1];if(!r)return null;var o=r.status,c=r.environments,l=r.bceidApproved,u=void 0!==l&&l,d=r.githubApproved,p=void 0!==d&&d,h=r.digitalCredentialApproved,f=void 0!==h&&h,x=r.bcServicesCardApproved,v=void 0!==x&&x,g=(0,nG.n)(o||"draft"),m=(void 0===c?[]:c).includes("prod"),b=(0,n6.Jx)(r),j=(0,n6.dV)(r),y=(0,n6.S3)(r),w=(0,n6.e$)(r),Z=(0,eF.he)(r),P=(0,eF.R5)(r),S=(0,eF.jt)(r),C=(0,eF.kF)(r),k="gold"===r.serviceType,O="service-account"!==r.authType,D="both"===r.authType;if("In Draft"===g)return(0,eg.jsx)(rr,{integration:r,children:(0,eg.jsxs)(ew,{variant:"info",children:[(0,eg.jsx)("div",{children:(0,eg.jsx)("strong",{children:"Your request has not been submitted."})}),(0,eg.jsx)("div",{children:'To complete your request, click "Edit" button.'})]})});var I=[],F=[],E=(null===(n=r.devIdps)||void 0===n?void 0:n.length)&&(null===(t=r.devIdps)||void 0===t?void 0:t.every(function(e){return["digitalcredential","bcservicescard"].includes(e)}));"Submitted"===g?["planFailed","applyFailed"].includes(r.status)?(I.push((0,eg.jsx)(eX.OK,{tab:"Technical Details",children:(0,eg.jsx)(t1,{short:!1,children:(0,eg.jsx)("div",{style:{display:"inline-flex",margin:"20px 0 20px 0",background:"#FFCCCB",borderRadius:"5px"},children:(0,eg.jsx)("div",{style:{padding:5},children:(0,eg.jsxs)(eT.B,{children:["Your request for an integration could not be completed. Please"," ",(0,eg.jsx)(eA.default,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})})})},t4)),F.push(t4)):(I.push((0,eg.jsx)(eX.OK,{tab:"Technical Details",children:(0,eg.jsx)(t1,{short:!1,children:(0,eg.jsxs)(eC.ZP,{cols:15,children:[(0,eg.jsx)("br",{}),(0,eg.jsxs)(t2,{children:[(0,eg.jsx)(t3,{}),(0,eg.jsx)(ek.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0}),(0,eg.jsx)(t5,{})]})]})})},t4)),F.push(t4)):"Completed"===g&&(I.push(ra({integration:r,approvalContext:{hasProd:m,hasBceid:b,hasGithub:j,hasDigitalCredential:y,hasBcServicesCard:w,bceidApproved:u,githubApproved:p,digitalCredentialApproved:f,bcServicesCardApproved:v,awaitingBceidProd:b&&m&&!u,awaitingGithubProd:j&&m&&!p,awaitingDigitalCredentialProd:y&&m&&!f,awaitingBcServicesCardProd:w&&m&&!v,bceidProdApplying:Z,githubProdApplying:P,digitalCredentialProdApplying:S,bcServicesCardProdApplying:C}})),F.push(t4),E||(I.push(ri({integration:r})),F.push(t7)),k&&O&&!E&&(I.push(rs({integration:r})),F.push(t8)),k&&(!O||D)&&(I.push(ro({integration:r})),F.push(t6)),r.publicAccess||(I.push(rc({integration:r})),F.push(t9)),I.push(rd({integration:r})),F.push(re),I.push(rl({integration:r})),F.push(rn),I.push(ru({integration:r})),F.push(rt));var N=i;return F.includes(i)||(N=F[0]),(0,eg.jsx)(rr,{integration:r,children:(0,eg.jsx)(eX.mQ,{activeKey:N,onChange:function(e){s(e)},tabBarGutter:30,destroyInactiveTabPane:!0,children:I})})},rh=t(11163),rf=t(35927),rx=t(24791),rv=eh.ZP.tr(ei||(ei=(0,el.Z)(["\n  float: right;\n  padding-right: 0.5em;\n"]))),rg=eh.ZP.p(es||(es=(0,el.Z)(["\n  margin: 0;\n"])));function rm(){return(0,eg.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var rb=function(e){return te()(String(e),8,"0")},rj=function(e){var n=e.handleNewIntegrationClick,t=e.integrations;return t&&(null==t?void 0:t.length)!=0?(0,eg.jsx)(eX.zx,{size:"medium","data-testid":"request-integration",onClick:n,variant:"callout",children:"+ Request SSO Integration"}):(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)("p",{children:(0,eg.jsx)("b",{children:"To request an integration for a Standard Realm, you’ll need the following information:"})}),(0,eg.jsxs)("div",{style:{background:"#D9EDFD",textAlign:"center",padding:"16px"},children:[(0,eg.jsxs)(eC.ZP,{cols:2,style:{textAlign:"left"},children:[(0,eg.jsxs)(eC.ZP.Row,{collapse:"992",gutter:[],align:"top",children:[(0,eg.jsxs)(eC.ZP.Col,{span:1,children:[(0,eg.jsx)(eX.wk,{number:1,title:"Project Information",children:null}),(0,eg.jsxs)(rg,{children:[(0,eg.jsx)(eP.G,{icon:eS.LEp})," Project Name"]}),(0,eg.jsxs)(rg,{children:[(0,eg.jsx)(eP.G,{icon:eS.LEp})," Project Team Members (Optional)"]}),(0,eg.jsxs)(rg,{children:[(0,eg.jsx)(eP.G,{icon:eS.LEp})," Product Owner or Technical Contact"]})]}),(0,eg.jsxs)(eC.ZP.Col,{span:1,children:[(0,eg.jsx)(eX.wk,{number:2,title:"Technical Info",children:null}),(0,eg.jsxs)(rg,{children:[(0,eg.jsx)(eP.G,{icon:eS.LEp})," Client type (",(0,eg.jsx)(eA.default,{href:(0,eB.eO)("Useful-References#client"),children:"Public or Confidential, learn more"}),")"]}),(0,eg.jsxs)(rg,{children:[(0,eg.jsx)(eP.G,{icon:eS.LEp})," Identity Provider (IDIR, Azure, BCeID or Basic)"]}),(0,eg.jsxs)(rg,{children:[(0,eg.jsx)(eP.G,{icon:eS.LEp})," Environments (Development, Test, Production)"]}),(0,eg.jsxs)(rg,{children:[(0,eg.jsx)(eP.G,{icon:eS.LEp})," Redirect URIs for selected environments"]})]})]}),(0,eg.jsx)("p",{style:{marginTop:"1.25rem"},children:"*You’ll be able to save and return your integration request, anytime throughout the request form."})]}),(0,eg.jsx)(eX.zx,{size:"medium","data-testid":"request-integration",onClick:n,variant:"callout",children:"+ Request SSO Integration"})]})]})},ry=(0,eN.hU)(function(e){var n,t,r,a=e.setIntegration,i=e.setIntegrationCount,s=e.alert,o=(0,rh.useRouter)(),c=o.query.integr,l=(0,ep.useState)(!0),u=l[0],d=l[1],p=(0,ep.useState)(!1),h=p[0],f=p[1],x=(0,ep.useState)([]),v=x[0],g=x[1],m=(0,ep.useState)(c&&Number(c)||void 0),b=m[0],j=m[1],y=(n=(0,ec.Z)(ed().mark(function e(){return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.push("/request");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),w=function(e){j(e.id),a(e)},Z=function(e){var n=e||[];if(g(n),i(n.length),b){var t=e.find(function(e){return(null==e?void 0:e.id)===b});t?w(t):(null==e?void 0:e.length)>0&&w(e[0])}else(null==e?void 0:e.length)>0&&w(e[0])},P=(t=(0,ec.Z)(ed().mark(function e(){var n,t,r;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,(0,n_.XJ)();case 3:n=e.sent,r=(t=(0,eZ.Z)(n,2))[0],f(!!t[1]),Z(r||[]),d(!1);case 10:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,ep.useEffect)(function(){P(),o.replace("/my-dashboard/integrations")},[]),(0,ep.useEffect)(function(){return(0,eF.rn)(v||[])&&(clearInterval(r),r=setInterval((0,ec.Z)(ed().mark(function e(){var n,t,a;return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n_.XJ)();case 2:n=e.sent,a=(t=(0,eZ.Z)(n,2))[0],t[1]?clearInterval(r):Z(a||[]);case 7:case"end":return e.stop()}},e)})),5e3)),function(){r&&clearInterval(r)}},[v,b]);var S=h?(0,eg.jsx)(rx.q1,{}):v&&0!==v.length?(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(eX.h4,{size:"lg",children:"INTEGRATIONS"}),(0,eg.jsx)(nx.Z,{headers:[{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"status",Header:"Status"},{accessor:"authType",Header:"Usecase"},{accessor:"serviceType",Header:"Service Type"},{accessor:"actions",Header:(0,eg.jsx)(rm,{}),disableSortBy:!0}],data:null==v?void 0:v.map(function(e){return{id:rb(e.id),projectName:e.projectName,status:(0,nG.n)(e.status||"draft"),authType:rf.F[e.authType||"browser-login"],serviceType:"Gold",actions:(0,eg.jsx)(rv,{children:(0,eg.jsx)(nv.ZP,{request:e,onDelete:function(n,t){t?s.show({variant:"danger",content:"Failed to delete integration ".concat(e.projectName,".")}):P()},defaultActiveColor:"#fff",delIconStyle:{marginLeft:"7px"}})})}}),activateRow:function(e){var n=e.cells[0].value;v.forEach(function(e){e.id==n&&w(e)})},activeSelector:b&&rb(b),rowSelectorKey:"id",colfilters:[]})]}):(0,eg.jsx)(rx.Vs,{message:"No Requests Submitted"});return u?(0,eg.jsx)(n4.Z,{}):(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)("br",{}),(0,eg.jsx)(rj,{handleNewIntegrationClick:y,integrations:v}),(0,eg.jsx)("br",{}),(0,eg.jsx)("br",{}),S]})}),rw=t(49936),rZ=eh.ZP.div(eo||(eo=(0,el.Z)(["\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n  flex: 1;\n"]))),rP=function(e){e.session;var n,t=(0,rh.useRouter)(),r=(0,ep.useState)(null),a=r[0],i=r[1],s=(0,ep.useState)(1),o=s[0],c=s[1],l=(0,ep.useState)(!1),u=l[0],d=l[1],p="integration-failed-modal",h=(n=(0,ec.Z)(ed().mark(function e(){return ed().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.location.hash=p);case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),f=(0,ep.useState)(""),x=f[0],v=f[1];return(0,ep.useEffect)(function(){var e;v(t.query.requestId),(null==t?void 0:null===(e=t.query)||void 0===e?void 0:e.integrationFailedMessageModal)==="true"&&(d(!0),h())},[t.query.showModal]),(0,eg.jsxs)(eg.Fragment,{children:[(0,eg.jsx)(rw.Z,{tab:"integrations",leftPanel:function(){return(0,eg.jsx)(ry,{setIntegration:i,setIntegrationCount:c})},rightPanel:function(){return a&&(0,eg.jsx)(rp,{integration:a})},showResizable:o>0}),(0,eg.jsx)(eH.Z,{id:p,openModal:u,handleClose:function(){return d(!1)},title:"".concat(x," - Integration request failed"),content:(0,eg.jsxs)("div",{children:[(0,eg.jsx)("div",{children:(0,eg.jsx)("p",{children:"The integration request could not be completed. Please contact the Pathfinder SSO Team."})}),(0,eg.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},children:[(0,eg.jsx)(rZ,{children:(0,eg.jsx)("div",{children:(0,eg.jsxs)("a",{href:"https://chat.developer.gov.bc.ca/channel/sso",target:"_blank",title:"Rocket Chat",style:{color:"#0d6efd"},children:[(0,eg.jsx)(eP.G,{size:"1x",icon:eS.Z6I,color:"#0d6efd"})," Rocketchat"]})})}),(0,eg.jsx)(rZ,{children:(0,eg.jsx)("div",{children:(0,eg.jsxs)("a",{href:"mailto:bcgov.sso@gov.bc.ca",title:"Pathfinder SSO",style:{color:"#0d6efd"},children:[(0,eg.jsx)(eP.G,{size:"1x",icon:eS.FU$,color:"#0d6efd"})," Email"]})})})]})]}),showCancel:!1,showConfirm:!1,skipCloseOnConfirm:!0,closable:!0})]})}},27008:function(e,n,t){"use strict";t.d(n,{A_:function(){return S},H0:function(){return k},Jl:function(){return E},OS:function(){return D},Uw:function(){return N},WN:function(){return F},XJ:function(){return C},ct:function(){return O},hG:function(){return P},zD:function(){return I}});var r,a,i,s,o,c,l,u,d,p,h=t(50029),f=t(87794),x=t.n(f),v=t(10433),g=t(75316),m=t.n(g),b=t(25751),j=t.n(b),y=t(76427),w=t.n(y),Z=t(58766),P=(r=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.post("requests",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,Z.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return r.apply(this,arguments)}),S=(a=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.post("request",{requestId:j()(n)?parseInt(n):n}).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,Z.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return a.apply(this,arguments)}),C=(i=(0,h.Z)(x().mark(function e(){var n,t,r=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={params:{include:r.length>0&&void 0!==r[0]?r[0]:"active"}},e.prev=2,e.next=5,v.e.get("requests",n).then(function(e){return e.data});case 5:return t=e.sent,t=m()(t,["createdAt"],["desc"]),e.abrupt("return",[t.map(Z.UB),null]);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",(0,v.z)(e.t0));case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(){return i.apply(this,arguments)}),k=(s=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.get("team-integrations/".concat(n)).then(function(e){return e.data});case 3:return t=e.sent,t=m()(t,["createdAt"],["desc"]),e.abrupt("return",[t.map(Z.UB),null]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return s.apply(this,arguments)}),O=(o=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.get("requests/".concat(n,"/resubmit")).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,Z.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return o.apply(this,arguments)}),D=(c=(0,h.Z)(x().mark(function e(n,t){var r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.post("requests/".concat(n,"/restore"),{email:t}).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[(0,Z.UB)(r),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return c.apply(this,arguments)}),I=(l=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.post("requests-all",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[{count:t.count,rows:t.rows.map(Z.UB)},null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return l.apply(this,arguments)}),F=(u=(0,h.Z)(x().mark(function e(n){var t,r,a,i,s,o=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]&&o[1],e.prev=1,i="requests",t&&(i="".concat(i,"?submit=true")),(n=w()(n,["user","lastChanges"])).devLoginTitle=n.devLoginTitle||"",n.testLoginTitle=n.testLoginTitle||"",n.prodLoginTitle=n.prodLoginTitle||"",n.additionalRoleAttribute=n.additionalRoleAttribute||"",n.clientId=n.clientId||"",n.primaryEndUsers=null!==(r=n.primaryEndUsers)&&void 0!==r?r:[],n.primaryEndUsersOther=null!==(a=n.primaryEndUsersOther)&&void 0!==a?a:"",e.next=14,v.e.put(i,n).then(function(e){return e.data});case 14:return s=e.sent,e.abrupt("return",[(0,Z.UB)(s),null]);case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",(0,v.z)(e.t0));case 21:case"end":return e.stop()}},e,null,[[1,18]])})),function(e){return u.apply(this,arguments)}),E=(d=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.delete("requests",{params:{id:n}}).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return d.apply(this,arguments)}),N=(p=(0,h.Z)(x().mark(function e(n){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.put("request-metadata",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,Z.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,v.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return p.apply(this,arguments)})},9595:function(e,n,t){"use strict";t.d(n,{Di:function(){return i},ON:function(){return r},TE:function(){return a}});var r=function(e){return JSON.stringify(e,void 0,2)},a=function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{return document.execCommand("copy"),document.body.removeChild(n),!0}catch(e){return document.body.removeChild(n),!1}},i=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:t})),a=document.createElement("a");a.href=r,a.setAttribute("download",n),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},80382:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/integrations",function(){return t(13817)}])}},function(e){e.O(0,[662,925,936,706,620,822,338,449,291,845,774,888,179],function(){return e(e.s=80382)}),_N_E=e.O()}]);